/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 107);
/******/ })
/************************************************************************/
/******/ ({

/***/ 1:
/***/ (function(module, exports) {

eval("var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzPzM2OTgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRDQUE0Qzs7QUFFNUMiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),

/***/ 107:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(108);


/***/ }),

/***/ 108:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_hellojs_dist_hello_all__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_hellojs_dist_hello_all___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_hellojs_dist_hello_all__);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIxMDguanMiLCJzb3VyY2VzQ29udGVudCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///108\n");

/***/ }),

/***/ 3:
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzPzViNjkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDQUFxQzs7QUFFckM7QUFDQTtBQUNBOztBQUVBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVSIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n");

/***/ }),

/***/ 4:
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(7);\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcz9kN2FkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHNjb3BlID0gKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsKSB8fFxuICAgICAgICAgICAgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYpIHx8XG4gICAgICAgICAgICB3aW5kb3c7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbChzY29wZSwgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG4vLyBPbiBzb21lIGV4b3RpYyBlbnZpcm9ubWVudHMsIGl0J3Mgbm90IGNsZWFyIHdoaWNoIG9iamVjdCBgc2V0aW1tZWRpYXRlYCB3YXNcbi8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG4vLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),

/***/ 7:
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1), __webpack_require__(3)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcz85YjJhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpQkFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBDQUEwQyxzQkFBc0IsRUFBRTtBQUNsRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQyIsImZpbGUiOiI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n");

/***/ }),

/***/ 9:
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process, setImmediate) {var __WEBPACK_AMD_DEFINE_RESULT__;/*! hellojs v1.16.1 | (c) 2012-2017 Andrew Dodson | MIT https://adodson.com/hello.js/LICENSE */\n// ES5 Object.create\nif (!Object.create) {\n\n\t// Shim, Object create\n\t// A shim for Object.create(), it adds a prototype to a new object\n\tObject.create = (function() {\n\n\t\tfunction F() {}\n\n\t\treturn function(o) {\n\n\t\t\tif (arguments.length != 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\n\t})();\n\n}\n\n// ES5 Object.keys\nif (!Object.keys) {\n\tObject.keys = function(o, k, r) {\n\t\tr = [];\n\t\tfor (k in o) {\n\t\t\tif (r.hasOwnProperty.call(o, k))\n\t\t\t\tr.push(k);\n\t\t}\n\n\t\treturn r;\n\t};\n}\n\n// ES5 [].indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function(s) {\n\n\t\tfor (var j = 0; j < this.length; j++) {\n\t\t\tif (this[j] === s) {\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// ES5 [].forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function(fun/*, thisArg*/) {\n\n\t\tif (this === void 0 || this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\t\tif (typeof fun !== 'function') {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (i in t) {\n\t\t\t\tfun.call(thisArg, t[i], i, t);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\n// ES5 [].filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\tif (fun.call(thisArg || void 0, val, i, t)) {\n\t\t\t\ta.push(val);\n\t\t\t}\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.19\n// Reference: http://es5.github.io/#x15.4.4.19\nif (!Array.prototype.map) {\n\n\tArray.prototype.map = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\ta.push(fun.call(thisArg || void 0, val, i, t));\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// ES5 isArray\nif (!Array.isArray) {\n\n\t// Function Array.isArray\n\tArray.isArray = function(o) {\n\t\treturn Object.prototype.toString.call(o) === '[object Array]';\n\t};\n\n}\n\n// Test for location.assign\nif (typeof window === 'object' && typeof window.location === 'object' && !window.location.assign) {\n\n\twindow.location.assign = function(url) {\n\t\twindow.location = url;\n\t};\n\n}\n\n// Test for Function.bind\nif (!Function.prototype.bind) {\n\n\t// MDN\n\t// Polyfill IE8, does not support native Function.bind\n\tFunction.prototype.bind = function(b) {\n\n\t\tif (typeof this !== 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t\t}\n\n\t\tfunction C() {}\n\n\t\tvar a = [].slice;\n\t\tvar f = a.call(arguments, 1);\n\t\tvar _this = this;\n\t\tvar D = function() {\n\t\t\treturn _this.apply(this instanceof C ? this : b || window, f.concat(a.call(arguments)));\n\t\t};\n\n\t\tC.prototype = this.prototype;\n\t\tD.prototype = new C();\n\n\t\treturn D;\n\t};\n\n}\n\n/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nvar hello = function(name) {\n\treturn hello.use(name);\n};\n\nhello.utils = {\n\n\t// Extend the first object with the properties and methods of the second\n\textend: function(r /*, a[, b[, ...]] */) {\n\n\t\t// Get the arguments as an array but ommit the initial item\n\t\tArray.prototype.slice.call(arguments, 1).forEach(function(a) {\n\t\t\tif (Array.isArray(r) && Array.isArray(a)) {\n\t\t\t\tArray.prototype.push.apply(r, a);\n\t\t\t}\n\t\t\telse if (r && (r instanceof Object || typeof r === 'object') && a && (a instanceof Object || typeof a === 'object') && r !== a) {\n\t\t\t\tfor (var x in a) {\n\t\t\t\t\tr[x] = hello.utils.extend(r[x], a[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t// Clone it\n\t\t\t\t\ta = a.slice(0);\n\t\t\t\t}\n\n\t\t\t\tr = a;\n\t\t\t}\n\t\t});\n\n\t\treturn r;\n\t}\n};\n\n// Core library\nhello.utils.extend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: window.location.href.split('#')[0],\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Popup Options\n\t\tpopup: {\n\t\t\tresizable: 1,\n\t\t\tscrollbars: 1,\n\t\t\twidth: 500,\n\t\t\theight: 550\n\t\t},\n\n\t\t// Default scope\n\t\t// Many services require atleast a profile scope,\n\t\t// HelloJS automatially includes the value of provider.scope_map.basic\n\t\t// If that's not required it can be removed via hello.settings.scope.length = 0;\n\t\tscope: ['basic'],\n\n\t\t// Scope Maps\n\t\t// This is the default module scope, these are the defaults which each service is mapped too.\n\t\t// By including them here it prevents the scope from being applied accidentally\n\t\tscope_map: {\n\t\t\tbasic: ''\n\t\t},\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force authentication\n\t\t// When hello.login is fired.\n\t\t// (null): ignore current session expiry and continue with login\n\t\t// (true): ignore current session expiry and continue with login, ask for user to reauthenticate\n\t\t// (false): if the current session looks good for the request scopes return the current session.\n\t\tforce: null,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: window.location.href\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\tutils.extend(this.services, services);\n\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\tutils.extend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Get all the custom options and store to be appended to the querystring\n\t\tvar qs = utils.diffKey(p.options, _this.settings);\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Merge/override options with app defaults\n\t\topts.popup = utils.merge(_this.settings.popup, p.options.popup || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(str) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tvar obj;\n\n\t\t\tif (str) {\n\t\t\t\tobj = JSON.parse(str);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = utils.merge(qs, {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t});\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Ensure this is a string - IE has a problem moving Arrays between windows\n\t\t// Append the setup scope\n\t\tvar SCOPE_SPLIT = /[,\\s]+/;\n\n\t\t// Include default scope settings (cloned).\n\t\tvar scope = _this.settings.scope ? [_this.settings.scope.toString()] : [];\n\n\t\t// Extend the providers scope list with the default\n\t\tvar scopeMap = utils.merge(_this.settings.scope_map, provider.scope || {});\n\n\t\t// Add user defined scopes...\n\t\tif (opts.scope) {\n\t\t\tscope.push(opts.scope.toString());\n\t\t}\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && session.scope instanceof String) {\n\t\t\tscope.push(session.scope);\n\t\t}\n\n\t\t// Join and Split again\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Save the the scopes to the state with the names that they were requested with.\n\t\tp.qs.state.scope = scope.join(',');\n\n\t\t// Map scopes to the providers naming convention\n\t\tscope = scope.map(function(item) {\n\t\t\t// Does this have a mapping?\n\t\t\treturn (item in scopeMap) ? scopeMap[item] : item;\n\t\t});\n\n\t\t// Stringify and Arrayify so that double mapped scopes are given the chance to be formatted\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Again...\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Join with the expected scope delimiter into a string\n\t\tp.qs.scope = scope.join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > ((new Date()).getTime() / 1e3)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n\t\t\t\tvar diff = utils.diff((session.scope || '').split(SCOPE_SPLIT), (p.qs.state.scope || '').split(SCOPE_SPLIT));\n\t\t\t\tif (diff.length === 0) {\n\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Broadcast this event as an auth:init\n\t\temit('auth.init', p);\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url, redirectUri);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.popup);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\n\t\tfunction filterEmpty(s) {return !!s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name:'s', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\t\tp.authResponse = utils.store(p.name);\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && p.authResponse) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, null);\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network:p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback, p);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nhello.utils.extend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\n\t\tif (params) {\n\n\t\t\t// Set default formatting function\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\t// Override the items in the URL which already exist\n\t\t\tfor (var x in params) {\n\t\t\t\tvar str = '([\\\\?\\\\&])' + x + '=[^\\\\&]*';\n\t\t\t\tvar reg = new RegExp(str);\n\t\t\t\tif (url.match(reg)) {\n\t\t\t\t\turl = url.replace(reg, '$1' + x + '=' + formatFunction(params[x]));\n\t\t\t\t\tdelete params[x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEmpty(params)) {\n\t\t\treturn url + (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction);\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (function() {\n\n\t\tvar a = ['localStorage', 'sessionStorage'];\n\t\tvar i = -1;\n\t\tvar prefix = 'test';\n\n\t\t// Set LocalStorage\n\t\tvar localStorage;\n\n\t\twhile (a[++i]) {\n\t\t\ttry {\n\t\t\t\t// In Chrome with cookies blocked, calling localStorage throws an error\n\t\t\t\tlocalStorage = window[a[i]];\n\t\t\t\tlocalStorage.setItem(prefix + i, i);\n\t\t\t\tlocalStorage.removeItem(prefix + i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlocalStorage = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!localStorage) {\n\n\t\t\tvar cache = null;\n\n\t\t\tlocalStorage = {\n\t\t\t\tgetItem: function(prop) {\n\t\t\t\t\tprop = prop + '=';\n\t\t\t\t\tvar m = document.cookie.split(';');\n\t\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\t\tvar _m = m[i].replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\t\t\tif (_m && _m.indexOf(prop) === 0) {\n\t\t\t\t\t\t\treturn _m.substr(prop.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn cache;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(prop, value) {\n\t\t\t\t\tcache = value;\n\t\t\t\t\tdocument.cookie = prop + '=' + value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Fill the cache up\n\t\t\tcache = localStorage.getItem('hello');\n\t\t}\n\n\t\tfunction get() {\n\t\t\tvar json = {};\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(localStorage.getItem('hello')) || {};\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\treturn json;\n\t\t}\n\n\t\tfunction set(json) {\n\t\t\tlocalStorage.setItem('hello', JSON.stringify(json));\n\t\t}\n\n\t\t// Check if the browser support local storage\n\t\treturn function(name, value, days) {\n\n\t\t\t// Local storage\n\t\t\tvar json = get();\n\n\t\t\tif (name && value === undefined) {\n\t\t\t\treturn json[name] || null;\n\t\t\t}\n\t\t\telse if (name && value === null) {\n\t\t\t\ttry {\n\t\t\t\t\tdelete json[name];\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tjson[name] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (name) {\n\t\t\t\tjson[name] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn json;\n\t\t\t}\n\n\t\t\tset(json);\n\n\t\t\treturn json || null;\n\t\t};\n\n\t})(),\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position:'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Recursive merge two objects into one, second parameter overides the first\n\t// @param a array\n\tmerge: function(/* Args: a, b, c, .. n */) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift({});\n\t\treturn this.extend.apply(null, args);\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a.cloneNode(false);\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Get the different hash of properties unique to `a`, and not in `b`\n\tdiffKey: function(a, b) {\n\t\tif (a || !b) {\n\t\t\tvar r = {};\n\t\t\tfor (var x in a) {\n\t\t\t\t// Does the property not exist?\n\t\t\t\tif (!(x in b)) {\n\t\t\t\t\tr[x] = a[x];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t//jscs:disable\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function(){\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING   = 0;                                         /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1;                                         /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED  = 2;                                         /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function (executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id           = \"Thenable/1.0.6\";\n\t\t\tthis.state        = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined;     /*  initial value  */     /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined;     /*  initial reason */     /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled  = [];            /*  initial handlers  */\n\t\t\tthis.onRejected   = [];            /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function (value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject:  function (value) { return deliver(this, STATE_REJECTED,  \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function (onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api();                                    /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\"));             /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected,  next, \"reject\" ));             /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy;                                       /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function (curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state;                                      /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value;                                      /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function (curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\",  curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function (curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = [];                                             /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function () {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value);                                  /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */                     /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function (cb, next, method) {\n\t\t\treturn function (value) {\n\t\t\t\tif (typeof cb !== \"function\")                            /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value);                      /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); }                          /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e);                                  /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result);                               /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */                           /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function (promise, x) {\n\t\t\t/*  sanity check arguments  */                               /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; }                                   /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e);                                   /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */                  /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */                           /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction (y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x)                                 /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */                            /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction (r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true;       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved)                                       /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e);                               /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x);                                          /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t//jscs:enable\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tif (callback.apply(this, arguments)) {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, options) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\n\t\tif (options.height) {\n\t\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\t\t\tvar height = screen.height || window.innerHeight || documentElement.clientHeight;\n\t\t\toptions.top = (options.top) ? options.top : parseInt((height - options.height) / 2, 10) + dualScreenTop;\n\t\t}\n\n\t\tif (options.width) {\n\t\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\t\tvar width = screen.width || window.innerWidth || documentElement.clientWidth;\n\t\t\toptions.left = (options.left) ? options.left : parseInt((width - options.width) / 2, 10) + dualScreenLeft;\n\t\t}\n\n\t\t// Convert options into an array\n\t\tvar optionsArray = [];\n\t\tObject.keys(options).forEach(function(name) {\n\t\t\tvar value = options[name];\n\t\t\toptionsArray.push(name + (value !== null ? '=' + value : ''));\n\t\t});\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\tvar popup = window.open(\n\t\t\turl,\n\t\t\t'_blank',\n\t\t\toptionsArray.join(',')\n\t\t);\n\n\t\tif (popup && popup.focus) {\n\t\t\tpopup.focus();\n\t\t}\n\n\t\treturn popup;\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && p.state && (p.code || p.oauth_token)) {\n\n\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t// Add this path as the redirect_uri\n\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t// Redirect to the host\n\t\t\tvar path = _this.qs(state.oauth_proxy, p);\n\n\t\t\tlocation.assign(path);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\t_this.extend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tvar stateDecoded = decodeURIComponent(p.state);\n\t\t\t\ttry {\n\t\t\t\t\tvar b = JSON.parse(stateDecoded);\n\t\t\t\t\t_this.extend(p, b);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n\n\t\t\t\tif (!p.expires_in || parseInt(p.expires_in, 10) === 0) {\n\t\t\t\t\t// If p.expires_in is unset, set to 0\n\t\t\t\t\tp.expires_in = 0;\n\t\t\t\t}\n\n\t\t\t\tp.expires_in = parseInt(p.expires_in, 10);\n\t\t\t\tp.expires = ((new Date()).getTime() / 1e3) + (p.expires_in || (60 * 60 * 24 * 365));\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tcallback(parent, p.callback)(res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\n\t\t\tlocation.assign(decodeURIComponent(p.oauth_redirect));\n\t\t\treturn;\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\tvar cb = obj.callback;\n\t\t\tvar network = obj.network;\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove from session object\n\t\t\tif (parent && cb && cb in parent) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\ttry {\n\t\t\t\t\tcallback(parent, cb)(str);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction callback(parent, callbackID) {\n\t\t\tif (callbackID.indexOf('_hellojs_') !== 0) {\n\t\t\t\treturn function() {\n\t\t\t\t\tthrow 'Could not execute callback ' + callbackID;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn parent[callbackID];\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\tif (window.frameElement) {\n\t\t\t\t// Inside an iframe, remove from parent\n\t\t\t\tparent.document.body.removeChild(window.frameElement);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close this current window\n\t\t\t\ttry {\n\t\t\t\t\twindow.close();\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\t\twindow.close();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n// Events\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = ((new Date()).getTime() / 1e3);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\tutils.extend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t// Format response\n\t// Whether to run the raw response through post processing.\n\tif (!('formatResponse' in p)) {\n\t\tp.formatResponse = true;\n\t}\n\n\t// Get the current session\n\t// Append the access_token to the query\n\tp.authResponse = _this.getAuthResponse(p.network);\n\tif (p.authResponse && p.authResponse.access_token) {\n\t\tp.query.access_token = p.authResponse.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\tutils.extend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.*?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (p.data && key in p.data) {\n\t\t\t\tval = p.data[key];\n\t\t\t\tdelete p.data[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Is this a raw response?\n\t\t\tif (!p.formatResponse) {\n\t\t\t\t// Bad request? error statusCode or otherwise contains an error response vis JSONP?\n\t\t\t\tif (typeof headers === 'object' ? (headers.statusCode >= 400) : (typeof r === 'object' && 'error' in r)) {\n\t\t\t\t\tpromise.reject(r);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.fulfill(r);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success:true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success:true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = (new Date()).getTime();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nhello.utils.extend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tvar cors = this.request_cors(function() {\n\t\t\t// If it does then run this...\n\t\t\treturn ((p.xhr === undefined) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))));\n\t\t});\n\n\t\tif (cors) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback:p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.authResponse && p.authResponse.oauth && parseInt(p.authResponse.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\t_this.extend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Test whether the browser supports the CORS response\n\trequest_cors: function(callback) {\n\t\treturn 'withCredentials' in new XMLHttpRequest() && callback();\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj) || (typeof FormData === 'function' && obj instanceof FormData)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone.bind(this));\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackID + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\tutils.extend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data:'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n\n// Script to support ChromeApps\n// This overides the hello.utils.popup method to support chrome.identity.launchWebAuthFlow\n// See https://developer.chrome.com/apps/app_identity#non\n\n// Is this a chrome app?\n\nif (typeof chrome === 'object' && typeof chrome.identity === 'object' && chrome.identity.launchWebAuthFlow) {\n\n\t(function() {\n\n\t\t// Swap the popup method\n\t\thello.utils.popup = function(url) {\n\n\t\t\treturn _open(url, true);\n\n\t\t};\n\n\t\t// Swap the hidden iframe method\n\t\thello.utils.iframe = function(url) {\n\n\t\t\t_open(url, false);\n\n\t\t};\n\n\t\t// Swap the request_cors method\n\t\thello.utils.request_cors = function(callback) {\n\n\t\t\tcallback();\n\n\t\t\t// Always run as CORS\n\n\t\t\treturn true;\n\t\t};\n\n\t\t// Swap the storage method\n\t\tvar _cache = {};\n\t\tchrome.storage.local.get('hello', function(r) {\n\t\t\t// Update the cache\n\t\t\t_cache = r.hello || {};\n\t\t});\n\n\t\thello.utils.store = function(name, value) {\n\n\t\t\t// Get all\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn _cache;\n\t\t\t}\n\n\t\t\t// Get\n\t\t\tif (arguments.length === 1) {\n\t\t\t\treturn _cache[name] || null;\n\t\t\t}\n\n\t\t\t// Set\n\t\t\tif (value) {\n\t\t\t\t_cache[name] = value;\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tif (value === null) {\n\t\t\t\tdelete _cache[name];\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t// Open function\n\t\tfunction _open(url, interactive) {\n\n\t\t\t// Launch\n\t\t\tvar ref = {\n\t\t\t\tclosed: false\n\t\t\t};\n\n\t\t\t// Launch the webAuthFlow\n\t\t\tchrome.identity.launchWebAuthFlow({\n\t\t\t\turl: url,\n\t\t\t\tinteractive: interactive\n\t\t\t}, function(responseUrl) {\n\n\t\t\t\t// Did the user cancel this prematurely\n\t\t\t\tif (responseUrl === undefined) {\n\t\t\t\t\tref.closed = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Split appart the URL\n\t\t\t\tvar a = hello.utils.url(responseUrl);\n\n\t\t\t\t// The location can be augmented in to a location object like so...\n\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\tvar _popup = {\n\t\t\t\t\tlocation: {\n\n\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\tassign: function(url) {\n\n\t\t\t\t\t\t\t// If there is a secondary reassign\n\t\t\t\t\t\t\t// In the case of OAuth1\n\t\t\t\t\t\t\t// Trigger this in non-interactive mode.\n\t\t\t\t\t\t\t_open(url, false);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\thref: a.href\n\t\t\t\t\t},\n\t\t\t\t\tclose: function() {}\n\t\t\t\t};\n\n\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t// URL string\n\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\thello.utils.responseHandler(_popup, window);\n\t\t\t});\n\n\t\t\t// Return the reference\n\t\t\treturn ref;\n\t\t}\n\n\t})();\n}\n\n// Phonegap override for hello.phonegap.js\n(function() {\n\n\t// Is this a phonegap implementation?\n\tif (!(/^file:\\/{3}[^\\/]/.test(window.location.href) && window.cordova)) {\n\t\t// Cordova is not included.\n\t\treturn;\n\t}\n\n\t// Augment the hidden iframe method\n\thello.utils.iframe = function(url, redirectUri) {\n\t\thello.utils.popup(url, redirectUri, {hidden: 'yes'});\n\t};\n\n\t// Augment the popup\n\tvar utilPopup = hello.utils.popup;\n\n\t// Replace popup\n\thello.utils.popup = function(url, redirectUri, options) {\n\n\t\t// Run the standard\n\t\tvar popup = utilPopup.call(this, url, redirectUri, options);\n\n\t\t// Create a function for reopening the popup, and assigning events to the new popup object\n\t\t// PhoneGap support\n\t\t// Add an event listener to listen to the change in the popup windows URL\n\t\t// This must appear before popup.focus();\n\t\ttry {\n\t\t\tif (popup && popup.addEventListener) {\n\n\t\t\t\t// Get the origin of the redirect URI\n\n\t\t\t\tvar a = hello.utils.url(redirectUri);\n\t\t\t\tvar redirectUriOrigin = a.origin || (a.protocol + '//' + a.hostname);\n\n\t\t\t\t// Listen to changes in the InAppBrowser window\n\n\t\t\t\tpopup.addEventListener('loadstart', function(e) {\n\n\t\t\t\t\tvar url = e.url;\n\n\t\t\t\t\t// Is this the path, as given by the redirectUri?\n\t\t\t\t\t// Check the new URL agains the redirectUriOrigin.\n\t\t\t\t\t// According to #63 a user could click 'cancel' in some dialog boxes ....\n\t\t\t\t\t// The popup redirects to another page with the same origin, yet we still wish it to close.\n\n\t\t\t\t\tif (url.indexOf(redirectUriOrigin) !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split appart the URL\n\t\t\t\t\tvar a = hello.utils.url(url);\n\n\t\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\t\t// The location can be augmented in to a location object like so...\n\n\t\t\t\t\tvar _popup = {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\t\tassign: function(location) {\n\n\t\t\t\t\t\t\t\t// Unfourtunatly an app is may not change the location of a InAppBrowser window.\n\t\t\t\t\t\t\t\t// So to shim this, just open a new one.\n\t\t\t\t\t\t\t\tpopup.executeScript({code: 'window.location.href = \"' + location + ';\"'});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\t\thref: a.href\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\tif (popup.close) {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tpopup.closed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (_e) {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t\t// URL string\n\t\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\t\thello.utils.responseHandler(_popup, window);\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn popup;\n\t};\n\n})();\n\n(function(hello) {\n\n\t// OAuth1\n\tvar OAuth1Settings = {\n\t\tversion: '1.0',\n\t\tauth: 'https://www.dropbox.com/1/oauth/authorize',\n\t\trequest: 'https://api.dropbox.com/1/oauth/request_token',\n\t\ttoken: 'https://api.dropbox.com/1/oauth/access_token'\n\t};\n\n\t// OAuth2 Settings\n\tvar OAuth2Settings = {\n\t\tversion: 2,\n\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t};\n\n\t// Initiate the Dropbox module\n\thello.init({\n\n\t\tdropbox: {\n\n\t\t\tname: 'Dropbox',\n\n\t\t\toauth: OAuth2Settings,\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// OAuth2 non-standard adjustments\n\t\t\t\tp.qs.scope = '';\n\n\t\t\t\t// Should this be run as OAuth1?\n\t\t\t\t// If the redirect_uri is is HTTP (non-secure) then its required to revert to the OAuth1 endpoints\n\t\t\t\tvar redirect = decodeURIComponent(p.qs.redirect_uri);\n\t\t\t\tif (redirect.indexOf('http:') === 0 && redirect.indexOf('http://localhost/') !== 0) {\n\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth1Settings;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth2Settings;\n\t\t\t\t}\n\n\t\t\t\t// The dropbox login window is a different size\n\t\t\t\tp.options.popup.width = 1000;\n\t\t\t\tp.options.popup.height = 1000;\n\t\t\t},\n\n\t\t\t/*\n\t\t\t\tDropbox does not allow insecure HTTP URI's in the redirect_uri field\n\t\t\t\t...otherwise I'd love to use OAuth2\n\n\t\t\t\tFollow request https://forums.dropbox.com/topic.php?id=106505\n\n\t\t\t\tp.qs.response_type = 'code';\n\t\t\t\toauth: {\n\t\t\t\t\tversion: 2,\n\t\t\t\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\t\t\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t\t\t\t}\n\t\t\t*/\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.dropbox.com/1/',\n\n\t\t\t// Bespoke setting: this is states whether to use the custom environment of Dropbox or to use their own environment\n\t\t\t// Because it's notoriously difficult for Dropbox too provide access from other webservices, this defaults to Sandbox\n\t\t\troot: 'sandbox',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'account/info',\n\n\t\t\t\t// Https://www.dropbox.com/developers/core/docs#metadata\n\t\t\t\t'me/files': req('metadata/auto/@{parent|}'),\n\t\t\t\t'me/folder': req('metadata/auto/@{id}'),\n\t\t\t\t'me/folders': req('metadata/auto/'),\n\n\t\t\t\t'default': function(p, callback) {\n\t\t\t\t\tif (p.path.match('https://api-content.dropbox.com/1/files/')) {\n\t\t\t\t\t\t// This is a file, return binary data\n\t\t\t\t\t\tp.method = 'blob';\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(p.path);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/files': function(p, callback) {\n\n\t\t\t\t\tvar path = p.data.parent;\n\t\t\t\t\tvar fileName = p.data.name;\n\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\tfile: p.data.file\n\t\t\t\t\t};\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('https://api-content.dropbox.com/1/files_put/auto/' + path + '/' + fileName);\n\t\t\t\t},\n\n\t\t\t\t'me/folders': function(p, callback) {\n\n\t\t\t\t\tvar name = p.data.name;\n\t\t\t\t\tp.data = {};\n\n\t\t\t\t\tcallback('fileops/create_folder?root=@{root|sandbox}&' + hello.utils.param({\n\t\t\t\t\t\tpath: name\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'fileops/delete?root=@{root|sandbox}&path=@{id}',\n\t\t\t\t'me/folder': 'fileops/delete?root=@{root|sandbox}&path=@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (!o.uid) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.display_name;\n\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\to.id = o.uid;\n\t\t\t\t\tdelete o.uid;\n\t\t\t\t\tdelete o.display_name;\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o.is_dir && o.contents) {\n\t\t\t\t\t\to.data = o.contents;\n\t\t\t\t\t\tdelete o.contents;\n\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.root = o.root;\n\t\t\t\t\t\t\tformatFile(item, headers, req);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tformatFile(o, headers, req);\n\n\t\t\t\t\tif (o.is_deleted) {\n\t\t\t\t\t\to.success = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Doesn't return the CORS headers\n\t\t\txhr: function(p) {\n\n\t\t\t\t// The proxy supports allow-cross-origin-resource\n\t\t\t\t// Alas that's the only thing we're using.\n\t\t\t\tif (p.data && p.data.file) {\n\t\t\t\t\tvar file = p.data.file;\n\t\t\t\t\tif (file) {\n\t\t\t\t\t\tif (file.files) {\n\t\t\t\t\t\t\tp.data = file.files[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tp.data = file;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (p.method === 'delete') {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tform: function(p, qs) {\n\t\t\t\tdelete qs.state;\n\t\t\t\tdelete qs.redirect_uri;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'error' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: 'server_error',\n\t\t\t\tmessage: o.error.message || o.error\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatFile(o, headers, req) {\n\n\t\tif (typeof o !== 'object' ||\n\t\t\t(typeof Blob !== 'undefined' && o instanceof Blob) ||\n\t\t\t(typeof ArrayBuffer !== 'undefined' && o instanceof ArrayBuffer)) {\n\t\t\t// This is a file, let it through unformatted\n\t\t\treturn;\n\t\t}\n\n\t\tif ('error' in o) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar path = (o.root !== 'app_folder' ? o.root : '') + o.path.replace(/\\&/g, '%26');\n\t\tpath = path.replace(/^\\//, '');\n\t\tif (o.thumb_exists) {\n\t\t\to.thumbnail = req.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/thumbnails/auto/' + path + '?format=jpeg&size=m') + '&access_token=' + req.options.access_token;\n\t\t}\n\n\t\to.type = (o.is_dir ? 'folder' : o.mime_type);\n\t\to.name = o.path.replace(/.*\\//g, '');\n\t\tif (o.is_dir) {\n\t\t\to.files = path.replace(/^\\//, '');\n\t\t}\n\t\telse {\n\t\t\to.downloadLink = hello.settings.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/files/auto/' + path) + '&access_token=' + req.options.access_token;\n\t\t\to.file = 'https://api-content.dropbox.com/1/files/auto/' + path;\n\t\t}\n\n\t\tif (!o.id) {\n\t\t\to.id = o.path.replace(/^\\//, '');\n\t\t}\n\n\t\t// O.media = 'https://api-content.dropbox.com/1/files/' + path;\n\t}\n\n\tfunction req(str) {\n\t\treturn function(p, cb) {\n\t\t\tdelete p.query.limit;\n\t\t\tcb(str);\n\t\t};\n\t}\n\n})(hello);\n\n(function(hello) {\n\t// For APIs, once a version is no longer usable, any calls made to it will be defaulted to the next oldest usable version.\n\t// So we explicitly state it.\n\tvar version = 'v2.9';\n\n\thello.init({\n\n\t\tfacebook: {\n\n\t\t\tname: 'Facebook',\n\n\t\t\t// SEE https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://www.facebook.com/' + version + '/dialog/oauth/',\n\t\t\t\tgrant: 'https://graph.facebook.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'public_profile',\n\t\t\t\temail: 'email',\n\t\t\t\tshare: 'user_posts',\n\t\t\t\tbirthday: 'user_birthday',\n\t\t\t\tevents: 'user_events',\n\t\t\t\tphotos: 'user_photos',\n\t\t\t\tvideos: 'user_videos',\n\t\t\t\tfriends: 'user_friends',\n\t\t\t\tfiles: 'user_photos,user_videos',\n\t\t\t\tpublish_files: 'user_photos,user_videos,publish_actions',\n\t\t\t\tpublish: 'publish_actions',\n\n\t\t\t\t// Deprecated in v2.0\n\t\t\t\t// Create_event\t: 'create_event',\n\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: false,\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.facebook.com/docs/facebook-login/reauthentication\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.auth_type = 'reauthenticate';\n\t\t\t\t}\n\n\t\t\t\t// Set the display value\n\t\t\t\tp.qs.display = p.options.display || 'popup';\n\t\t\t},\n\n\t\t\tlogout: function(callback, options) {\n\t\t\t\t// Assign callback to a global handler\n\t\t\t\tvar callbackID = hello.utils.globalEvent(callback);\n\t\t\t\tvar redirect = encodeURIComponent(hello.settings.redirect_uri + '?' + hello.utils.param({callback:callbackID, result: JSON.stringify({force:true}), state: '{}'}));\n\t\t\t\tvar token = (options.authResponse || {}).access_token;\n\t\t\t\thello.utils.iframe('https://www.facebook.com/logout.php?next=' + redirect + '&access_token=' + token);\n\n\t\t\t\t// Possible responses:\n\t\t\t\t// String URL\t- hello.logout should handle the logout\n\t\t\t\t// Undefined\t- this function will handle the callback\n\t\t\t\t// True - throw a success, this callback isn't handling the callback\n\t\t\t\t// False - throw a error\n\t\t\t\tif (!token) {\n\t\t\t\t\t// If there isn't a token, the above wont return a response, so lets trigger a response\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://graph.facebook.com/' + version + '/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'me?fields=email,first_name,last_name,name,timezone,verified',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/friends',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/like': 'me/likes',\n\t\t\t\t'me/files': 'me/albums',\n\t\t\t\t'me/albums': 'me/albums?fields=cover_photo,name',\n\t\t\t\t'me/album': '@{id}/photos?fields=picture',\n\t\t\t\t'me/photos': 'me/photos',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'friend/albums': '@{id}/albums',\n\t\t\t\t'friend/photos': '@{id}/photos'\n\n\t\t\t\t// Pagination\n\t\t\t\t// Https://developers.facebook.com/docs/reference/api/pagination/\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/photo': '@{id}'\n\n\t\t\t\t// Https://developers.facebook.com/docs/graph-api/reference/v2.2/object/likes/\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/albums': format,\n\t\t\t\t'me/photos': format,\n\t\t\t\t'me/files': format,\n\t\t\t\t'default': format\n\t\t\t},\n\n\t\t\t// Special requirements for handling XHR\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method === 'get' || p.method === 'post') {\n\t\t\t\t\tqs.suppress_response_codes = true;\n\t\t\t\t}\n\n\t\t\t\t// Is this a post with a data-uri?\n\t\t\t\tif (p.method === 'post' && p.data && typeof (p.data.file) === 'string') {\n\t\t\t\t\t// Convert the Data-URI to a Blob\n\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Special requirements for handling JSONP fallback\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tvar m = p.method;\n\t\t\t\tif (m !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = m;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'delete') {\n\t\t\t\t\tqs.method = 'delete';\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Special requirements for iframe form hack\n\t\t\tform: function(p) {\n\t\t\t\treturn {\n\t\t\t\t\t// Fire the callback onload\n\t\t\t\t\tcallbackonload: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tvar base = 'https://graph.facebook.com/';\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = 'https://graph.facebook.com/' + o.id + '/picture';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction format(o, headers, req) {\n\t\tif (typeof o === 'boolean') {\n\t\t\to = {success: o};\n\t\t}\n\n\t\tif (o && 'data' in o) {\n\t\t\tvar token = req.query.access_token;\n\n\t\t\tif (!(o.data instanceof Array)) {\n\t\t\t\tvar data = o.data;\n\t\t\t\tdelete o.data;\n\t\t\t\to.data = [data];\n\t\t\t}\n\n\t\t\to.data.forEach(function(d) {\n\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\td.pictures = (d.images || [])\n\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t});\n\n\t\t\t\tif (d.cover_photo && d.cover_photo.id) {\n\t\t\t\t\td.thumbnail = base + d.cover_photo.id + '/picture?access_token=' + token;\n\t\t\t\t}\n\n\t\t\t\tif (d.type === 'album') {\n\t\t\t\t\td.files = d.photos = base + d.id + '/photos';\n\t\t\t\t}\n\n\t\t\t\tif (d.can_upload) {\n\t\t\t\t\td.upload_location = base + d.id + '/photos';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tflickr: {\n\n\t\t\tname: 'Flickr',\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://www.flickr.com/services/oauth/authorize?perms=read',\n\t\t\t\trequest: 'https://www.flickr.com/services/oauth/request_token',\n\t\t\t\ttoken: 'https://www.flickr.com/services/oauth/access_token'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://api.flickr.com/services/rest',\n\n\t\t\t// Map GET resquests\n\t\t\tget: {\n\t\t\t\tme: sign('flickr.people.getInfo'),\n\t\t\t\t'me/friends': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/following': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/followers': sign('flickr.contacts.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/albums': sign('flickr.photosets.getList', {per_page:'@{limit|50}'}),\n\t\t\t\t'me/album': sign('flickr.photosets.getPhotos', {photoset_id: '@{id}'}),\n\t\t\t\t'me/photos': sign('flickr.people.getPhotos', {per_page:'@{limit|50}'})\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'person');\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\tif (o.realname) {\n\t\t\t\t\t\t\to.name = o.realname._content;\n\t\t\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\to.thumbnail = getBuddyIcon(o, 'l');\n\t\t\t\t\t\to.picture = getBuddyIcon(o, 'l');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'photosets');\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.photoset) {\n\t\t\t\t\t\to.data = o.photoset;\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.name = item.title._content;\n\t\t\t\t\t\t\titem.photos = 'https://api.flickr.com/services/rest' + getApiUrl('flickr.photosets.getPhotos', {photoset_id: item.id}, true);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.photoset;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/photos': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: false,\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tif (p.method == 'get') {\n\t\t\t\t\tdelete qs.callback;\n\t\t\t\t\tqs.jsoncallback = p.callbackID;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getApiUrl(method, extraParams, skipNetwork) {\n\t\tvar url = ((skipNetwork) ? '' : 'flickr:') +\n\t\t\t'?method=' + method +\n\t\t\t'&api_key=' + hello.services.flickr.id +\n\t\t\t'&format=json';\n\t\tfor (var param in extraParams) {\n\t\t\tif (extraParams.hasOwnProperty(param)) {\n\t\t\t\turl += '&' + param + '=' + extraParams[param];\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// This is not exactly neat but avoid to call\n\t// The method 'flickr.test.login' for each api call\n\n\tfunction withUser(cb) {\n\t\tvar auth = hello.getAuthResponse('flickr');\n\t\tcb(auth && auth.user_nsid ? auth.user_nsid : null);\n\t}\n\n\tfunction sign(url, params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn function(p, callback) {\n\t\t\twithUser(function(userId) {\n\t\t\t\tparams.user_id = userId;\n\t\t\t\tcallback(getApiUrl(url, params, true));\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction getBuddyIcon(profile, size) {\n\t\tvar url = 'https://www.flickr.com/images/buddyicon.gif';\n\t\tif (profile.nsid && profile.iconserver && profile.iconfarm) {\n\t\t\turl = 'https://farm' + profile.iconfarm + '.staticflickr.com/' +\n\t\t\t\tprofile.iconserver + '/' +\n\t\t\t\t'buddyicons/' + profile.nsid +\n\t\t\t\t((size) ? '_' + size : '') + '.jpg';\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPhotoUrl(id, farm, server, secret, size) {\n\t\tsize = (size) ? '_' + size : '';\n\t\treturn 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secret + size + '.jpg';\n\t}\n\n\tfunction formatUser(o) {\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o && o.stat && o.stat.toLowerCase() != 'ok') {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatPhotos(o) {\n\t\tif (o.photoset || o.photos) {\n\t\t\tvar set = ('photoset' in o) ? 'photoset' : 'photos';\n\t\t\to = checkResponse(o, set);\n\t\t\tpaging(o);\n\t\t\to.data = o.photo;\n\t\t\tdelete o.photo;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar photo = o.data[i];\n\t\t\t\tphoto.name = photo.title;\n\t\t\t\tphoto.picture = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, '');\n\t\t\t\tphoto.pictures = createPictures(photo.id, photo.farm, photo.server, photo.secret);\n\t\t\t\tphoto.source = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'b');\n\t\t\t\tphoto.thumbnail = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPictures(id, farm, server, secret) {\n\n\t\tvar NO_LIMIT = 2048;\n\t\tvar sizes = [\n\t\t\t{id: 't', max: 100},\n\t\t\t{id: 'm', max: 240},\n\t\t\t{id: 'n', max: 320},\n\t\t\t{id: '', max: 500},\n\t\t\t{id: 'z', max: 640},\n\t\t\t{id: 'c', max: 800},\n\t\t\t{id: 'b', max: 1024},\n\t\t\t{id: 'h', max: 1600},\n\t\t\t{id: 'k', max: 2048},\n\t\t\t{id: 'o', max: NO_LIMIT}\n\t\t];\n\n\t\treturn sizes.map(function(size) {\n\t\t\treturn {\n\t\t\t\tsource: createPhotoUrl(id, farm, server, secret, size.id),\n\n\t\t\t\t// Note: this is a guess that's almost certain to be wrong (unless square source)\n\t\t\t\twidth: size.max,\n\t\t\t\theight: size.max\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction checkResponse(o, key) {\n\n\t\tif (key in o) {\n\t\t\to = o[key];\n\t\t}\n\t\telse if (!('error' in o)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message || 'Failed to get data from Flickr'\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tif (o.contacts) {\n\t\t\to = checkResponse(o, 'contacts');\n\t\t\tpaging(o);\n\t\t\to.data = o.contact;\n\t\t\tdelete o.contact;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar item = o.data[i];\n\t\t\t\titem.id = item.nsid;\n\t\t\t\titem.name = item.realname || item.username;\n\t\t\t\titem.thumbnail = getBuddyIcon(item, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res.page && res.pages && res.page !== res.pages) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?page=' + (++res.page)\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tfoursquare: {\n\n\t\t\tname: 'Foursquare',\n\n\t\t\toauth: {\n\t\t\t\t// See: https://developer.foursquare.com/overview/auth\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://foursquare.com/oauth2/authenticate',\n\t\t\t\tgrant: 'https://foursquare.com/oauth2/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tbase: 'https://api.foursquare.com/v2/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/friends': 'users/self/friends',\n\t\t\t\t'me/followers': 'users/self/friends',\n\t\t\t\t'me/following': 'users/self/friends'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o && o.response) {\n\t\t\t\t\t\to = o.response.user;\n\t\t\t\t\t\tformatUser(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\t// Format friends\n\t\t\t\t\tif (o && 'response' in o && 'friends' in o.response && 'items' in o.response.friends) {\n\t\t\t\t\t\to.data = o.response.friends.items;\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t\tdelete o.response;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o.meta && (o.meta.code === 400 || o.meta.code === 401)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.meta.errorDetail\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o && o.id) {\n\t\t\to.thumbnail = o.photo.prefix + '100x100' + o.photo.suffix;\n\t\t\to.name = o.firstName + ' ' + o.lastName;\n\t\t\to.first_name = o.firstName;\n\t\t\to.last_name = o.lastName;\n\t\t\tif (o.contact) {\n\t\t\t\tif (o.contact.email) {\n\t\t\t\t\to.email = o.contact.email;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs.v = 20121125;\n\t\treturn true;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tgithub: {\n\n\t\t\tname: 'GitHub',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://github.com/login/oauth/authorize',\n\t\t\t\tgrant: 'https://github.com/login/oauth/access_token',\n\t\t\t\tresponse_type: 'code'\n\t\t\t},\n\n\t\t\tscope: {\n\t\t\t\temail: 'user:email'\n\t\t\t},\n\n\t\t\tbase: 'https://api.github.com/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\t'me/friends': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/following': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/followers': 'user/followers?per_page=@{limit|100}',\n\t\t\t\t'me/like': 'user/starred?per_page=@{limit|100}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\n\t\t\t\t\tformatError(o, headers);\n\t\t\t\t\tformatUser(o);\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {data:o};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.data) {\n\t\t\t\t\t\tpaging(o, headers, req);\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method !== 'get' && p.data) {\n\n\t\t\t\t\t// Serialize payload as JSON\n\t\t\t\t\tp.headers = p.headers || {};\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar code = headers ? headers.statusCode : (o && 'meta' in o && 'status' in o.meta && o.meta.status);\n\t\tif ((code === 401 || code === 403)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.message || (o.data ? o.data.message : 'Could not get response')\n\t\t\t};\n\t\t\tdelete o.message;\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = o.avatar_url;\n\t\t\to.name = o.login;\n\t\t}\n\t}\n\n\tfunction paging(res, headers, req) {\n\t\tif (res.data && res.data.length && headers && headers.Link) {\n\t\t\tvar next = headers.Link.match(/<(.*?)>;\\s*rel=\\\"next\\\"/);\n\t\t\tif (next) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: next[1]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar contactsUrl = 'https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}';\n\n\thello.init({\n\n\t\tgoogle: {\n\n\t\t\tname: 'Google Plus',\n\n\t\t\t// See: http://code.google.com/apis/accounts/docs/OAuth2UserAgent.html\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.google.com/o/oauth2/auth',\n\t\t\t\tgrant: 'https://accounts.google.com/o/oauth2/token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'https://www.googleapis.com/auth/plus.me profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: '',\n\t\t\t\tevents: '',\n\t\t\t\tphotos: 'https://picasaweb.google.com/data/',\n\t\t\t\tvideos: 'http://gdata.youtube.com',\n\t\t\t\tfriends: 'https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login',\n\t\t\t\tfiles: 'https://www.googleapis.com/auth/drive.readonly',\n\t\t\t\tpublish: '',\n\t\t\t\tpublish_files: 'https://www.googleapis.com/auth/drive',\n\t\t\t\tshare: '',\n\t\t\t\tcreate_event: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\tif (p.qs.response_type === 'code') {\n\n\t\t\t\t\t// Let's set this to an offline access to return a refresh_token\n\t\t\t\t\tp.qs.access_type = 'offline';\n\t\t\t\t}\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.google.com/identity/protocols/\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.approval_prompt = 'force';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API base URI\n\t\t\tbase: 'https://www.googleapis.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'plus/v1/people/me',\n\n\t\t\t\t// Deprecated Sept 1, 2014\n\t\t\t\t//'me': 'oauth2/v1/userinfo?alt=json',\n\n\t\t\t\t// See: https://developers.google.com/+/api/latest/people/list\n\t\t\t\t'me/friends': 'plus/v1/people/me/people/visible?maxResults=@{limit|100}',\n\t\t\t\t'me/following': contactsUrl,\n\t\t\t\t'me/followers': contactsUrl,\n\t\t\t\t'me/contacts': contactsUrl,\n\t\t\t\t'me/share': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/feed': 'plus/v1/people/me/activities/public?maxResults=@{limit|100}',\n\t\t\t\t'me/albums': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}',\n\t\t\t\t'me/album': function(p, callback) {\n\t\t\t\t\tvar key = p.query.id;\n\t\t\t\t\tdelete p.query.id;\n\t\t\t\t\tcallback(key.replace('/entry/', '/feed/'));\n\t\t\t\t},\n\n\t\t\t\t'me/photos': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/file': 'drive/v2/files/@{id}',\n\t\t\t\t'me/files': 'drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folders': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folder': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\n\t\t\t\t// Google Drive\n\t\t\t\t'me/files': uploadDrive,\n\t\t\t\t'me/folders': function(p, callback) {\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\ttitle: p.data.name,\n\t\t\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t\t\t\t};\n\t\t\t\t\tcallback('drive/v2/files');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map PUT requests\n\t\t\tput: {\n\t\t\t\t'me/files': uploadDrive\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'drive/v2/files/@{id}',\n\t\t\t\t'me/folder': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\t// Map PATCH requests\n\t\t\tpatch: {\n\t\t\t\t'me/file': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\to.last_name = o.family_name || (o.name ? o.name.familyName : null);\n\t\t\t\t\t\to.first_name = o.given_name || (o.name ? o.name.givenName : null);\n\n\t\t\t\t\t\tif (o.emails && o.emails.length) {\n\t\t\t\t\t\t\to.email = o.emails[0].value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tformatPerson(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': function(o) {\n\t\t\t\t\tif (o.items) {\n\t\t\t\t\t\tpaging(o);\n\t\t\t\t\t\to.data = o.items;\n\t\t\t\t\t\to.data.forEach(formatPerson);\n\t\t\t\t\t\tdelete o.items;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/share': formatFeed,\n\t\t\t\t'me/feed': formatFeed,\n\t\t\t\t'me/albums': gEntry,\n\t\t\t\t'me/photos': formatPhotos,\n\t\t\t\t'default': gEntry\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method === 'post' || p.method === 'put') {\n\t\t\t\t\ttoJSON(p);\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'patch') {\n\t\t\t\t\thello.utils.extend(p.query, p.data);\n\t\t\t\t\tp.data = null;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Don't even try submitting via form.\n\t\t\t// This means no POST operations in <=IE9\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction toInt(s) {\n\t\treturn parseInt(s, 10);\n\t}\n\n\tfunction formatFeed(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\t\tdelete o.items;\n\t\treturn o;\n\t}\n\n\t// Format: ensure each record contains a name, id etc.\n\tfunction formatItem(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!o.name) {\n\t\t\to.name = o.title || o.message;\n\t\t}\n\n\t\tif (!o.picture) {\n\t\t\to.picture = o.thumbnailLink;\n\t\t}\n\n\t\tif (!o.thumbnail) {\n\t\t\to.thumbnail = o.thumbnailLink;\n\t\t}\n\n\t\tif (o.mimeType === 'application/vnd.google-apps.folder') {\n\t\t\to.type = 'folder';\n\t\t\to.files = 'https://www.googleapis.com/drive/v2/files?q=%22' + o.id + '%22+in+parents';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatPhotos(o) {\n\t\to.data = o.feed.entry.map(formatEntry);\n\t\tdelete o.feed;\n\t}\n\n\t// Google has a horrible JSON API\n\tfunction gEntry(o) {\n\t\tpaging(o);\n\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\to.data = o.feed.entry.map(formatEntry);\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\t// Old style: Picasa, etc.\n\t\telse if ('entry' in o) {\n\t\t\treturn formatEntry(o.entry);\n\t\t}\n\n\t\t// New style: Google Drive & Plus\n\t\telse if ('items' in o) {\n\t\t\to.data = o.items.map(formatItem);\n\t\t\tdelete o.items;\n\t\t}\n\t\telse {\n\t\t\tformatItem(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatPerson(o) {\n\t\to.name = o.displayName || o.name;\n\t\to.picture = o.picture || (o.image ? o.image.url : null);\n\t\to.thumbnail = o.picture;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tpaging(o);\n\t\tvar r = [];\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tfor (var i = 0; i < o.feed.entry.length; i++) {\n\t\t\t\tvar a = o.feed.entry[i];\n\n\t\t\t\ta.id\t= a.id.$t;\n\t\t\t\ta.name\t= a.title.$t;\n\t\t\t\tdelete a.title;\n\t\t\t\tif (a.gd$email) {\n\t\t\t\t\ta.email\t= (a.gd$email && a.gd$email.length > 0) ? a.gd$email[0].address : null;\n\t\t\t\t\ta.emails = a.gd$email;\n\t\t\t\t\tdelete a.gd$email;\n\t\t\t\t}\n\n\t\t\t\tif (a.updated) {\n\t\t\t\t\ta.updated = a.updated.$t;\n\t\t\t\t}\n\n\t\t\t\tif (a.link) {\n\n\t\t\t\t\tvar pic = (a.link.length > 0) ? a.link[0].href : null;\n\t\t\t\t\tif (pic && a.link[0].gd$etag) {\n\t\t\t\t\t\tpic += (pic.indexOf('?') > -1 ? '&' : '?') + 'access_token=' + token;\n\t\t\t\t\t\ta.picture = pic;\n\t\t\t\t\t\ta.thumbnail = pic;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete a.link;\n\t\t\t\t}\n\n\t\t\t\tif (a.category) {\n\t\t\t\t\tdelete a.category;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.data = o.feed.entry;\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatEntry(a) {\n\n\t\tvar group = a.media$group;\n\t\tvar photo = group.media$content.length ? group.media$content[0] : {};\n\t\tvar mediaContent = group.media$content || [];\n\t\tvar mediaThumbnail = group.media$thumbnail || [];\n\n\t\tvar pictures = mediaContent\n\t\t\t.concat(mediaThumbnail)\n\t\t\t.map(formatImage)\n\t\t\t.sort(function(a, b) {\n\t\t\t\treturn a.width - b.width;\n\t\t\t});\n\n\t\tvar i = 0;\n\t\tvar _a;\n\t\tvar p = {\n\t\t\tid: a.id.$t,\n\t\t\tname: a.title.$t,\n\t\t\tdescription: a.summary.$t,\n\t\t\tupdated_time: a.updated.$t,\n\t\t\tcreated_time: a.published.$t,\n\t\t\tpicture: photo ? photo.url : null,\n\t\t\tpictures: pictures,\n\t\t\timages: [],\n\t\t\tthumbnail: photo ? photo.url : null,\n\t\t\twidth: photo.width,\n\t\t\theight: photo.height\n\t\t};\n\n\t\t// Get feed/children\n\t\tif ('link' in a) {\n\t\t\tfor (i = 0; i < a.link.length; i++) {\n\t\t\t\tvar d = a.link[i];\n\t\t\t\tif (d.rel.match(/\\#feed$/)) {\n\t\t\t\t\tp.upload_location = p.files = p.photos = d.href;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('category' in a && a.category.length) {\n\t\t\t_a = a.category;\n\t\t\tfor (i = 0; i < _a.length; i++) {\n\t\t\t\tif (_a[i].scheme && _a[i].scheme.match(/\\#kind$/)) {\n\t\t\t\t\tp.type = _a[i].term.replace(/^.*?\\#/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('media$thumbnail' in group && group.media$thumbnail.length) {\n\t\t\t_a = group.media$thumbnail;\n\t\t\tp.thumbnail = _a[0].url;\n\t\t\tp.images = _a.map(formatImage);\n\t\t}\n\n\t\t_a = group.media$content;\n\n\t\tif (_a && _a.length) {\n\t\t\tp.images.push(formatImage(_a[0]));\n\t\t}\n\n\t\treturn p;\n\t}\n\n\tfunction paging(res) {\n\n\t\t// Contacts V2\n\t\tif ('feed' in res && res.feed.openSearch$itemsPerPage) {\n\t\t\tvar limit = toInt(res.feed.openSearch$itemsPerPage.$t);\n\t\t\tvar start = toInt(res.feed.openSearch$startIndex.$t);\n\t\t\tvar total = toInt(res.feed.openSearch$totalResults.$t);\n\n\t\t\tif ((start + limit) < total) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: '?start=' + (start + limit)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\telse if ('nextPageToken' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?pageToken=' + res.nextPageToken\n\t\t\t};\n\t\t}\n\t}\n\n\t// Construct a multipart message\n\tfunction Multipart() {\n\n\t\t// Internal body\n\t\tvar body = [];\n\t\tvar boundary = (Math.random() * 1e10).toString(32);\n\t\tvar counter = 0;\n\t\tvar lineBreak = '\\r\\n';\n\t\tvar delim = lineBreak + '--' + boundary;\n\t\tvar ready = function() {};\n\n\t\tvar dataUri = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\n\t\t// Add file\n\t\tfunction addFile(item) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\taddContent(btoa(e.target.result), item.type + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t};\n\n\t\t\tfr.readAsBinaryString(item);\n\t\t}\n\n\t\t// Add content\n\t\tfunction addContent(content, type) {\n\t\t\tbody.push(lineBreak + 'Content-Type: ' + type + lineBreak + lineBreak + content);\n\t\t\tcounter--;\n\t\t\tready();\n\t\t}\n\n\t\t// Add new things to the object\n\t\tthis.append = function(content, type) {\n\n\t\t\t// Does the content have an array\n\t\t\tif (typeof (content) === 'string' || !('length' in Object(content))) {\n\t\t\t\t// Converti to multiples\n\t\t\t\tcontent = [content];\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < content.length; i++) {\n\n\t\t\t\tcounter++;\n\n\t\t\t\tvar item = content[i];\n\n\t\t\t\t// Is this a file?\n\t\t\t\t// Files can be either Blobs or File types\n\t\t\t\tif (\n\t\t\t\t\t(typeof (File) !== 'undefined' && item instanceof File) ||\n\t\t\t\t\t(typeof (Blob) !== 'undefined' && item instanceof Blob)\n\t\t\t\t) {\n\t\t\t\t\t// Read the file in\n\t\t\t\t\taddFile(item);\n\t\t\t\t}\n\n\t\t\t\t// Data-URI?\n\t\t\t\t// Data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\t\t\t\t// /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i\n\t\t\t\telse if (typeof (item) === 'string' && item.match(dataUri)) {\n\t\t\t\t\tvar m = item.match(dataUri);\n\t\t\t\t\taddContent(item.replace(dataUri, ''), m[1] + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t\t}\n\n\t\t\t\t// Regular string\n\t\t\t\telse {\n\t\t\t\t\taddContent(item, type);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onready = function(fn) {\n\t\t\tready = function() {\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Trigger ready\n\t\t\t\t\tbody.unshift('');\n\t\t\t\t\tbody.push('--');\n\t\t\t\t\tfn(body.join(delim), boundary);\n\t\t\t\t\tbody = [];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tready();\n\t\t};\n\t}\n\n\t// Upload to Drive\n\t// If this is PUT then only augment the file uploaded\n\t// PUT https://developers.google.com/drive/v2/reference/files/update\n\t// POST https://developers.google.com/drive/manage-uploads\n\tfunction uploadDrive(p, callback) {\n\n\t\tvar data = {};\n\n\t\t// Test for DOM element\n\t\tif (p.data &&\n\t\t\t(typeof (HTMLInputElement) !== 'undefined' && p.data instanceof HTMLInputElement)\n\t\t) {\n\t\t\tp.data = {file: p.data};\n\t\t}\n\n\t\tif (!p.data.name && Object(Object(p.data.file).files).length && p.method === 'post') {\n\t\t\tp.data.name = p.data.file.files[0].name;\n\t\t}\n\n\t\tif (p.method === 'post') {\n\t\t\tp.data = {\n\t\t\t\ttitle: p.data.name,\n\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\tfile: p.data.file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\t// Make a reference\n\t\t\tdata = p.data;\n\t\t\tp.data = {};\n\n\t\t\t// Add the parts to change as required\n\t\t\tif (data.parent) {\n\t\t\t\tp.data.parents = [{id: p.data.parent || 'root'}];\n\t\t\t}\n\n\t\t\tif (data.file) {\n\t\t\t\tp.data.file = data.file;\n\t\t\t}\n\n\t\t\tif (data.name) {\n\t\t\t\tp.data.title = data.name;\n\t\t\t}\n\t\t}\n\n\t\t// Extract the file, if it exists from the data object\n\t\t// If the File is an INPUT element lets just concern ourselves with the NodeList\n\t\tvar file;\n\t\tif ('file' in p.data) {\n\t\t\tfile = p.data.file;\n\t\t\tdelete p.data.file;\n\n\t\t\tif (typeof (file) === 'object' && 'files' in file) {\n\t\t\t\t// Assign the NodeList\n\t\t\t\tfile = file.files;\n\t\t\t}\n\n\t\t\tif (!file || !file.length) {\n\t\t\t\tcallback({\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: 'request_invalid',\n\t\t\t\t\t\tmessage: 'There were no files attached with this request to upload'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Set type p.data.mimeType = Object(file[0]).type || 'application/octet-stream';\n\n\t\t// Construct a multipart message\n\t\tvar parts = new Multipart();\n\t\tparts.append(JSON.stringify(p.data), 'application/json');\n\n\t\t// Read the file into a  base64 string... yep a hassle, i know\n\t\t// FormData doesn't let us assign our own Multipart headers and HTTP Content-Type\n\t\t// Alas GoogleApi need these in a particular format\n\t\tif (file) {\n\t\t\tparts.append(file);\n\t\t}\n\n\t\tparts.onready(function(body, boundary) {\n\n\t\t\tp.headers['content-type'] = 'multipart/related; boundary=\"' + boundary + '\"';\n\t\t\tp.data = body;\n\n\t\t\tcallback('upload/drive/v2/files' + (data.id ? '/' + data.id : '') + '?uploadType=multipart');\n\t\t});\n\n\t}\n\n\tfunction toJSON(p) {\n\t\tif (typeof (p.data) === 'object') {\n\t\t\t// Convert the POST into a javascript object\n\t\t\ttry {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\tp.headers['content-type'] = 'application/json';\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tinstagram: {\n\n\t\t\tname: 'Instagram',\n\n\t\t\toauth: {\n\t\t\t\t// See: http://instagram.com/developer/authentication/\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://instagram.com/oauth/authorize/',\n\t\t\t\tgrant: 'https://api.instagram.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'basic',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'relationships',\n\t\t\t\tpublish: 'likes comments',\n\t\t\t\temail: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.instagram.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/feed': 'users/self/feed?count=@{limit|100}',\n\t\t\t\t'me/photos': 'users/self/media/recent?min_id=0&count=@{limit|100}',\n\t\t\t\t'me/friends': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/following': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/followers': 'users/self/followed-by?count=@{limit|100}',\n\t\t\t\t'friend/photos': 'users/@{id}/media/recent?min_id=0&count=@{limit|100}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('media/' + id + '/likes');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'me/like': 'media/@{id}/likes'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.id = o.data.id;\n\t\t\t\t\t\to.thumbnail = o.data.profile_picture;\n\t\t\t\t\t\to.name = o.data.full_name || o.data.username;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/photos': function(o) {\n\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.data = o.data.filter(function(d) {\n\t\t\t\t\t\t\treturn d.type === 'image';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\to.data.forEach(function(d) {\n\t\t\t\t\t\t\td.name = d.caption ? d.caption.text : null;\n\t\t\t\t\t\t\td.thumbnail = d.images.thumbnail.url;\n\t\t\t\t\t\t\td.picture = d.images.standard_resolution.url;\n\t\t\t\t\t\t\td.pictures = Object.keys(d.images)\n\t\t\t\t\t\t\t\t.map(function(key) {\n\t\t\t\t\t\t\t\t\tvar image = d.images[key];\n\t\t\t\t\t\t\t\t\treturn formatImage(image);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\to = formatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Instagram does not return any CORS Headers\n\t\t\t// So besides JSONP we're stuck with proxy\n\t\t\txhr: function(p, qs) {\n\n\t\t\t\tvar method = p.method;\n\t\t\t\tvar proxy = method !== 'get';\n\n\t\t\t\tif (proxy) {\n\n\t\t\t\t\tif ((method === 'post' || method === 'put') && p.query.access_token) {\n\t\t\t\t\t\tp.data.access_token = p.query.access_token;\n\t\t\t\t\t\tdelete p.query.access_token;\n\t\t\t\t\t}\n\n\t\t\t\t\t// No access control headers\n\t\t\t\t\t// Use the proxy instead\n\t\t\t\t\tp.proxy = proxy;\n\t\t\t\t}\n\n\t\t\t\treturn proxy;\n\t\t\t},\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatError(o) {\n\t\tif (typeof o === 'string') {\n\t\t\treturn {\n\t\t\t\terror: {\n\t\t\t\t\tcode: 'invalid_request',\n\t\t\t\t\tmessage: o\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tpaging(o);\n\t\tif (o && 'data' in o) {\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.profile_picture;\n\t\t\to.name = o.full_name || o.username;\n\t\t}\n\t}\n\n\t// See: http://instagram.com/developer/endpoints/\n\tfunction paging(res) {\n\t\tif ('pagination' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.pagination.next_url\n\t\t\t};\n\t\t\tdelete res.pagination;\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tjoinme: {\n\n\t\t\tname: 'join.me',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://secure.join.me/api/public/v1/auth/oauth2',\n\t\t\t\tgrant: 'https://secure.join.me/api/public/v1/auth/oauth2'\n\t\t\t},\n\n\t\t\trefresh: false,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'user_info',\n\t\t\t\tuser: 'user_info',\n\t\t\t\tscheduler: 'scheduler',\n\t\t\t\tstart: 'start_meeting',\n\t\t\t\temail: '',\n\t\t\t\tfriends: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.options.popup.width = 400;\n\t\t\t\tp.options.popup.height = 700;\n\t\t\t},\n\n\t\t\tbase: 'https://api.join.me/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\tmeetings: 'meetings',\n\t\t\t\t'meetings/info': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'meetings/start/adhoc': function(p, callback) {\n\t\t\t\t\tcallback('meetings/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/start/scheduled': function(p, callback) {\n\t\t\t\t\tvar meetingId = p.data.meetingId;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('meetings/' + meetingId + '/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/schedule': function(p, callback) {\n\t\t\t\t\tcallback('meetings');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpatch: {\n\t\t\t\t'meetings/update': function(p, callback) {\n\t\t\t\t\tcallback('meetings/' + p.data.meetingId);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'meetings/delete': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (!o.email) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.fullName;\n\t\t\t\t\to.first_name = o.name.split(' ')[0];\n\t\t\t\t\to.last_name = o.name.split(' ')[1];\n\t\t\t\t\to.id = o.email;\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest\n\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar errorCode;\n\t\tvar message;\n\t\tvar details;\n\n\t\tif (o && ('Message' in o)) {\n\t\t\tmessage = o.Message;\n\t\t\tdelete o.Message;\n\n\t\t\tif ('ErrorCode' in o) {\n\t\t\t\terrorCode = o.ErrorCode;\n\t\t\t\tdelete o.ErrorCode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\terrorCode = getErrorCode(headers);\n\t\t\t}\n\n\t\t\to.error = {\n\t\t\t\tcode: errorCode,\n\t\t\t\tmessage: message,\n\t\t\t\tdetails: o\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\t// Move the access token from the request body to the request header\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\t// Format non-get requests to indicate json body\n\t\tif (p.method !== 'get' && p.data) {\n\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t}\n\t\t}\n\n\t\tif (p.method === 'put') {\n\t\t\tp.method = 'patch';\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction getErrorCode(headers) {\n\t\tswitch (headers.statusCode) {\n\t\t\tcase 400:\n\t\t\t\treturn 'invalid_request';\n\t\t\tcase 403:\n\t\t\t\treturn 'stale_token';\n\t\t\tcase 401:\n\t\t\t\treturn 'invalid_token';\n\t\t\tcase 500:\n\t\t\t\treturn 'server_error';\n\t\t\tdefault:\n\t\t\t\treturn 'server_error';\n\t\t}\n\t}\n\n}(hello));\n\n(function(hello) {\n\n\thello.init({\n\n\t\tlinkedin: {\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tresponse_type: 'code',\n\t\t\t\tauth: 'https://www.linkedin.com/uas/oauth2/authorization',\n\t\t\t\tgrant: 'https://www.linkedin.com/uas/oauth2/accessToken'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'r_basicprofile',\n\t\t\t\temail: 'r_emailaddress',\n\t\t\t\tfiles: '',\n\t\t\t\tfriends: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish: 'w_share',\n\t\t\t\tpublish_files: 'w_share',\n\t\t\t\tshare: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.linkedin.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)',\n\n\t\t\t\t// See: http://developer.linkedin.com/documents/get-network-updates-and-statistics-api\n\t\t\t\t'me/share': 'people/~/network/updates?count=@{limit|250}'\n\t\t\t},\n\n\t\t\tpost: {\n\n\t\t\t\t// See: https://developer.linkedin.com/documents/api-requests-json\n\t\t\t\t'me/share': function(p, callback) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tvisibility: {\n\t\t\t\t\t\t\tcode: 'anyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (p.data.id) {\n\n\t\t\t\t\t\tdata.attribution = {\n\t\t\t\t\t\t\tshare: {\n\t\t\t\t\t\t\t\tid: p.data.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdata.comment = p.data.message;\n\t\t\t\t\t\tif (p.data.picture && p.data.link) {\n\t\t\t\t\t\t\tdata.content = {\n\t\t\t\t\t\t\t\t'submitted-url': p.data.link,\n\t\t\t\t\t\t\t\t'submitted-image-url': p.data.picture\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tp.data = JSON.stringify(data);\n\n\t\t\t\t\tcallback('people/~/shares?format=json');\n\t\t\t\t},\n\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\tdel:{\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/share': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.values) {\n\t\t\t\t\t\to.data = o.values.map(formatUser);\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.message = item.headline;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.values;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tempty(o, headers);\n\t\t\t\t\tpaging(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tformatQuery(qs);\n\t\t\t\tif (p.method === 'get') {\n\t\t\t\t\tqs.format = 'jsonp';\n\t\t\t\t\tqs['error-callback'] = p.callbackID;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method !== 'get') {\n\t\t\t\t\tformatQuery(qs);\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\n\t\t\t\t\t// Note: x-li-format ensures error responses are not returned in XML\n\t\t\t\t\tp.headers['x-li-format'] = 'json';\n\t\t\t\t\tp.proxy = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'errorCode' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: o.status,\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\to.first_name = o.firstName;\n\t\to.last_name = o.lastName;\n\t\to.name = o.formattedName || (o.first_name + ' ' + o.last_name);\n\t\to.thumbnail = o.pictureUrl;\n\t\to.email = o.emailAddress;\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.values) {\n\t\t\to.data = o.values.map(formatUser);\n\t\t\tdelete o.values;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif ('_count' in res && '_start' in res && (res._count + res._start) < res._total) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res._start + res._count) + '&count=' + res._count\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction empty(o, headers) {\n\t\tif (JSON.stringify(o) === '{}' && headers.statusCode === 200) {\n\t\t\to.success = true;\n\t\t}\n\t}\n\n\tfunction formatQuery(qs) {\n\t\t// LinkedIn signs requests with the parameter 'oauth2_access_token'\n\t\t// ... yeah another one who thinks they should be different!\n\t\tif (qs.access_token) {\n\t\t\tqs.oauth2_access_token = qs.access_token;\n\t\t\tdelete qs.access_token;\n\t\t}\n\t}\n\n\tfunction like(p, callback) {\n\t\tp.headers['x-li-format'] = 'json';\n\t\tvar id = p.data.id;\n\t\tp.data = (p.method !== 'delete').toString();\n\t\tp.method = 'put';\n\t\tcallback('people/~/network/updates/key=' + id + '/is-liked');\n\t}\n\n})(hello);\n\n// See: https://developers.soundcloud.com/docs/api/reference\n(function(hello) {\n\n\thello.init({\n\n\t\tsoundcloud: {\n\t\t\tname: 'SoundCloud',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://soundcloud.com/connect',\n\t\t\t\tgrant: 'https://soundcloud.com/oauth2/token'\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.soundcloud.com/',\n\t\t\tget: {\n\t\t\t\tme: 'me.json',\n\n\t\t\t\t// Http://developers.soundcloud.com/docs/api/reference#me\n\t\t\t\t'me/friends': 'me/followings.json',\n\t\t\t\t'me/followers': 'me/followers.json',\n\t\t\t\t'me/following': 'me/followings.json',\n\n\t\t\t\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\t\t\t\t'default': function(p, callback) {\n\n\t\t\t\t\t// Include '.json at the end of each request'\n\t\t\t\t\tcallback(p.path + '.json');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {\n\t\t\t\t\t\t\tdata: o.map(formatUser)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatRequest(p, qs) {\n\t\t// Alter the querystring\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs['_status_code_map[302]'] = 200;\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.picture = o.avatar_url;\n\t\t\to.thumbnail = o.avatar_url;\n\t\t\to.name = o.username || o.full_name;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\tfunction paging(res) {\n\t\tif ('next_href' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next_href\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n// See: https://developer.spotify.com/web-api/\n(function(hello) {\n\n\thello.init({\n\n\t\tspotify: {\n\t\t\tname: 'Spotify',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.spotify.com/authorize',\n\t\t\t\tgrant: 'https://accounts.spotify.com/api/token'\n\t\t\t},\n\n\t\t\t// See: https://developer.spotify.com/web-api/using-scopes/\n\t\t\tscope_delim: ' ',\n\t\t\tscope: {\n\t\t\t\tbasic: '',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'user-follow-read',\n\t\t\t\tpublish: 'user-library-read',\n\t\t\t\temail: 'user-read-email',\n\t\t\t\tshare: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.spotify.com',\n\n\t\t\t// See: https://developer.spotify.com/web-api/endpoint-reference/\n\t\t\tget: {\n\t\t\t\tme: '/v1/me',\n\t\t\t\t'me/following': '/v1/me/following?type=artist', // Only 'artist' is supported\n\n\t\t\t\t// Because tracks, albums and playlist exist on spotify, the tracks are considered\n\t\t\t\t// the resource for the 'me/likes' endpoint\n\t\t\t\t'me/like': '/v1/me/tracks'\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/following': formatFollowees,\n\t\t\t\t'me/like': formatTracks\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: false\n\t\t}\n\t});\n\n\t// Move the access token from the request body to the request header\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.name = o.display_name;\n\t\t\to.thumbnail = o.images.length ? o.images[0].url : null;\n\t\t\to.picture = o.thumbnail;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFollowees(o) {\n\t\tpaging(o);\n\t\tif (o && 'artists' in o) {\n\t\t\to.data = o.artists.items.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatTracks(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res && 'next' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next\n\t\t\t};\n\t\t\tdelete res.next;\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\tvar base = 'https://api.twitter.com/';\n\n\thello.init({\n\n\t\ttwitter: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: base + 'oauth/authenticate',\n\t\t\t\trequest: base + 'oauth/request_token',\n\t\t\t\ttoken: base + 'oauth/access_token'\n\t\t\t},\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://dev.twitter.com/oauth/reference/get/oauth/authenticate\n\t\t\t\tvar prefix = '?force_login=true';\n\t\t\t\tthis.oauth.auth = this.oauth.auth.replace(prefix, '') + (p.options.force ? prefix : '');\n\t\t\t},\n\n\t\t\tbase: base + '1.1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'account/verify_credentials.json',\n\t\t\t\t'me/friends': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/following': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/followers': 'followers/list.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline\n\t\t\t\t'me/share': 'statuses/user_timeline.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/rest/reference/get/favorites/list\n\t\t\t\t'me/like': 'favorites/list.json?count=@{limit|200}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/share': function(p, callback) {\n\n\t\t\t\t\tvar data = p.data;\n\t\t\t\t\tp.data = null;\n\n\t\t\t\t\tvar status = [];\n\n\t\t\t\t\t// Change message to status\n\t\t\t\t\tif (data.message) {\n\t\t\t\t\t\tstatus.push(data.message);\n\t\t\t\t\t\tdelete data.message;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If link is given\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tstatus.push(data.link);\n\t\t\t\t\t\tdelete data.link;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.picture) {\n\t\t\t\t\t\tstatus.push(data.picture);\n\t\t\t\t\t\tdelete data.picture;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Compound all the components\n\t\t\t\t\tif (status.length) {\n\t\t\t\t\t\tdata.status = status.join(' ');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet media\n\t\t\t\t\tif (data.file) {\n\t\t\t\t\t\tdata['media[]'] = data.file;\n\t\t\t\t\t\tdelete data.file;\n\t\t\t\t\t\tp.data = data;\n\t\t\t\t\t\tcallback('statuses/update_with_media.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Retweet?\n\t\t\t\t\telse if ('id' in data) {\n\t\t\t\t\t\tcallback('statuses/retweet/' + data.id + '.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Assign the post body to the query parameters\n\t\t\t\t\t\thello.utils.extend(p.query, data);\n\t\t\t\t\t\tcallback('statuses/update.json?include_entities=1');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/create\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/create.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/destroy\n\t\t\t\t'me/like': function() {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/destroy.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tformatUser(res);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\n\t\t\t\t'me/share': function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\tif (!res.error && 'length' in res) {\n\t\t\t\t\t\treturn {data: res};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'default': function(res) {\n\t\t\t\t\tres = arrayToDataResponse(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t},\n\t\t\txhr: function(p) {\n\n\t\t\t\t// Rely on the proxy for non-GET requests.\n\t\t\t\treturn (p.method !== 'get');\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\tif (o.name) {\n\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\to.first_name = m.shift();\n\t\t\t\to.last_name = m.join(' ');\n\t\t\t}\n\n\t\t\t// See: https://dev.twitter.com/overview/general/user-profile-images-and-banners\n\t\t\to.thumbnail = o.profile_image_url_https || o.profile_image_url;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.users) {\n\t\t\to.data = o.users.map(formatUser);\n\t\t\tdelete o.users;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o.errors) {\n\t\t\tvar e = o.errors[0];\n\t\t\to.error = {\n\t\t\t\tcode: 'request_failed',\n\t\t\t\tmessage: e.message\n\t\t\t};\n\t\t}\n\t}\n\n\t// Take a cursor and add it to the path\n\tfunction paging(res) {\n\t\t// Does the response include a 'next_cursor_string'\n\t\tif ('next_cursor_str' in res) {\n\t\t\t// See: https://dev.twitter.com/docs/misc/cursoring\n\t\t\tres.paging = {\n\t\t\t\tnext: '?cursor=' + res.next_cursor_str\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction arrayToDataResponse(res) {\n\t\treturn Array.isArray(res) ? {data: res} : res;\n\t}\n\n\t/**\n\t// The documentation says to define user in the request\n\t// Although its not actually required.\n\n\tvar user_id;\n\n\tfunction withUserId(callback){\n\t\tif(user_id){\n\t\t\tcallback(user_id);\n\t\t}\n\t\telse{\n\t\t\thello.api('twitter:/me', function(o){\n\t\t\t\tuser_id = o.id;\n\t\t\t\tcallback(o.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction sign(url){\n\t\treturn function(p, callback){\n\t\t\twithUserId(function(user_id){\n\t\t\t\tcallback(url+'?user_id='+user_id);\n\t\t\t});\n\t\t};\n\t}\n\t*/\n\n})(hello);\n\n// Vkontakte (vk.com)\n(function(hello) {\n\n\thello.init({\n\n\t\tvk: {\n\t\t\tname: 'Vk',\n\n\t\t\t// See https://vk.com/dev/oauth_dialog\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://oauth.vk.com/authorize',\n\t\t\t\tgrant: 'https://oauth.vk.com/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\t// See https://vk.com/dev/permissions\n\t\t\tscope: {\n\t\t\t\temail: 'email',\n\t\t\t\tfriends: 'friends',\n\t\t\t\tphotos: 'photos',\n\t\t\t\tvideos: 'video',\n\t\t\t\tshare: 'share',\n\t\t\t\toffline_access: 'offline'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.qs.display = window.navigator &&\n\t\t\t\t\twindow.navigator.userAgent &&\n\t\t\t\t\t/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase()) ? 'mobile' : 'popup';\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.vk.com/method/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: function(p, callback) {\n\t\t\t\t\tp.query.fields = 'id,first_name,last_name,photo_max';\n\t\t\t\t\tcallback('users.get');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res, headers, req) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\treturn formatUser(res, req);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// No XHR\n\t\t\txhr: false,\n\n\t\t\t// All requests should be JSONP as of missing CORS headers in https://api.vk.com/method/*\n\t\t\tjsonp: true,\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatUser(o, req) {\n\n\t\tif (o !== null && 'response' in o && o.response !== null && o.response.length) {\n\t\t\to = o.response[0];\n\t\t\to.id = o.uid;\n\t\t\to.thumbnail = o.picture = o.photo_max;\n\t\t\to.name = o.first_name + ' ' + o.last_name;\n\n\t\t\tif (req.authResponse && req.authResponse.email !== null)\n\t\t\t\to.email = req.authResponse.email;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\n\t\tif (o.error) {\n\t\t\tvar e = o.error;\n\t\t\to.error = {\n\t\t\t\tcode: e.error_code,\n\t\t\t\tmessage: e.error_msg\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\t\twindows: {\n\t\t\tname: 'Windows live',\n\n\t\t\t// REF: http://msdn.microsoft.com/en-us/library/hh243641.aspx\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://login.live.com/oauth20_authorize.srf',\n\t\t\t\tgrant: 'https://login.live.com/oauth20_token.srf'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tlogout: function() {\n\t\t\t\treturn 'http://login.live.com/oauth20_logout.srf?ts=' + (new Date()).getTime();\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'wl.signin,wl.basic',\n\t\t\t\temail: 'wl.emails',\n\t\t\t\tbirthday: 'wl.birthday',\n\t\t\t\tevents: 'wl.calendars',\n\t\t\t\tphotos: 'wl.photos',\n\t\t\t\tvideos: 'wl.photos',\n\t\t\t\tfriends: 'wl.contacts_emails',\n\t\t\t\tfiles: 'wl.skydrive',\n\t\t\t\tpublish: 'wl.share',\n\t\t\t\tpublish_files: 'wl.skydrive_update',\n\t\t\t\tshare: 'wl.share',\n\t\t\t\tcreate_event: 'wl.calendars_update,wl.events_create',\n\t\t\t\toffline_access: 'wl.offline_access'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://apis.live.net/v5.0/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\n\t\t\t\t// Friends\n\t\t\t\tme: 'me',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/contacts',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/contacts': 'me/contacts',\n\n\t\t\t\t'me/albums': 'me/albums',\n\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}/files',\n\t\t\t\t'me/photo': '@{id}',\n\n\t\t\t\t// Files\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files',\n\t\t\t\t'me/folders': '@{id|me/skydrive}/files',\n\t\t\t\t'me/folder': '@{id|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/albums': 'me/albums',\n\t\t\t\t'me/album': '@{id}/files/',\n\n\t\t\t\t'me/folders': '@{id|me/skydrive/}',\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'me/folder': '@{id}',\n\t\t\t\t'me/files': '@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': formatAlbums,\n\t\t\t\t'me/photos': formatDefault,\n\t\t\t\t'default': formatDefault\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\t\t\t\tif (p.method !== 'get' && p.method !== 'delete' && !hello.utils.hasBinary(p.data)) {\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t\tp.headers = {\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tjsonp: function(p) {\n\t\t\t\tif (p.method !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = p.method;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatDefault(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\tif (d.images) {\n\t\t\t\t\td.pictures = d.images\n\t\t\t\t\t\t.map(formatImage)\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\twidth: image.width,\n\t\t\theight: image.height,\n\t\t\tsource: image.source\n\t\t};\n\t}\n\n\tfunction formatAlbums(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\td.photos = d.files = 'https://apis.live.net/v5.0/' + d.id + '/photos';\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatUser(o, headers, req) {\n\t\tif (o.id) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tif (o.emails) {\n\t\t\t\to.email = o.emails.preferred;\n\t\t\t}\n\n\t\t\t// If this is not an non-network friend\n\t\t\tif (o.is_friend !== false) {\n\t\t\t\t// Use the id of the user_id if available\n\t\t\t\tvar id = (o.user_id || o.id);\n\t\t\t\to.thumbnail = o.picture = 'https://apis.live.net/v5.0/' + id + '/picture?access_token=' + token;\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tformatUser(d, headers, req);\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n\n(function(hello) {\n\n\thello.init({\n\n\t\tyahoo: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://api.login.yahoo.com/oauth/v2/request_auth',\n\t\t\t\trequest: 'https://api.login.yahoo.com/oauth/v2/get_request_token',\n\t\t\t\ttoken: 'https://api.login.yahoo.com/oauth/v2/get_token'\n\t\t\t},\n\n\t\t\t// Login handler\n\t\t\tlogin: function(p) {\n\t\t\t\t// Change the default popup window to be at least 560\n\t\t\t\t// Yahoo does dynamically change it on the fly for the signin screen (only, what if your already signed in)\n\t\t\t\tp.options.popup.width = 560;\n\n\t\t\t\t// Yahoo throws an parameter error if for whatever reason the state.scope contains a comma, so lets remove scope\n\t\t\t\ttry {delete p.qs.state.scope;}\n\t\t\t\tcatch (e) {}\n\t\t\t},\n\n\t\t\tbase: 'https://social.yahooapis.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: yql('select * from social.profile(0) where guid=me'),\n\t\t\t\t'me/friends': yql('select * from social.contacts(0) where guid=me'),\n\t\t\t\t'me/following': yql('select * from social.contacts(0) where guid=me')\n\t\t\t},\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t// Can't get IDs\n\t\t\t\t// It might be better to loop through the social.relationship table with has unique IDs of users.\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'default': paging\n\t\t\t}\n\t\t}\n\t});\n\n\t/*\n\t\t// Auto-refresh fix: bug in Yahoo can't get this to work with node-oauth-shim\n\t\tlogin : function(o){\n\t\t\t// Is the user already logged in\n\t\t\tvar auth = hello('yahoo').getAuthResponse();\n\n\t\t\t// Is this a refresh token?\n\t\t\tif(o.options.display==='none'&&auth&&auth.access_token&&auth.refresh_token){\n\t\t\t\t// Add the old token and the refresh token, including path to the query\n\t\t\t\t// See http://developer.yahoo.com/oauth/guide/oauth-refreshaccesstoken.html\n\t\t\t\to.qs.access_token = auth.access_token;\n\t\t\t\to.qs.refresh_token = auth.refresh_token;\n\t\t\t\to.qs.token_url = 'https://api.login.yahoo.com/oauth/v2/get_token';\n\t\t\t}\n\t\t},\n\t*/\n\n\tfunction formatError(o) {\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\n\t\tformatError(o);\n\t\tif (o.query && o.query.results && o.query.results.profile) {\n\t\t\to = o.query.results.profile;\n\t\t\to.id = o.guid;\n\t\t\to.last_name = o.familyName;\n\t\t\to.first_name = o.givenName || o.nickname;\n\t\t\tvar a = [];\n\t\t\tif (o.first_name) {\n\t\t\t\ta.push(o.first_name);\n\t\t\t}\n\n\t\t\tif (o.last_name) {\n\t\t\t\ta.push(o.last_name);\n\t\t\t}\n\n\t\t\to.name = a.join(' ');\n\t\t\to.email = (o.emails && o.emails[0]) ? o.emails[0].handle : null;\n\t\t\to.thumbnail = o.image ? o.image.imageUrl : null;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, request) {\n\t\tformatError(o);\n\t\tpaging(o, headers, request);\n\t\tvar contact;\n\t\tvar field;\n\t\tif (o.query && o.query.results && o.query.results.contact) {\n\t\t\to.data = o.query.results.contact;\n\t\t\tdelete o.query;\n\n\t\t\tif (!Array.isArray(o.data)) {\n\t\t\t\to.data = [o.data];\n\t\t\t}\n\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(contact) {\n\t\tcontact.id = null;\n\n\t\t// #362: Reports of responses returning a single item, rather than an Array of items.\n\t\t// Format the contact.fields to be an array.\n\t\tif (contact.fields && !(contact.fields instanceof Array)) {\n\t\t\tcontact.fields = [contact.fields];\n\t\t}\n\n\t\t(contact.fields || []).forEach(function(field) {\n\t\t\tif (field.type === 'email') {\n\t\t\t\tcontact.email = field.value;\n\t\t\t}\n\n\t\t\tif (field.type === 'name') {\n\t\t\t\tcontact.first_name = field.value.givenName;\n\t\t\t\tcontact.last_name = field.value.familyName;\n\t\t\t\tcontact.name = field.value.givenName + ' ' + field.value.familyName;\n\t\t\t}\n\n\t\t\tif (field.type === 'yahooid') {\n\t\t\t\tcontact.id = field.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction paging(res, headers, request) {\n\n\t\t// See: http://developer.yahoo.com/yql/guide/paging.html#local_limits\n\t\tif (res.query && res.query.count && request.options) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res.query.count + (+request.options.start || 1))\n\t\t\t};\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tfunction yql(q) {\n\t\treturn 'https://query.yahooapis.com/v1/yql?q=' + (q + ' limit @{limit|100} offset @{start|0}').replace(/\\s/g, '%20') + '&format=json';\n\t}\n\n})(hello);\n\n// Register as anonymous AMD module\nif (true) {\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {\n\t\treturn hello;\n\t}).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}\n\n// CommonJS module for browserify\nif (typeof module === 'object' && module.exports) {\n\tmodule.exports = hello;\n}\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3), __webpack_require__(4).setImmediate))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaGVsbG9qcy9kaXN0L2hlbGxvLmFsbC5qcz9hMGRkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI2REFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGlCQUFpQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQiwwQ0FBMEM7O0FBRWhFO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLG9FQUFvRTs7QUFFcEU7QUFDQSxzRUFBc0U7O0FBRXRFO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDJFQUEyRTs7QUFFM0U7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSw4QkFBOEI7O0FBRTlCLDJCQUEyQjtBQUMzQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHNCQUFzQixzQ0FBc0M7O0FBRTVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLGVBQWUsWUFBWTtBQUNsRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYztBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGtCQUFrQiw4RUFBOEU7QUFDekgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCOztBQUVoQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFdBQVc7O0FBRXJDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUIsMEJBQTBCO0FBQzFCLDBCQUEwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLGlDQUFpQztBQUNqQyxpQ0FBaUM7QUFDakMsMEJBQTBCO0FBQzFCLDBCQUEwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDhEQUE4RCxFQUFFO0FBQzlGLDhCQUE4Qiw4REFBOEQsRUFBRTs7QUFFOUY7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0EsbUJBQW1CLHFCQUFxQjtBQUN4Qyx3QkFBd0I7QUFDeEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0EsVUFBVSxvQkFBb0IsRUFBRTtBQUNoQztBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZUFBZSxFQUFFO0FBQzFCO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaUJBQWlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0EsNEJBQTRCLGlCQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsa0NBQWtDOztBQUVsQzs7QUFFQSxvQkFBb0IsOEJBQThCOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLG9DQUFvQzs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4QkFBOEI7O0FBRXREO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUIsNEVBQTRFOztBQUVqRztBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjs7QUFFbEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUIsc0JBQXNCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9DQUFvQyxhQUFhO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxzQkFBc0I7O0FBRXpEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsOEZBQThGO0FBQzlGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFO0FBQ3JFLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYywwQkFBMEI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYywwQkFBMEI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsbUJBQW1CO0FBQ3BDO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjLDBCQUEwQjs7QUFFeEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixnQ0FBZ0M7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLHdCQUF3QixNQUFNLFdBQVcsU0FBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBOztBQUVBLDRDQUE0QyxXQUFXO0FBQ3ZEOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGtCQUFrQixxQkFBcUI7O0FBRXZDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQiwrREFBK0Q7O0FBRXJGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGNBQWM7QUFDNUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsY0FBYztBQUM1QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUEsRUFBRTtBQUNGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsRUFBRTtBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVDQUF1QyxjQUFjO0FBQ3JEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZCQUE2QixnREFBZ0QsR0FBRztBQUNoRixRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUNBQXFDLFFBQVE7QUFDN0Msc0NBQXNDLEdBQUc7QUFDekM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBOztBQUVBLDRDQUE0QyxhQUFhO0FBQ3pEO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsdUNBQXVDLGFBQWEsUUFBUSxHQUFHO0FBQy9ELHdDQUF3QyxhQUFhLFFBQVEsR0FBRztBQUNoRSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLDZGQUE2Riw2Q0FBNkMsV0FBVyxhQUFhLEVBQUU7QUFDcEssMkNBQTJDO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixHQUFHO0FBQ3RCO0FBQ0EsbUJBQW1CLEdBQUc7QUFDdEIsd0JBQXdCLEdBQUc7QUFDM0Isd0JBQXdCLEdBQUc7O0FBRTNCO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixHQUFHOztBQUV0QjtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxZQUFZLFNBQVMsRUFBRTtBQUMxRSxxREFBcUQsWUFBWSxTQUFTLEVBQUU7QUFDNUUscURBQXFELFlBQVksU0FBUyxFQUFFO0FBQzVFLG1EQUFtRCxZQUFZLFNBQVMsRUFBRTtBQUMxRSxvREFBb0QsZ0JBQWdCLEdBQUcsRUFBRTtBQUN6RSxrREFBa0QsWUFBWSxTQUFTLEVBQUU7QUFDekUsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RyxxQkFBcUI7QUFDNUgsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSSxrQkFBa0I7QUFDdEIsSUFBSSxrQkFBa0I7QUFDdEIsSUFBSSxrQkFBa0I7QUFDdEIsSUFBSSxpQkFBaUI7QUFDckIsSUFBSSxrQkFBa0I7QUFDdEIsSUFBSSxrQkFBa0I7QUFDdEIsSUFBSSxtQkFBbUI7QUFDdkIsSUFBSSxtQkFBbUI7QUFDdkIsSUFBSSxtQkFBbUI7QUFDdkIsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBO0FBQ0EsNkNBQTZDLFVBQVU7QUFDdkQsK0NBQStDLFVBQVU7QUFDekQsK0NBQStDLFVBQVU7QUFDekQsd0NBQXdDLFVBQVU7QUFDbEQsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMOztBQUVBOztBQUVBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQSx1R0FBdUcsV0FBVyxlQUFlLFFBQVE7O0FBRXpJOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpRUFBaUUsVUFBVTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsVUFBVTtBQUM1RSxpRUFBaUUsVUFBVTtBQUMzRSxpR0FBaUcsVUFBVSxlQUFlLFFBQVE7QUFDbEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMLDRHQUE0RyxVQUFVLGVBQWUsUUFBUTs7QUFFN0k7QUFDQSxpQ0FBaUMsR0FBRztBQUNwQyx1Q0FBdUMsWUFBWSw4Q0FBOEMsVUFBVTs7QUFFM0c7QUFDQSx5Q0FBeUMsUUFBUSxzR0FBc0csVUFBVTs7QUFFaks7QUFDQSx3Q0FBd0MsUUFBUSw4Q0FBOEMsVUFBVTtBQUN4RyxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0QkFBNEI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLGtDQUFrQyxHQUFHO0FBQ3JDLG1DQUFtQyxHQUFHO0FBQ3RDLElBQUk7O0FBRUo7QUFDQTtBQUNBLGlDQUFpQyxHQUFHO0FBQ3BDLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUJBQXlCO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxtQkFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYyxlQUFlO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNEJBQTRCLE1BQU0sV0FBVyxTQUFTOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixvQkFBb0I7O0FBRXRDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQixvQkFBb0I7QUFDL0MsbUJBQW1CLE1BQU0sV0FBVyxTQUFTO0FBQzdDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0QkFBNEI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUIsNEJBQTRCO0FBQ25EOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGtEQUFrRDtBQUNsRDs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBOztBQUVBO0FBQ0E7QUFDQSx3Q0FBd0MsVUFBVTtBQUNsRCwyREFBMkQsVUFBVTtBQUNyRSw4Q0FBOEMsVUFBVTtBQUN4RCxnREFBZ0QsVUFBVTtBQUMxRCxvREFBb0QsVUFBVTtBQUM5RCw4QkFBOEIsR0FBRywrQkFBK0IsVUFBVTtBQUMxRSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSx3QkFBd0IsR0FBRztBQUMzQixJQUFJOztBQUVKO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxHQUFHO0FBQ3BDLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSxtQ0FBbUMsR0FBRztBQUN0QyxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtEQUFrRCxVQUFVO0FBQzVELElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBLDZDQUE2QyxVQUFVO0FBQ3ZELCtDQUErQyxVQUFVO0FBQ3pELGlEQUFpRCxVQUFVOztBQUUzRDtBQUNBLHFEQUFxRCxVQUFVOztBQUUvRDtBQUNBLDRDQUE0QyxVQUFVO0FBQ3RELElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0IsVUFBVTtBQUN6Qzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxtQkFBbUIsR0FBRztBQUN0QixtQkFBbUIsR0FBRzs7QUFFdEI7QUFDQSxtQkFBbUIsbUJBQW1CO0FBQ3RDLHFCQUFxQixlQUFlO0FBQ3BDLG9CQUFvQixlQUFlO0FBQ25DLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLEdBQUc7O0FBRXRCLHFCQUFxQixnQkFBZ0I7QUFDckMsbUJBQW1CLG1CQUFtQjtBQUN0QyxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixHQUFHO0FBQ3RCLG1CQUFtQixHQUFHO0FBQ3RCLG9CQUFvQixHQUFHO0FBQ3ZCLG1CQUFtQixHQUFHO0FBQ3RCLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxrRUFBa0UsVUFBVSxVQUFVLFFBQVE7QUFDOUY7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFBQTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgaGVsbG9qcyB2MS4xNi4xIHwgKGMpIDIwMTItMjAxNyBBbmRyZXcgRG9kc29uIHwgTUlUIGh0dHBzOi8vYWRvZHNvbi5jb20vaGVsbG8uanMvTElDRU5TRSAqL1xuLy8gRVM1IE9iamVjdC5jcmVhdGVcbmlmICghT2JqZWN0LmNyZWF0ZSkge1xuXG5cdC8vIFNoaW0sIE9iamVjdCBjcmVhdGVcblx0Ly8gQSBzaGltIGZvciBPYmplY3QuY3JlYXRlKCksIGl0IGFkZHMgYSBwcm90b3R5cGUgdG8gYSBuZXcgb2JqZWN0XG5cdE9iamVjdC5jcmVhdGUgPSAoZnVuY3Rpb24oKSB7XG5cblx0XHRmdW5jdGlvbiBGKCkge31cblxuXHRcdHJldHVybiBmdW5jdGlvbihvKSB7XG5cblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoICE9IDEpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdPYmplY3QuY3JlYXRlIGltcGxlbWVudGF0aW9uIG9ubHkgYWNjZXB0cyBvbmUgcGFyYW1ldGVyLicpO1xuXHRcdFx0fVxuXG5cdFx0XHRGLnByb3RvdHlwZSA9IG87XG5cdFx0XHRyZXR1cm4gbmV3IEYoKTtcblx0XHR9O1xuXG5cdH0pKCk7XG5cbn1cblxuLy8gRVM1IE9iamVjdC5rZXlzXG5pZiAoIU9iamVjdC5rZXlzKSB7XG5cdE9iamVjdC5rZXlzID0gZnVuY3Rpb24obywgaywgcikge1xuXHRcdHIgPSBbXTtcblx0XHRmb3IgKGsgaW4gbykge1xuXHRcdFx0aWYgKHIuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSlcblx0XHRcdFx0ci5wdXNoKGspO1xuXHRcdH1cblxuXHRcdHJldHVybiByO1xuXHR9O1xufVxuXG4vLyBFUzUgW10uaW5kZXhPZlxuaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikge1xuXHRBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uKHMpIHtcblxuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKHRoaXNbal0gPT09IHMpIHtcblx0XHRcdFx0cmV0dXJuIGo7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIC0xO1xuXHR9O1xufVxuXG4vLyBFUzUgW10uZm9yRWFjaFxuaWYgKCFBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkge1xuXHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGZ1bi8qLCB0aGlzQXJnKi8pIHtcblxuXHRcdGlmICh0aGlzID09PSB2b2lkIDAgfHwgdGhpcyA9PT0gbnVsbCkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuXHRcdH1cblxuXHRcdHZhciB0ID0gT2JqZWN0KHRoaXMpO1xuXHRcdHZhciBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDtcblx0XHRpZiAodHlwZW9mIGZ1biAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuXHRcdH1cblxuXHRcdHZhciB0aGlzQXJnID0gYXJndW1lbnRzLmxlbmd0aCA+PSAyID8gYXJndW1lbnRzWzFdIDogdm9pZCAwO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChpIGluIHQpIHtcblx0XHRcdFx0ZnVuLmNhbGwodGhpc0FyZywgdFtpXSwgaSwgdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG59XG5cbi8vIEVTNSBbXS5maWx0ZXJcbmlmICghQXJyYXkucHJvdG90eXBlLmZpbHRlcikge1xuXHRBcnJheS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24oZnVuLCB0aGlzQXJnKSB7XG5cblx0XHR2YXIgYSA9IFtdO1xuXHRcdHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWwsIGksIHQpIHtcblx0XHRcdGlmIChmdW4uY2FsbCh0aGlzQXJnIHx8IHZvaWQgMCwgdmFsLCBpLCB0KSkge1xuXHRcdFx0XHRhLnB1c2godmFsKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBhO1xuXHR9O1xufVxuXG4vLyBQcm9kdWN0aW9uIHN0ZXBzIG9mIEVDTUEtMjYyLCBFZGl0aW9uIDUsIDE1LjQuNC4xOVxuLy8gUmVmZXJlbmNlOiBodHRwOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjQuNC4xOVxuaWYgKCFBcnJheS5wcm90b3R5cGUubWFwKSB7XG5cblx0QXJyYXkucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKGZ1biwgdGhpc0FyZykge1xuXG5cdFx0dmFyIGEgPSBbXTtcblx0XHR0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsLCBpLCB0KSB7XG5cdFx0XHRhLnB1c2goZnVuLmNhbGwodGhpc0FyZyB8fCB2b2lkIDAsIHZhbCwgaSwgdCkpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGE7XG5cdH07XG59XG5cbi8vIEVTNSBpc0FycmF5XG5pZiAoIUFycmF5LmlzQXJyYXkpIHtcblxuXHQvLyBGdW5jdGlvbiBBcnJheS5pc0FycmF5XG5cdEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbihvKSB7XG5cdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0fTtcblxufVxuXG4vLyBUZXN0IGZvciBsb2NhdGlvbi5hc3NpZ25cbmlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygd2luZG93LmxvY2F0aW9uID09PSAnb2JqZWN0JyAmJiAhd2luZG93LmxvY2F0aW9uLmFzc2lnbikge1xuXG5cdHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24gPSBmdW5jdGlvbih1cmwpIHtcblx0XHR3aW5kb3cubG9jYXRpb24gPSB1cmw7XG5cdH07XG5cbn1cblxuLy8gVGVzdCBmb3IgRnVuY3Rpb24uYmluZFxuaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkge1xuXG5cdC8vIE1ETlxuXHQvLyBQb2x5ZmlsbCBJRTgsIGRvZXMgbm90IHN1cHBvcnQgbmF0aXZlIEZ1bmN0aW9uLmJpbmRcblx0RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbihiKSB7XG5cblx0XHRpZiAodHlwZW9mIHRoaXMgIT09ICdmdW5jdGlvbicpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlJyk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gQygpIHt9XG5cblx0XHR2YXIgYSA9IFtdLnNsaWNlO1xuXHRcdHZhciBmID0gYS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgRCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIF90aGlzLmFwcGx5KHRoaXMgaW5zdGFuY2VvZiBDID8gdGhpcyA6IGIgfHwgd2luZG93LCBmLmNvbmNhdChhLmNhbGwoYXJndW1lbnRzKSkpO1xuXHRcdH07XG5cblx0XHRDLnByb3RvdHlwZSA9IHRoaXMucHJvdG90eXBlO1xuXHRcdEQucHJvdG90eXBlID0gbmV3IEMoKTtcblxuXHRcdHJldHVybiBEO1xuXHR9O1xuXG59XG5cbi8qKlxuICogQGhlbGxvLmpzXG4gKlxuICogSGVsbG9KUyBpcyBhIGNsaWVudCBzaWRlIEphdmFzY3JpcHQgU0RLIGZvciBtYWtpbmcgT0F1dGgyIGxvZ2lucyBhbmQgc3Vic2VxdWVudCBSRVNUIGNhbGxzLlxuICpcbiAqIEBhdXRob3IgQW5kcmV3IERvZHNvblxuICogQHdlYnNpdGUgaHR0cHM6Ly9hZG9kc29uLmNvbS9oZWxsby5qcy9cbiAqXG4gKiBAY29weXJpZ2h0IEFuZHJldyBEb2Rzb24sIDIwMTIgLSAyMDE1XG4gKiBAbGljZW5zZSBNSVQ6IFlvdSBhcmUgZnJlZSB0byB1c2UgYW5kIG1vZGlmeSB0aGlzIGNvZGUgZm9yIGFueSB1c2UsIG9uIHRoZSBjb25kaXRpb24gdGhhdCB0aGlzIGNvcHlyaWdodCBub3RpY2UgcmVtYWlucy5cbiAqL1xuXG52YXIgaGVsbG8gPSBmdW5jdGlvbihuYW1lKSB7XG5cdHJldHVybiBoZWxsby51c2UobmFtZSk7XG59O1xuXG5oZWxsby51dGlscyA9IHtcblxuXHQvLyBFeHRlbmQgdGhlIGZpcnN0IG9iamVjdCB3aXRoIHRoZSBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIG9mIHRoZSBzZWNvbmRcblx0ZXh0ZW5kOiBmdW5jdGlvbihyIC8qLCBhWywgYlssIC4uLl1dICovKSB7XG5cblx0XHQvLyBHZXQgdGhlIGFyZ3VtZW50cyBhcyBhbiBhcnJheSBidXQgb21taXQgdGhlIGluaXRpYWwgaXRlbVxuXHRcdEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkuZm9yRWFjaChmdW5jdGlvbihhKSB7XG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShyKSAmJiBBcnJheS5pc0FycmF5KGEpKSB7XG5cdFx0XHRcdEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHIsIGEpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAociAmJiAociBpbnN0YW5jZW9mIE9iamVjdCB8fCB0eXBlb2YgciA9PT0gJ29iamVjdCcpICYmIGEgJiYgKGEgaW5zdGFuY2VvZiBPYmplY3QgfHwgdHlwZW9mIGEgPT09ICdvYmplY3QnKSAmJiByICE9PSBhKSB7XG5cdFx0XHRcdGZvciAodmFyIHggaW4gYSkge1xuXHRcdFx0XHRcdHJbeF0gPSBoZWxsby51dGlscy5leHRlbmQoclt4XSwgYVt4XSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KGEpKSB7XG5cdFx0XHRcdFx0Ly8gQ2xvbmUgaXRcblx0XHRcdFx0XHRhID0gYS5zbGljZSgwKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHIgPSBhO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHI7XG5cdH1cbn07XG5cbi8vIENvcmUgbGlicmFyeVxuaGVsbG8udXRpbHMuZXh0ZW5kKGhlbGxvLCB7XG5cblx0c2V0dGluZ3M6IHtcblxuXHRcdC8vIE9BdXRoMiBhdXRoZW50aWNhdGlvbiBkZWZhdWx0c1xuXHRcdHJlZGlyZWN0X3VyaTogd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXSxcblx0XHRyZXNwb25zZV90eXBlOiAndG9rZW4nLFxuXHRcdGRpc3BsYXk6ICdwb3B1cCcsXG5cdFx0c3RhdGU6ICcnLFxuXG5cdFx0Ly8gT0F1dGgxIHNoaW1cblx0XHQvLyBUaGUgcGF0aCB0byB0aGUgT0F1dGgxIHNlcnZlciBmb3Igc2lnbmluZyB1c2VyIHJlcXVlc3RzXG5cdFx0Ly8gV2FudCB0byByZWNyZWF0ZSB5b3VyIG93bj8gQ2hlY2tvdXQgaHR0cHM6Ly9naXRodWIuY29tL01yU3dpdGNoL25vZGUtb2F1dGgtc2hpbVxuXHRcdG9hdXRoX3Byb3h5OiAnaHR0cHM6Ly9hdXRoLXNlcnZlci5oZXJva3VhcHAuY29tL3Byb3h5JyxcblxuXHRcdC8vIEFQSSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kc1xuXHRcdHRpbWVvdXQ6IDIwMDAwLFxuXG5cdFx0Ly8gUG9wdXAgT3B0aW9uc1xuXHRcdHBvcHVwOiB7XG5cdFx0XHRyZXNpemFibGU6IDEsXG5cdFx0XHRzY3JvbGxiYXJzOiAxLFxuXHRcdFx0d2lkdGg6IDUwMCxcblx0XHRcdGhlaWdodDogNTUwXG5cdFx0fSxcblxuXHRcdC8vIERlZmF1bHQgc2NvcGVcblx0XHQvLyBNYW55IHNlcnZpY2VzIHJlcXVpcmUgYXRsZWFzdCBhIHByb2ZpbGUgc2NvcGUsXG5cdFx0Ly8gSGVsbG9KUyBhdXRvbWF0aWFsbHkgaW5jbHVkZXMgdGhlIHZhbHVlIG9mIHByb3ZpZGVyLnNjb3BlX21hcC5iYXNpY1xuXHRcdC8vIElmIHRoYXQncyBub3QgcmVxdWlyZWQgaXQgY2FuIGJlIHJlbW92ZWQgdmlhIGhlbGxvLnNldHRpbmdzLnNjb3BlLmxlbmd0aCA9IDA7XG5cdFx0c2NvcGU6IFsnYmFzaWMnXSxcblxuXHRcdC8vIFNjb3BlIE1hcHNcblx0XHQvLyBUaGlzIGlzIHRoZSBkZWZhdWx0IG1vZHVsZSBzY29wZSwgdGhlc2UgYXJlIHRoZSBkZWZhdWx0cyB3aGljaCBlYWNoIHNlcnZpY2UgaXMgbWFwcGVkIHRvby5cblx0XHQvLyBCeSBpbmNsdWRpbmcgdGhlbSBoZXJlIGl0IHByZXZlbnRzIHRoZSBzY29wZSBmcm9tIGJlaW5nIGFwcGxpZWQgYWNjaWRlbnRhbGx5XG5cdFx0c2NvcGVfbWFwOiB7XG5cdFx0XHRiYXNpYzogJydcblx0XHR9LFxuXG5cdFx0Ly8gRGVmYXVsdCBzZXJ2aWNlIC8gbmV0d29ya1xuXHRcdGRlZmF1bHRfc2VydmljZTogbnVsbCxcblxuXHRcdC8vIEZvcmNlIGF1dGhlbnRpY2F0aW9uXG5cdFx0Ly8gV2hlbiBoZWxsby5sb2dpbiBpcyBmaXJlZC5cblx0XHQvLyAobnVsbCk6IGlnbm9yZSBjdXJyZW50IHNlc3Npb24gZXhwaXJ5IGFuZCBjb250aW51ZSB3aXRoIGxvZ2luXG5cdFx0Ly8gKHRydWUpOiBpZ25vcmUgY3VycmVudCBzZXNzaW9uIGV4cGlyeSBhbmQgY29udGludWUgd2l0aCBsb2dpbiwgYXNrIGZvciB1c2VyIHRvIHJlYXV0aGVudGljYXRlXG5cdFx0Ly8gKGZhbHNlKTogaWYgdGhlIGN1cnJlbnQgc2Vzc2lvbiBsb29rcyBnb29kIGZvciB0aGUgcmVxdWVzdCBzY29wZXMgcmV0dXJuIHRoZSBjdXJyZW50IHNlc3Npb24uXG5cdFx0Zm9yY2U6IG51bGwsXG5cblx0XHQvLyBQYWdlIFVSTFxuXHRcdC8vIFdoZW4gJ2Rpc3BsYXk9cGFnZScgdGhpcyBwcm9wZXJ0eSBkZWZpbmVzIHdoZXJlIHRoZSB1c2VycyBwYWdlIHNob3VsZCBlbmQgdXAgYWZ0ZXIgcmVkaXJlY3RfdXJpXG5cdFx0Ly8gVGhzIGNvdWxkIGJlIHByb2JsZW1hdGljIGlmIHRoZSByZWRpcmVjdF91cmkgaXMgaW5kZWVkIHRoZSBmaW5hbCBwbGFjZSxcblx0XHQvLyBUeXBpY2FsbHkgdGhpcyBjaXJjdW12ZW50cyB0aGUgcHJvYmxlbSBvZiB0aGUgcmVkaXJlY3RfdXJsIGJlaW5nIGEgZHVtYiByZWxheSBwYWdlLlxuXHRcdHBhZ2VfdXJpOiB3aW5kb3cubG9jYXRpb24uaHJlZlxuXHR9LFxuXG5cdC8vIFNlcnZpY2UgY29uZmlndXJhdGlvbiBvYmplY3RzXG5cdHNlcnZpY2VzOiB7fSxcblxuXHQvLyBVc2Vcblx0Ly8gRGVmaW5lIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBIZWxsb0pTIGxpYnJhcnkgd2l0aCBhIGRlZmF1bHQgc2VydmljZVxuXHR1c2U6IGZ1bmN0aW9uKHNlcnZpY2UpIHtcblxuXHRcdC8vIENyZWF0ZSBzZWxmLCB3aGljaCBpbmhlcml0cyBmcm9tIGl0cyBwYXJlbnRcblx0XHR2YXIgc2VsZiA9IE9iamVjdC5jcmVhdGUodGhpcyk7XG5cblx0XHQvLyBJbmhlcml0IHRoZSBwcm90b3R5cGUgZnJvbSBpdHMgcGFyZW50XG5cdFx0c2VsZi5zZXR0aW5ncyA9IE9iamVjdC5jcmVhdGUodGhpcy5zZXR0aW5ncyk7XG5cblx0XHQvLyBEZWZpbmUgdGhlIGRlZmF1bHQgc2VydmljZVxuXHRcdGlmIChzZXJ2aWNlKSB7XG5cdFx0XHRzZWxmLnNldHRpbmdzLmRlZmF1bHRfc2VydmljZSA9IHNlcnZpY2U7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEV2ZW50c1xuXHRcdHNlbGYudXRpbHMuRXZlbnQuY2FsbChzZWxmKTtcblxuXHRcdHJldHVybiBzZWxmO1xuXHR9LFxuXG5cdC8vIEluaXRpYWxpemVcblx0Ly8gRGVmaW5lIHRoZSBjbGllbnRfaWRzIGZvciB0aGUgZW5kcG9pbnQgc2VydmljZXNcblx0Ly8gQHBhcmFtIG9iamVjdCBvLCBjb250YWlucyBhIGtleSB2YWx1ZSBwYWlyLCBzZXJ2aWNlID0+IGNsaWVudElkXG5cdC8vIEBwYXJhbSBvYmplY3Qgb3B0cywgY29udGFpbnMgYSBrZXkgdmFsdWUgcGFpciBvZiBvcHRpb25zIHVzZWQgZm9yIGRlZmluaW5nIHRoZSBhdXRoZW50aWNhdGlvbiBkZWZhdWx0c1xuXHQvLyBAcGFyYW0gbnVtYmVyIHRpbWVvdXQsIHRpbWVvdXQgaW4gc2Vjb25kc1xuXHRpbml0OiBmdW5jdGlvbihzZXJ2aWNlcywgb3B0aW9ucykge1xuXG5cdFx0dmFyIHV0aWxzID0gdGhpcy51dGlscztcblxuXHRcdGlmICghc2VydmljZXMpIHtcblx0XHRcdHJldHVybiB0aGlzLnNlcnZpY2VzO1xuXHRcdH1cblxuXHRcdC8vIERlZmluZSBwcm92aWRlciBjcmVkZW50aWFsc1xuXHRcdC8vIFJlZm9ybWF0IHRoZSBJRCBmaWVsZFxuXHRcdGZvciAodmFyIHggaW4gc2VydmljZXMpIHtpZiAoc2VydmljZXMuaGFzT3duUHJvcGVydHkoeCkpIHtcblx0XHRcdGlmICh0eXBlb2YgKHNlcnZpY2VzW3hdKSAhPT0gJ29iamVjdCcpIHtcblx0XHRcdFx0c2VydmljZXNbeF0gPSB7aWQ6IHNlcnZpY2VzW3hdfTtcblx0XHRcdH1cblx0XHR9fVxuXG5cdFx0Ly8gTWVyZ2Ugc2VydmljZXMgaWYgdGhlcmUgYWxyZWFkeSBleGlzdHMgc29tZVxuXHRcdHV0aWxzLmV4dGVuZCh0aGlzLnNlcnZpY2VzLCBzZXJ2aWNlcyk7XG5cblx0XHQvLyBVcGRhdGUgdGhlIGRlZmF1bHQgc2V0dGluZ3Mgd2l0aCB0aGlzIG9uZS5cblx0XHRpZiAob3B0aW9ucykge1xuXHRcdFx0dXRpbHMuZXh0ZW5kKHRoaXMuc2V0dGluZ3MsIG9wdGlvbnMpO1xuXG5cdFx0XHQvLyBEbyB0aGlzIGltbWVkaWF0bHkgaW5jYXNlIHRoZSBicm93c2VyIGNoYW5nZXMgdGhlIGN1cnJlbnQgcGF0aC5cblx0XHRcdGlmICgncmVkaXJlY3RfdXJpJyBpbiBvcHRpb25zKSB7XG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MucmVkaXJlY3RfdXJpID0gdXRpbHMudXJsKG9wdGlvbnMucmVkaXJlY3RfdXJpKS5ocmVmO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdC8vIExvZ2luXG5cdC8vIFVzaW5nIHRoZSBlbmRwb2ludFxuXHQvLyBAcGFyYW0gbmV0d29yayBzdHJpbmdpZnkgICAgICAgbmFtZSB0byBjb25uZWN0IHRvXG5cdC8vIEBwYXJhbSBvcHRpb25zIG9iamVjdCAgICAob3B0aW9uYWwpICB7ZGlzcGxheSBtb2RlLCBpcyBlaXRoZXIgbm9uZXxwb3B1cChkZWZhdWx0KXxwYWdlLCBzY29wZTogZW1haWwsYmlydGhkYXkscHVibGlzaCwgLi4gfVxuXHQvLyBAcGFyYW0gY2FsbGJhY2sgIGZ1bmN0aW9uICAob3B0aW9uYWwpICBmaXJlZCBvbiBzaWduaW5cblx0bG9naW46IGZ1bmN0aW9uKCkge1xuXG5cdFx0Ly8gQ3JlYXRlIGFuIG9iamVjdCB3aGljaCBpbmhlcml0cyBpdHMgcGFyZW50IGFzIHRoZSBwcm90b3R5cGUgYW5kIGNvbnN0cnVjdHMgYSBuZXcgZXZlbnQgY2hhaW4uXG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdXRpbHMgPSBfdGhpcy51dGlscztcblx0XHR2YXIgZXJyb3IgPSB1dGlscy5lcnJvcjtcblx0XHR2YXIgcHJvbWlzZSA9IHV0aWxzLlByb21pc2UoKTtcblxuXHRcdC8vIEdldCBwYXJhbWV0ZXJzXG5cdFx0dmFyIHAgPSB1dGlscy5hcmdzKHtuZXR3b3JrOiAncycsIG9wdGlvbnM6ICdvJywgY2FsbGJhY2s6ICdmJ30sIGFyZ3VtZW50cyk7XG5cblx0XHQvLyBMb2NhbCB2YXJzXG5cdFx0dmFyIHVybDtcblxuXHRcdC8vIEdldCBhbGwgdGhlIGN1c3RvbSBvcHRpb25zIGFuZCBzdG9yZSB0byBiZSBhcHBlbmRlZCB0byB0aGUgcXVlcnlzdHJpbmdcblx0XHR2YXIgcXMgPSB1dGlscy5kaWZmS2V5KHAub3B0aW9ucywgX3RoaXMuc2V0dGluZ3MpO1xuXG5cdFx0Ly8gTWVyZ2Uvb3ZlcnJpZGUgb3B0aW9ucyB3aXRoIGFwcCBkZWZhdWx0c1xuXHRcdHZhciBvcHRzID0gcC5vcHRpb25zID0gdXRpbHMubWVyZ2UoX3RoaXMuc2V0dGluZ3MsIHAub3B0aW9ucyB8fCB7fSk7XG5cblx0XHQvLyBNZXJnZS9vdmVycmlkZSBvcHRpb25zIHdpdGggYXBwIGRlZmF1bHRzXG5cdFx0b3B0cy5wb3B1cCA9IHV0aWxzLm1lcmdlKF90aGlzLnNldHRpbmdzLnBvcHVwLCBwLm9wdGlvbnMucG9wdXAgfHwge30pO1xuXG5cdFx0Ly8gTmV0d29ya1xuXHRcdHAubmV0d29yayA9IHAubmV0d29yayB8fCBfdGhpcy5zZXR0aW5ncy5kZWZhdWx0X3NlcnZpY2U7XG5cblx0XHQvLyBCaW5kIGNhbGxiYWNrIHRvIGJvdGggcmVqZWN0IGFuZCBmdWxmaWxsIHN0YXRlc1xuXHRcdHByb21pc2UucHJveHkudGhlbihwLmNhbGxiYWNrLCBwLmNhbGxiYWNrKTtcblxuXHRcdC8vIFRyaWdnZXIgYW4gZXZlbnQgb24gdGhlIGdsb2JhbCBsaXN0ZW5lclxuXHRcdGZ1bmN0aW9uIGVtaXQocywgdmFsdWUpIHtcblx0XHRcdGhlbGxvLmVtaXQocywgdmFsdWUpO1xuXHRcdH1cblxuXHRcdHByb21pc2UucHJveHkudGhlbihlbWl0LmJpbmQodGhpcywgJ2F1dGgubG9naW4gYXV0aCcpLCBlbWl0LmJpbmQodGhpcywgJ2F1dGguZmFpbGVkIGF1dGgnKSk7XG5cblx0XHQvLyBJcyBvdXIgc2VydmljZSB2YWxpZD9cblx0XHRpZiAodHlwZW9mIChwLm5ldHdvcmspICE9PSAnc3RyaW5nJyB8fCAhKHAubmV0d29yayBpbiBfdGhpcy5zZXJ2aWNlcykpIHtcblx0XHRcdC8vIFRyaWdnZXIgdGhlIGRlZmF1bHQgbG9naW4uXG5cdFx0XHQvLyBBaGggd2UgZG9udCBoYXZlIG9uZS5cblx0XHRcdHJldHVybiBwcm9taXNlLnJlamVjdChlcnJvcignaW52YWxpZF9uZXR3b3JrJywgJ1RoZSBwcm92aWRlZCBuZXR3b3JrIHdhcyBub3QgcmVjb2duaXplZCcpKTtcblx0XHR9XG5cblx0XHR2YXIgcHJvdmlkZXIgPSBfdGhpcy5zZXJ2aWNlc1twLm5ldHdvcmtdO1xuXG5cdFx0Ly8gQ3JlYXRlIGEgZ2xvYmFsIGxpc3RlbmVyIHRvIGNhcHR1cmUgZXZlbnRzIHRyaWdnZXJlZCBvdXQgb2Ygc2NvcGVcblx0XHR2YXIgY2FsbGJhY2tJZCA9IHV0aWxzLmdsb2JhbEV2ZW50KGZ1bmN0aW9uKHN0cikge1xuXG5cdFx0XHQvLyBUaGUgcmVzcG9uc2VIYW5kbGVyIHJldHVybnMgYSBzdHJpbmcsIGxldHMgc2F2ZSB0aGlzIGxvY2FsbHlcblx0XHRcdHZhciBvYmo7XG5cblx0XHRcdGlmIChzdHIpIHtcblx0XHRcdFx0b2JqID0gSlNPTi5wYXJzZShzdHIpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdG9iaiA9IGVycm9yKCdjYW5jZWxsZWQnLCAnVGhlIGF1dGhlbnRpY2F0aW9uIHdhcyBub3QgY29tcGxldGVkJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhhbmRsZSB0aGVzZSByZXNwb25zZSB1c2luZyB0aGUgbG9jYWxcblx0XHRcdC8vIFRyaWdnZXIgb24gdGhlIHBhcmVudFxuXHRcdFx0aWYgKCFvYmouZXJyb3IpIHtcblxuXHRcdFx0XHQvLyBTYXZlIG9uIHRoZSBwYXJlbnQgd2luZG93IHRoZSBuZXcgY3JlZGVudGlhbHNcblx0XHRcdFx0Ly8gVGhpcyBmaXhlcyBhbiBJRTEwIGJ1ZyBpIHRoaW5rLi4uIGF0bGVhc3QgaXQgZG9lcyBmb3IgbWUuXG5cdFx0XHRcdHV0aWxzLnN0b3JlKG9iai5uZXR3b3JrLCBvYmopO1xuXG5cdFx0XHRcdC8vIEZ1bGZpbGwgYSBzdWNjZXNzZnVsIGxvZ2luXG5cdFx0XHRcdHByb21pc2UuZnVsZmlsbCh7XG5cdFx0XHRcdFx0bmV0d29yazogb2JqLm5ldHdvcmssXG5cdFx0XHRcdFx0YXV0aFJlc3BvbnNlOiBvYmpcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Ly8gUmVqZWN0IGEgc3VjY2Vzc2Z1bCBsb2dpblxuXHRcdFx0XHRwcm9taXNlLnJlamVjdChvYmopO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dmFyIHJlZGlyZWN0VXJpID0gdXRpbHMudXJsKG9wdHMucmVkaXJlY3RfdXJpKS5ocmVmO1xuXG5cdFx0Ly8gTWF5IGJlIGEgc3BhY2UtZGVsaW1pdGVkIGxpc3Qgb2YgbXVsdGlwbGUsIGNvbXBsZW1lbnRhcnkgdHlwZXNcblx0XHR2YXIgcmVzcG9uc2VUeXBlID0gcHJvdmlkZXIub2F1dGgucmVzcG9uc2VfdHlwZSB8fCBvcHRzLnJlc3BvbnNlX3R5cGU7XG5cblx0XHQvLyBGYWxsYmFjayB0byB0b2tlbiBpZiB0aGUgbW9kdWxlIGhhc24ndCBkZWZpbmVkIGEgZ3JhbnQgdXJsXG5cdFx0aWYgKC9cXGJjb2RlXFxiLy50ZXN0KHJlc3BvbnNlVHlwZSkgJiYgIXByb3ZpZGVyLm9hdXRoLmdyYW50KSB7XG5cdFx0XHRyZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGUucmVwbGFjZSgvXFxiY29kZVxcYi8sICd0b2tlbicpO1xuXHRcdH1cblxuXHRcdC8vIFF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzLCB3ZSBtYXkgcGFzcyBvdXIgb3duIGFyZ3VtZW50cyB0byBmb3JtIHRoZSBxdWVyeXN0cmluZ1xuXHRcdHAucXMgPSB1dGlscy5tZXJnZShxcywge1xuXHRcdFx0Y2xpZW50X2lkOiBlbmNvZGVVUklDb21wb25lbnQocHJvdmlkZXIuaWQpLFxuXHRcdFx0cmVzcG9uc2VfdHlwZTogZW5jb2RlVVJJQ29tcG9uZW50KHJlc3BvbnNlVHlwZSksXG5cdFx0XHRyZWRpcmVjdF91cmk6IGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFVyaSksXG5cdFx0XHRzdGF0ZToge1xuXHRcdFx0XHRjbGllbnRfaWQ6IHByb3ZpZGVyLmlkLFxuXHRcdFx0XHRuZXR3b3JrOiBwLm5ldHdvcmssXG5cdFx0XHRcdGRpc3BsYXk6IG9wdHMuZGlzcGxheSxcblx0XHRcdFx0Y2FsbGJhY2s6IGNhbGxiYWNrSWQsXG5cdFx0XHRcdHN0YXRlOiBvcHRzLnN0YXRlLFxuXHRcdFx0XHRyZWRpcmVjdF91cmk6IHJlZGlyZWN0VXJpXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBHZXQgY3VycmVudCBzZXNzaW9uIGZvciBtZXJnaW5nIHNjb3BlcywgYW5kIGZvciBxdWljayBhdXRoIHJlc3BvbnNlXG5cdFx0dmFyIHNlc3Npb24gPSB1dGlscy5zdG9yZShwLm5ldHdvcmspO1xuXG5cdFx0Ly8gU2NvcGVzIChhdXRoZW50aWNhdGlvbiBwZXJtaXNpb25zKVxuXHRcdC8vIEVuc3VyZSB0aGlzIGlzIGEgc3RyaW5nIC0gSUUgaGFzIGEgcHJvYmxlbSBtb3ZpbmcgQXJyYXlzIGJldHdlZW4gd2luZG93c1xuXHRcdC8vIEFwcGVuZCB0aGUgc2V0dXAgc2NvcGVcblx0XHR2YXIgU0NPUEVfU1BMSVQgPSAvWyxcXHNdKy87XG5cblx0XHQvLyBJbmNsdWRlIGRlZmF1bHQgc2NvcGUgc2V0dGluZ3MgKGNsb25lZCkuXG5cdFx0dmFyIHNjb3BlID0gX3RoaXMuc2V0dGluZ3Muc2NvcGUgPyBbX3RoaXMuc2V0dGluZ3Muc2NvcGUudG9TdHJpbmcoKV0gOiBbXTtcblxuXHRcdC8vIEV4dGVuZCB0aGUgcHJvdmlkZXJzIHNjb3BlIGxpc3Qgd2l0aCB0aGUgZGVmYXVsdFxuXHRcdHZhciBzY29wZU1hcCA9IHV0aWxzLm1lcmdlKF90aGlzLnNldHRpbmdzLnNjb3BlX21hcCwgcHJvdmlkZXIuc2NvcGUgfHwge30pO1xuXG5cdFx0Ly8gQWRkIHVzZXIgZGVmaW5lZCBzY29wZXMuLi5cblx0XHRpZiAob3B0cy5zY29wZSkge1xuXHRcdFx0c2NvcGUucHVzaChvcHRzLnNjb3BlLnRvU3RyaW5nKCkpO1xuXHRcdH1cblxuXHRcdC8vIEFwcGVuZCBzY29wZXMgZnJvbSBhIHByZXZpb3VzIHNlc3Npb24uXG5cdFx0Ly8gVGhpcyBoZWxwcyBrZWVwIGFwcCBjcmVkZW50aWFscyBjb25zdGFudCxcblx0XHQvLyBBdm9pZGluZyBoYXZpbmcgdG8ga2VlcCB0YWJzIG9uIHdoYXQgc2NvcGVzIGFyZSBhdXRob3JpemVkXG5cdFx0aWYgKHNlc3Npb24gJiYgJ3Njb3BlJyBpbiBzZXNzaW9uICYmIHNlc3Npb24uc2NvcGUgaW5zdGFuY2VvZiBTdHJpbmcpIHtcblx0XHRcdHNjb3BlLnB1c2goc2Vzc2lvbi5zY29wZSk7XG5cdFx0fVxuXG5cdFx0Ly8gSm9pbiBhbmQgU3BsaXQgYWdhaW5cblx0XHRzY29wZSA9IHNjb3BlLmpvaW4oJywnKS5zcGxpdChTQ09QRV9TUExJVCk7XG5cblx0XHQvLyBGb3JtYXQgcmVtb3ZlIGR1cGxpY2F0ZXMgYW5kIGVtcHR5IHZhbHVlc1xuXHRcdHNjb3BlID0gdXRpbHMudW5pcXVlKHNjb3BlKS5maWx0ZXIoZmlsdGVyRW1wdHkpO1xuXG5cdFx0Ly8gU2F2ZSB0aGUgdGhlIHNjb3BlcyB0byB0aGUgc3RhdGUgd2l0aCB0aGUgbmFtZXMgdGhhdCB0aGV5IHdlcmUgcmVxdWVzdGVkIHdpdGguXG5cdFx0cC5xcy5zdGF0ZS5zY29wZSA9IHNjb3BlLmpvaW4oJywnKTtcblxuXHRcdC8vIE1hcCBzY29wZXMgdG8gdGhlIHByb3ZpZGVycyBuYW1pbmcgY29udmVudGlvblxuXHRcdHNjb3BlID0gc2NvcGUubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdC8vIERvZXMgdGhpcyBoYXZlIGEgbWFwcGluZz9cblx0XHRcdHJldHVybiAoaXRlbSBpbiBzY29wZU1hcCkgPyBzY29wZU1hcFtpdGVtXSA6IGl0ZW07XG5cdFx0fSk7XG5cblx0XHQvLyBTdHJpbmdpZnkgYW5kIEFycmF5aWZ5IHNvIHRoYXQgZG91YmxlIG1hcHBlZCBzY29wZXMgYXJlIGdpdmVuIHRoZSBjaGFuY2UgdG8gYmUgZm9ybWF0dGVkXG5cdFx0c2NvcGUgPSBzY29wZS5qb2luKCcsJykuc3BsaXQoU0NPUEVfU1BMSVQpO1xuXG5cdFx0Ly8gQWdhaW4uLi5cblx0XHQvLyBGb3JtYXQgcmVtb3ZlIGR1cGxpY2F0ZXMgYW5kIGVtcHR5IHZhbHVlc1xuXHRcdHNjb3BlID0gdXRpbHMudW5pcXVlKHNjb3BlKS5maWx0ZXIoZmlsdGVyRW1wdHkpO1xuXG5cdFx0Ly8gSm9pbiB3aXRoIHRoZSBleHBlY3RlZCBzY29wZSBkZWxpbWl0ZXIgaW50byBhIHN0cmluZ1xuXHRcdHAucXMuc2NvcGUgPSBzY29wZS5qb2luKHByb3ZpZGVyLnNjb3BlX2RlbGltIHx8ICcsJyk7XG5cblx0XHQvLyBJcyB0aGUgdXNlciBhbHJlYWR5IHNpZ25lZCBpbiB3aXRoIHRoZSBhcHByb3ByaWF0ZSBzY29wZXMsIHZhbGlkIGFjY2Vzc190b2tlbj9cblx0XHRpZiAob3B0cy5mb3JjZSA9PT0gZmFsc2UpIHtcblxuXHRcdFx0aWYgKHNlc3Npb24gJiYgJ2FjY2Vzc190b2tlbicgaW4gc2Vzc2lvbiAmJiBzZXNzaW9uLmFjY2Vzc190b2tlbiAmJiAnZXhwaXJlcycgaW4gc2Vzc2lvbiAmJiBzZXNzaW9uLmV4cGlyZXMgPiAoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAvIDFlMykpIHtcblx0XHRcdFx0Ly8gV2hhdCBpcyBkaWZmZXJlbnQgYWJvdXQgdGhlIHNjb3BlcyBpbiB0aGUgc2Vzc2lvbiB2cyB0aGUgc2NvcGVzIGluIHRoZSBuZXcgbG9naW4/XG5cdFx0XHRcdHZhciBkaWZmID0gdXRpbHMuZGlmZigoc2Vzc2lvbi5zY29wZSB8fCAnJykuc3BsaXQoU0NPUEVfU1BMSVQpLCAocC5xcy5zdGF0ZS5zY29wZSB8fCAnJykuc3BsaXQoU0NPUEVfU1BMSVQpKTtcblx0XHRcdFx0aWYgKGRpZmYubGVuZ3RoID09PSAwKSB7XG5cblx0XHRcdFx0XHQvLyBPSyB0cmlnZ2VyIHRoZSBjYWxsYmFja1xuXHRcdFx0XHRcdHByb21pc2UuZnVsZmlsbCh7XG5cdFx0XHRcdFx0XHR1bmNoYW5nZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRuZXR3b3JrOiBwLm5ldHdvcmssXG5cdFx0XHRcdFx0XHRhdXRoUmVzcG9uc2U6IHNlc3Npb25cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIE5vdGhpbmcgaGFzIGNoYW5nZWRcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFBhZ2UgVVJMXG5cdFx0aWYgKG9wdHMuZGlzcGxheSA9PT0gJ3BhZ2UnICYmIG9wdHMucGFnZV91cmkpIHtcblx0XHRcdC8vIEFkZCBhIHBhZ2UgbG9jYXRpb24sIHBsYWNlIHRvIGVuZHVwIGFmdGVyIHNlc3Npb24gaGFzIGF1dGhlbnRpY2F0ZWRcblx0XHRcdHAucXMuc3RhdGUucGFnZV91cmkgPSB1dGlscy51cmwob3B0cy5wYWdlX3VyaSkuaHJlZjtcblx0XHR9XG5cblx0XHQvLyBCZXNwb2tlXG5cdFx0Ly8gT3ZlcnJpZGUgbG9naW4gcXVlcnlzdHJpbmdzIGZyb20gYXV0aF9vcHRpb25zXG5cdFx0aWYgKCdsb2dpbicgaW4gcHJvdmlkZXIgJiYgdHlwZW9mIChwcm92aWRlci5sb2dpbikgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdC8vIEZvcm1hdCB0aGUgcGFyYW1hdGVycyBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVycyBmb3JtYXR0aW5nIGZ1bmN0aW9uXG5cdFx0XHRwcm92aWRlci5sb2dpbihwKTtcblx0XHR9XG5cblx0XHQvLyBBZGQgT0F1dGggdG8gc3RhdGVcblx0XHQvLyBXaGVyZSB0aGUgc2VydmljZSBpcyBnb2luZyB0byB0YWtlIGFkdmFudGFnZSBvZiB0aGUgb2F1dGhfcHJveHlcblx0XHRpZiAoIS9cXGJ0b2tlblxcYi8udGVzdChyZXNwb25zZVR5cGUpIHx8XG5cdFx0cGFyc2VJbnQocHJvdmlkZXIub2F1dGgudmVyc2lvbiwgMTApIDwgMiB8fFxuXHRcdChvcHRzLmRpc3BsYXkgPT09ICdub25lJyAmJiBwcm92aWRlci5vYXV0aC5ncmFudCAmJiBzZXNzaW9uICYmIHNlc3Npb24ucmVmcmVzaF90b2tlbikpIHtcblxuXHRcdFx0Ly8gQWRkIHRoZSBvYXV0aCBlbmRwb2ludHNcblx0XHRcdHAucXMuc3RhdGUub2F1dGggPSBwcm92aWRlci5vYXV0aDtcblxuXHRcdFx0Ly8gQWRkIHRoZSBwcm94eSB1cmxcblx0XHRcdHAucXMuc3RhdGUub2F1dGhfcHJveHkgPSBvcHRzLm9hdXRoX3Byb3h5O1xuXG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBzdGF0ZSB0byBhIHN0cmluZ1xuXHRcdHAucXMuc3RhdGUgPSBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocC5xcy5zdGF0ZSkpO1xuXG5cdFx0Ly8gVVJMXG5cdFx0aWYgKHBhcnNlSW50KHByb3ZpZGVyLm9hdXRoLnZlcnNpb24sIDEwKSA9PT0gMSkge1xuXG5cdFx0XHQvLyBUdXJuIHRoZSByZXF1ZXN0IHRvIHRoZSBPQXV0aCBQcm94eSBmb3IgMy1sZWdnZWQgYXV0aFxuXHRcdFx0dXJsID0gdXRpbHMucXMob3B0cy5vYXV0aF9wcm94eSwgcC5xcywgZW5jb2RlRnVuY3Rpb24pO1xuXHRcdH1cblxuXHRcdC8vIFJlZnJlc2ggdG9rZW5cblx0XHRlbHNlIGlmIChvcHRzLmRpc3BsYXkgPT09ICdub25lJyAmJiBwcm92aWRlci5vYXV0aC5ncmFudCAmJiBzZXNzaW9uICYmIHNlc3Npb24ucmVmcmVzaF90b2tlbikge1xuXG5cdFx0XHQvLyBBZGQgdGhlIHJlZnJlc2hfdG9rZW4gdG8gdGhlIHJlcXVlc3Rcblx0XHRcdHAucXMucmVmcmVzaF90b2tlbiA9IHNlc3Npb24ucmVmcmVzaF90b2tlbjtcblxuXHRcdFx0Ly8gRGVmaW5lIHRoZSByZXF1ZXN0IHBhdGhcblx0XHRcdHVybCA9IHV0aWxzLnFzKG9wdHMub2F1dGhfcHJveHksIHAucXMsIGVuY29kZUZ1bmN0aW9uKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR1cmwgPSB1dGlscy5xcyhwcm92aWRlci5vYXV0aC5hdXRoLCBwLnFzLCBlbmNvZGVGdW5jdGlvbik7XG5cdFx0fVxuXG5cdFx0Ly8gQnJvYWRjYXN0IHRoaXMgZXZlbnQgYXMgYW4gYXV0aDppbml0XG5cdFx0ZW1pdCgnYXV0aC5pbml0JywgcCk7XG5cblx0XHQvLyBFeGVjdXRlXG5cdFx0Ly8gVHJpZ2dlciBob3cgd2Ugd2FudCBzZWxmIGRpc3BsYXllZFxuXHRcdGlmIChvcHRzLmRpc3BsYXkgPT09ICdub25lJykge1xuXHRcdFx0Ly8gU2lnbi1pbiBpbiB0aGUgYmFja2dyb3VuZCwgaWZyYW1lXG5cdFx0XHR1dGlscy5pZnJhbWUodXJsLCByZWRpcmVjdFVyaSk7XG5cdFx0fVxuXG5cdFx0Ly8gVHJpZ2dlcmluZyBwb3B1cD9cblx0XHRlbHNlIGlmIChvcHRzLmRpc3BsYXkgPT09ICdwb3B1cCcpIHtcblxuXHRcdFx0dmFyIHBvcHVwID0gdXRpbHMucG9wdXAodXJsLCByZWRpcmVjdFVyaSwgb3B0cy5wb3B1cCk7XG5cblx0XHRcdHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIXBvcHVwIHx8IHBvcHVwLmNsb3NlZCkge1xuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwodGltZXIpO1xuXHRcdFx0XHRcdGlmICghcHJvbWlzZS5zdGF0ZSkge1xuXG5cdFx0XHRcdFx0XHR2YXIgcmVzcG9uc2UgPSBlcnJvcignY2FuY2VsbGVkJywgJ0xvZ2luIGhhcyBiZWVuIGNhbmNlbGxlZCcpO1xuXG5cdFx0XHRcdFx0XHRpZiAoIXBvcHVwKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gZXJyb3IoJ2Jsb2NrZWQnLCAnUG9wdXAgd2FzIGJsb2NrZWQnKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmVzcG9uc2UubmV0d29yayA9IHAubmV0d29yaztcblxuXHRcdFx0XHRcdFx0cHJvbWlzZS5yZWplY3QocmVzcG9uc2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSwgMTAwKTtcblx0XHR9XG5cblx0XHRlbHNlIHtcblx0XHRcdHdpbmRvdy5sb2NhdGlvbiA9IHVybDtcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJvbWlzZS5wcm94eTtcblxuXHRcdGZ1bmN0aW9uIGVuY29kZUZ1bmN0aW9uKHMpIHtyZXR1cm4gczt9XG5cblx0XHRmdW5jdGlvbiBmaWx0ZXJFbXB0eShzKSB7cmV0dXJuICEhczt9XG5cdH0sXG5cblx0Ly8gUmVtb3ZlIGFueSBkYXRhIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHNlcnZpY2Vcblx0Ly8gQHBhcmFtIHN0cmluZyBuYW1lIG9mIHRoZSBzZXJ2aWNlXG5cdC8vIEBwYXJhbSBmdW5jdGlvbiBjYWxsYmFja1xuXHRsb2dvdXQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgdXRpbHMgPSBfdGhpcy51dGlscztcblx0XHR2YXIgZXJyb3IgPSB1dGlscy5lcnJvcjtcblxuXHRcdC8vIENyZWF0ZSBhIG5ldyBwcm9taXNlXG5cdFx0dmFyIHByb21pc2UgPSB1dGlscy5Qcm9taXNlKCk7XG5cblx0XHR2YXIgcCA9IHV0aWxzLmFyZ3Moe25hbWU6J3MnLCBvcHRpb25zOiAnbycsIGNhbGxiYWNrOiAnZid9LCBhcmd1bWVudHMpO1xuXG5cdFx0cC5vcHRpb25zID0gcC5vcHRpb25zIHx8IHt9O1xuXG5cdFx0Ly8gQWRkIGNhbGxiYWNrIHRvIGV2ZW50c1xuXHRcdHByb21pc2UucHJveHkudGhlbihwLmNhbGxiYWNrLCBwLmNhbGxiYWNrKTtcblxuXHRcdC8vIFRyaWdnZXIgYW4gZXZlbnQgb24gdGhlIGdsb2JhbCBsaXN0ZW5lclxuXHRcdGZ1bmN0aW9uIGVtaXQocywgdmFsdWUpIHtcblx0XHRcdGhlbGxvLmVtaXQocywgdmFsdWUpO1xuXHRcdH1cblxuXHRcdHByb21pc2UucHJveHkudGhlbihlbWl0LmJpbmQodGhpcywgJ2F1dGgubG9nb3V0IGF1dGgnKSwgZW1pdC5iaW5kKHRoaXMsICdlcnJvcicpKTtcblxuXHRcdC8vIE5ldHdvcmtcblx0XHRwLm5hbWUgPSBwLm5hbWUgfHwgdGhpcy5zZXR0aW5ncy5kZWZhdWx0X3NlcnZpY2U7XG5cdFx0cC5hdXRoUmVzcG9uc2UgPSB1dGlscy5zdG9yZShwLm5hbWUpO1xuXG5cdFx0aWYgKHAubmFtZSAmJiAhKHAubmFtZSBpbiBfdGhpcy5zZXJ2aWNlcykpIHtcblxuXHRcdFx0cHJvbWlzZS5yZWplY3QoZXJyb3IoJ2ludmFsaWRfbmV0d29yaycsICdUaGUgbmV0d29yayB3YXMgdW5yZWNvZ25pemVkJykpO1xuXG5cdFx0fVxuXHRcdGVsc2UgaWYgKHAubmFtZSAmJiBwLmF1dGhSZXNwb25zZSkge1xuXG5cdFx0XHQvLyBEZWZpbmUgdGhlIGNhbGxiYWNrXG5cdFx0XHR2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbihvcHRzKSB7XG5cblx0XHRcdFx0Ly8gUmVtb3ZlIGZyb20gdGhlIHN0b3JlXG5cdFx0XHRcdHV0aWxzLnN0b3JlKHAubmFtZSwgbnVsbCk7XG5cblx0XHRcdFx0Ly8gRW1pdCBldmVudHMgYnkgZGVmYXVsdFxuXHRcdFx0XHRwcm9taXNlLmZ1bGZpbGwoaGVsbG8udXRpbHMubWVyZ2Uoe25ldHdvcms6cC5uYW1lfSwgb3B0cyB8fCB7fSkpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gUnVuIGFuIGFzeW5jIG9wZXJhdGlvbiB0byByZW1vdmUgdGhlIHVzZXJzIHNlc3Npb25cblx0XHRcdHZhciBfb3B0cyA9IHt9O1xuXHRcdFx0aWYgKHAub3B0aW9ucy5mb3JjZSkge1xuXHRcdFx0XHR2YXIgbG9nb3V0ID0gX3RoaXMuc2VydmljZXNbcC5uYW1lXS5sb2dvdXQ7XG5cdFx0XHRcdGlmIChsb2dvdXQpIHtcblx0XHRcdFx0XHQvLyBDb252ZXJ0IGxvZ291dCB0byBVUkwgc3RyaW5nLFxuXHRcdFx0XHRcdC8vIElmIG5vIHN0cmluZyBpcyByZXR1cm5lZCwgdGhlbiB0aGlzIGZ1bmN0aW9uIHdpbGwgaGFuZGxlIHRoZSBsb2dvdXQgYXN5bmMgc3R5bGVcblx0XHRcdFx0XHRpZiAodHlwZW9mIChsb2dvdXQpID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRsb2dvdXQgPSBsb2dvdXQoY2FsbGJhY2ssIHApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIElmIGxvZ291dCBpcyBhIHN0cmluZyB0aGVuIGFzc3VtZSBVUkwgYW5kIG9wZW4gaW4gaWZyYW1lLlxuXHRcdFx0XHRcdGlmICh0eXBlb2YgKGxvZ291dCkgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0XHR1dGlscy5pZnJhbWUobG9nb3V0KTtcblx0XHRcdFx0XHRcdF9vcHRzLmZvcmNlID0gbnVsbDtcblx0XHRcdFx0XHRcdF9vcHRzLm1lc3NhZ2UgPSAnTG9nb3V0IHN1Y2Nlc3Mgb24gcHJvdmlkZXJzIHNpdGUgd2FzIGluZGV0ZXJtaW5hdGUnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGlmIChsb2dvdXQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0Ly8gVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgaGFuZGxlIHRoZSByZXNwb25zZS5cblx0XHRcdFx0XHRcdHJldHVybiBwcm9taXNlLnByb3h5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZW1vdmUgbG9jYWwgY3JlZGVudGlhbHNcblx0XHRcdGNhbGxiYWNrKF9vcHRzKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRwcm9taXNlLnJlamVjdChlcnJvcignaW52YWxpZF9zZXNzaW9uJywgJ1RoZXJlIHdhcyBubyBzZXNzaW9uIHRvIHJlbW92ZScpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJvbWlzZS5wcm94eTtcblx0fSxcblxuXHQvLyBSZXR1cm5zIGFsbCB0aGUgc2Vzc2lvbnMgdGhhdCBhcmUgc3Vic2NyaWJlZCB0b29cblx0Ly8gQHBhcmFtIHN0cmluZyBvcHRpb25hbCwgbmFtZSBvZiB0aGUgc2VydmljZSB0byBnZXQgaW5mb3JtYXRpb24gYWJvdXQuXG5cdGdldEF1dGhSZXNwb25zZTogZnVuY3Rpb24oc2VydmljZSkge1xuXG5cdFx0Ly8gSWYgdGhlIHNlcnZpY2UgZG9lc24ndCBleGlzdFxuXHRcdHNlcnZpY2UgPSBzZXJ2aWNlIHx8IHRoaXMuc2V0dGluZ3MuZGVmYXVsdF9zZXJ2aWNlO1xuXG5cdFx0aWYgKCFzZXJ2aWNlIHx8ICEoc2VydmljZSBpbiB0aGlzLnNlcnZpY2VzKSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMudXRpbHMuc3RvcmUoc2VydmljZSkgfHwgbnVsbDtcblx0fSxcblxuXHQvLyBFdmVudHM6IHBsYWNlaG9sZGVyIGZvciB0aGUgZXZlbnRzXG5cdGV2ZW50czoge31cbn0pO1xuXG4vLyBDb3JlIHV0aWxpdGllc1xuaGVsbG8udXRpbHMuZXh0ZW5kKGhlbGxvLnV0aWxzLCB7XG5cblx0Ly8gRXJyb3Jcblx0ZXJyb3I6IGZ1bmN0aW9uKGNvZGUsIG1lc3NhZ2UpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0Y29kZTogY29kZSxcblx0XHRcdFx0bWVzc2FnZTogbWVzc2FnZVxuXHRcdFx0fVxuXHRcdH07XG5cdH0sXG5cblx0Ly8gQXBwZW5kIHRoZSBxdWVyeXN0cmluZyB0byBhIHVybFxuXHQvLyBAcGFyYW0gc3RyaW5nIHVybFxuXHQvLyBAcGFyYW0gb2JqZWN0IHBhcmFtZXRlcnNcblx0cXM6IGZ1bmN0aW9uKHVybCwgcGFyYW1zLCBmb3JtYXRGdW5jdGlvbikge1xuXG5cdFx0aWYgKHBhcmFtcykge1xuXG5cdFx0XHQvLyBTZXQgZGVmYXVsdCBmb3JtYXR0aW5nIGZ1bmN0aW9uXG5cdFx0XHRmb3JtYXRGdW5jdGlvbiA9IGZvcm1hdEZ1bmN0aW9uIHx8IGVuY29kZVVSSUNvbXBvbmVudDtcblxuXHRcdFx0Ly8gT3ZlcnJpZGUgdGhlIGl0ZW1zIGluIHRoZSBVUkwgd2hpY2ggYWxyZWFkeSBleGlzdFxuXHRcdFx0Zm9yICh2YXIgeCBpbiBwYXJhbXMpIHtcblx0XHRcdFx0dmFyIHN0ciA9ICcoW1xcXFw/XFxcXCZdKScgKyB4ICsgJz1bXlxcXFwmXSonO1xuXHRcdFx0XHR2YXIgcmVnID0gbmV3IFJlZ0V4cChzdHIpO1xuXHRcdFx0XHRpZiAodXJsLm1hdGNoKHJlZykpIHtcblx0XHRcdFx0XHR1cmwgPSB1cmwucmVwbGFjZShyZWcsICckMScgKyB4ICsgJz0nICsgZm9ybWF0RnVuY3Rpb24ocGFyYW1zW3hdKSk7XG5cdFx0XHRcdFx0ZGVsZXRlIHBhcmFtc1t4XTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghdGhpcy5pc0VtcHR5KHBhcmFtcykpIHtcblx0XHRcdHJldHVybiB1cmwgKyAodXJsLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nKSArIHRoaXMucGFyYW0ocGFyYW1zLCBmb3JtYXRGdW5jdGlvbik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHVybDtcblx0fSxcblxuXHQvLyBQYXJhbVxuXHQvLyBFeHBsb2RlL2VuY29kZSB0aGUgcGFyYW1ldGVycyBvZiBhbiBVUkwgc3RyaW5nL29iamVjdFxuXHQvLyBAcGFyYW0gc3RyaW5nIHMsIHN0cmluZyB0byBkZWNvZGVcblx0cGFyYW06IGZ1bmN0aW9uKHMsIGZvcm1hdEZ1bmN0aW9uKSB7XG5cdFx0dmFyIGI7XG5cdFx0dmFyIGEgPSB7fTtcblx0XHR2YXIgbTtcblxuXHRcdGlmICh0eXBlb2YgKHMpID09PSAnc3RyaW5nJykge1xuXG5cdFx0XHRmb3JtYXRGdW5jdGlvbiA9IGZvcm1hdEZ1bmN0aW9uIHx8IGRlY29kZVVSSUNvbXBvbmVudDtcblxuXHRcdFx0bSA9IHMucmVwbGFjZSgvXltcXCNcXD9dLywgJycpLm1hdGNoKC8oW149XFwvXFwmXSspPShbXlxcJl0rKS9nKTtcblx0XHRcdGlmIChtKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGIgPSBtW2ldLm1hdGNoKC8oW149XSspPSguKikvKTtcblx0XHRcdFx0XHRhW2JbMV1dID0gZm9ybWF0RnVuY3Rpb24oYlsyXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGE7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXG5cdFx0XHRmb3JtYXRGdW5jdGlvbiA9IGZvcm1hdEZ1bmN0aW9uIHx8IGVuY29kZVVSSUNvbXBvbmVudDtcblxuXHRcdFx0dmFyIG8gPSBzO1xuXG5cdFx0XHRhID0gW107XG5cblx0XHRcdGZvciAodmFyIHggaW4gbykge2lmIChvLmhhc093blByb3BlcnR5KHgpKSB7XG5cdFx0XHRcdGlmIChvLmhhc093blByb3BlcnR5KHgpKSB7XG5cdFx0XHRcdFx0YS5wdXNoKFt4LCBvW3hdID09PSAnPycgPyAnPycgOiBmb3JtYXRGdW5jdGlvbihvW3hdKV0uam9pbignPScpKTtcblx0XHRcdFx0fVxuXHRcdFx0fX1cblxuXHRcdFx0cmV0dXJuIGEuam9pbignJicpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBMb2NhbCBzdG9yYWdlIGZhY2FkZVxuXHRzdG9yZTogKGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIGEgPSBbJ2xvY2FsU3RvcmFnZScsICdzZXNzaW9uU3RvcmFnZSddO1xuXHRcdHZhciBpID0gLTE7XG5cdFx0dmFyIHByZWZpeCA9ICd0ZXN0JztcblxuXHRcdC8vIFNldCBMb2NhbFN0b3JhZ2Vcblx0XHR2YXIgbG9jYWxTdG9yYWdlO1xuXG5cdFx0d2hpbGUgKGFbKytpXSkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gSW4gQ2hyb21lIHdpdGggY29va2llcyBibG9ja2VkLCBjYWxsaW5nIGxvY2FsU3RvcmFnZSB0aHJvd3MgYW4gZXJyb3Jcblx0XHRcdFx0bG9jYWxTdG9yYWdlID0gd2luZG93W2FbaV1dO1xuXHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwcmVmaXggKyBpLCBpKTtcblx0XHRcdFx0bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0ocHJlZml4ICsgaSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2F0Y2ggKGUpIHtcblx0XHRcdFx0bG9jYWxTdG9yYWdlID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIWxvY2FsU3RvcmFnZSkge1xuXG5cdFx0XHR2YXIgY2FjaGUgPSBudWxsO1xuXG5cdFx0XHRsb2NhbFN0b3JhZ2UgPSB7XG5cdFx0XHRcdGdldEl0ZW06IGZ1bmN0aW9uKHByb3ApIHtcblx0XHRcdFx0XHRwcm9wID0gcHJvcCArICc9Jztcblx0XHRcdFx0XHR2YXIgbSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0dmFyIF9tID0gbVtpXS5yZXBsYWNlKC8oXlxccyt8XFxzKyQpLywgJycpO1xuXHRcdFx0XHRcdFx0aWYgKF9tICYmIF9tLmluZGV4T2YocHJvcCkgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIF9tLnN1YnN0cihwcm9wLmxlbmd0aCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGNhY2hlO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdHNldEl0ZW06IGZ1bmN0aW9uKHByb3AsIHZhbHVlKSB7XG5cdFx0XHRcdFx0Y2FjaGUgPSB2YWx1ZTtcblx0XHRcdFx0XHRkb2N1bWVudC5jb29raWUgPSBwcm9wICsgJz0nICsgdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdC8vIEZpbGwgdGhlIGNhY2hlIHVwXG5cdFx0XHRjYWNoZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoZWxsbycpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldCgpIHtcblx0XHRcdHZhciBqc29uID0ge307XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRqc29uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGVsbG8nKSkgfHwge307XG5cdFx0XHR9XG5cdFx0XHRjYXRjaCAoZSkge31cblxuXHRcdFx0cmV0dXJuIGpzb247XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2V0KGpzb24pIHtcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdoZWxsbycsIEpTT04uc3RyaW5naWZ5KGpzb24pKTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0IGxvY2FsIHN0b3JhZ2Vcblx0XHRyZXR1cm4gZnVuY3Rpb24obmFtZSwgdmFsdWUsIGRheXMpIHtcblxuXHRcdFx0Ly8gTG9jYWwgc3RvcmFnZVxuXHRcdFx0dmFyIGpzb24gPSBnZXQoKTtcblxuXHRcdFx0aWYgKG5hbWUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRyZXR1cm4ganNvbltuYW1lXSB8fCBudWxsO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAobmFtZSAmJiB2YWx1ZSA9PT0gbnVsbCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGRlbGV0ZSBqc29uW25hbWVdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0anNvbltuYW1lXSA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKG5hbWUpIHtcblx0XHRcdFx0anNvbltuYW1lXSA9IHZhbHVlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHJldHVybiBqc29uO1xuXHRcdFx0fVxuXG5cdFx0XHRzZXQoanNvbik7XG5cblx0XHRcdHJldHVybiBqc29uIHx8IG51bGw7XG5cdFx0fTtcblxuXHR9KSgpLFxuXG5cdC8vIENyZWF0ZSBhbmQgQXBwZW5kIG5ldyBET00gZWxlbWVudHNcblx0Ly8gQHBhcmFtIG5vZGUgc3RyaW5nXG5cdC8vIEBwYXJhbSBhdHRyIG9iamVjdCBsaXRlcmFsXG5cdC8vIEBwYXJhbSBkb20vc3RyaW5nXG5cdGFwcGVuZDogZnVuY3Rpb24obm9kZSwgYXR0ciwgdGFyZ2V0KSB7XG5cblx0XHR2YXIgbiA9IHR5cGVvZiAobm9kZSkgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlKSA6IG5vZGU7XG5cblx0XHRpZiAodHlwZW9mIChhdHRyKSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdGlmICgndGFnTmFtZScgaW4gYXR0cikge1xuXHRcdFx0XHR0YXJnZXQgPSBhdHRyO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGZvciAodmFyIHggaW4gYXR0cikge2lmIChhdHRyLmhhc093blByb3BlcnR5KHgpKSB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiAoYXR0clt4XSkgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciB5IGluIGF0dHJbeF0pIHtpZiAoYXR0clt4XS5oYXNPd25Qcm9wZXJ0eSh5KSkge1xuXHRcdFx0XHRcdFx0XHRuW3hdW3ldID0gYXR0clt4XVt5XTtcblx0XHRcdFx0XHRcdH19XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKHggPT09ICdodG1sJykge1xuXHRcdFx0XHRcdFx0bi5pbm5lckhUTUwgPSBhdHRyW3hdO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIElFIGRvZXNuJ3QgbGlrZSB1cyBzZXR0aW5nIG1ldGhvZHMgd2l0aCBzZXRBdHRyaWJ1dGVcblx0XHRcdFx0XHRlbHNlIGlmICghL15vbi8udGVzdCh4KSkge1xuXHRcdFx0XHRcdFx0bi5zZXRBdHRyaWJ1dGUoeCwgYXR0clt4XSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0blt4XSA9IGF0dHJbeF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICh0YXJnZXQgPT09ICdib2R5Jykge1xuXHRcdFx0KGZ1bmN0aW9uIHNlbGYoKSB7XG5cdFx0XHRcdGlmIChkb2N1bWVudC5ib2R5KSB7XG5cdFx0XHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KHNlbGYsIDE2KTtcblx0XHRcdFx0fVxuXHRcdFx0fSkoKTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodHlwZW9mICh0YXJnZXQpID09PSAnb2JqZWN0Jykge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKG4pO1xuXHRcdH1cblx0XHRlbHNlIGlmICh0eXBlb2YgKHRhcmdldCkgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YXJnZXQpWzBdLmFwcGVuZENoaWxkKG4pO1xuXHRcdH1cblxuXHRcdHJldHVybiBuO1xuXHR9LFxuXG5cdC8vIEFuIGVhc3kgd2F5IHRvIGNyZWF0ZSBhIGhpZGRlbiBpZnJhbWVcblx0Ly8gQHBhcmFtIHN0cmluZyBzcmNcblx0aWZyYW1lOiBmdW5jdGlvbihzcmMpIHtcblx0XHR0aGlzLmFwcGVuZCgnaWZyYW1lJywge3NyYzogc3JjLCBzdHlsZToge3Bvc2l0aW9uOidhYnNvbHV0ZScsIGxlZnQ6ICctMTAwMHB4JywgYm90dG9tOiAwLCBoZWlnaHQ6ICcxcHgnLCB3aWR0aDogJzFweCd9fSwgJ2JvZHknKTtcblx0fSxcblxuXHQvLyBSZWN1cnNpdmUgbWVyZ2UgdHdvIG9iamVjdHMgaW50byBvbmUsIHNlY29uZCBwYXJhbWV0ZXIgb3ZlcmlkZXMgdGhlIGZpcnN0XG5cdC8vIEBwYXJhbSBhIGFycmF5XG5cdG1lcmdlOiBmdW5jdGlvbigvKiBBcmdzOiBhLCBiLCBjLCAuLiBuICovKSB7XG5cdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHRcdGFyZ3MudW5zaGlmdCh7fSk7XG5cdFx0cmV0dXJuIHRoaXMuZXh0ZW5kLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHR9LFxuXG5cdC8vIE1ha2VzIGl0IGVhc2llciB0byBhc3NpZ24gcGFyYW1ldGVycywgd2hlcmUgc29tZSBhcmUgb3B0aW9uYWxcblx0Ly8gQHBhcmFtIG8gb2JqZWN0XG5cdC8vIEBwYXJhbSBhIGFyZ3VtZW50c1xuXHRhcmdzOiBmdW5jdGlvbihvLCBhcmdzKSB7XG5cblx0XHR2YXIgcCA9IHt9O1xuXHRcdHZhciBpID0gMDtcblx0XHR2YXIgdCA9IG51bGw7XG5cdFx0dmFyIHggPSBudWxsO1xuXG5cdFx0Ly8gJ3gnIGlzIHRoZSBmaXJzdCBrZXkgaW4gdGhlIGxpc3Qgb2Ygb2JqZWN0IHBhcmFtZXRlcnNcblx0XHRmb3IgKHggaW4gbykge2lmIChvLmhhc093blByb3BlcnR5KHgpKSB7XG5cdFx0XHRicmVhaztcblx0XHR9fVxuXG5cdFx0Ly8gUGFzc2luZyBpbiBoYXNoIG9iamVjdCBvZiBhcmd1bWVudHM/XG5cdFx0Ly8gV2hlcmUgdGhlIGZpcnN0IGFyZ3VtZW50IGNhbid0IGJlIGFuIG9iamVjdFxuXHRcdGlmICgoYXJncy5sZW5ndGggPT09IDEpICYmICh0eXBlb2YgKGFyZ3NbMF0pID09PSAnb2JqZWN0JykgJiYgb1t4XSAhPSAnbyEnKSB7XG5cblx0XHRcdC8vIENvdWxkIHRoaXMgb2JqZWN0IHN0aWxsIGJlbG9uZyB0byBhIHByb3BlcnR5P1xuXHRcdFx0Ly8gQ2hlY2sgdGhlIG9iamVjdCBrZXlzIGlmIHRoZXkgbWF0Y2ggYW55IG9mIHRoZSBwcm9wZXJ0eSBrZXlzXG5cdFx0XHRmb3IgKHggaW4gYXJnc1swXSkge2lmIChvLmhhc093blByb3BlcnR5KHgpKSB7XG5cdFx0XHRcdC8vIERvZXMgdGhpcyBrZXkgZXhpc3QgaW4gdGhlIHByb3BlcnR5IGxpc3Q/XG5cdFx0XHRcdGlmICh4IGluIG8pIHtcblx0XHRcdFx0XHQvLyBZZXMgdGhpcyBrZXkgZG9lcyBleGlzdCBzbyBpdHMgbW9zdCBsaWtlbHkgdGhpcyBmdW5jdGlvbiBoYXMgYmVlbiBpbnZva2VkIHdpdGggYW4gb2JqZWN0IHBhcmFtZXRlclxuXHRcdFx0XHRcdC8vIFJldHVybiBmaXJzdCBhcmd1bWVudCBhcyB0aGUgaGFzaCBvZiBhbGwgYXJndW1lbnRzXG5cdFx0XHRcdFx0cmV0dXJuIGFyZ3NbMF07XG5cdFx0XHRcdH1cblx0XHRcdH19XG5cdFx0fVxuXG5cdFx0Ly8gRWxzZSBsb29wIHRocm91Z2ggYW5kIGFjY291bnQgZm9yIHRoZSBtaXNzaW5nIG9uZXMuXG5cdFx0Zm9yICh4IGluIG8pIHtpZiAoby5oYXNPd25Qcm9wZXJ0eSh4KSkge1xuXG5cdFx0XHR0ID0gdHlwZW9mIChhcmdzW2ldKTtcblxuXHRcdFx0aWYgKCh0eXBlb2YgKG9beF0pID09PSAnZnVuY3Rpb24nICYmIG9beF0udGVzdChhcmdzW2ldKSkgfHwgKHR5cGVvZiAob1t4XSkgPT09ICdzdHJpbmcnICYmIChcblx0XHRcdChvW3hdLmluZGV4T2YoJ3MnKSA+IC0xICYmIHQgPT09ICdzdHJpbmcnKSB8fFxuXHRcdFx0KG9beF0uaW5kZXhPZignbycpID4gLTEgJiYgdCA9PT0gJ29iamVjdCcpIHx8XG5cdFx0XHQob1t4XS5pbmRleE9mKCdpJykgPiAtMSAmJiB0ID09PSAnbnVtYmVyJykgfHxcblx0XHRcdChvW3hdLmluZGV4T2YoJ2EnKSA+IC0xICYmIHQgPT09ICdvYmplY3QnKSB8fFxuXHRcdFx0KG9beF0uaW5kZXhPZignZicpID4gLTEgJiYgdCA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdCkpXG5cdFx0XHQpIHtcblx0XHRcdFx0cFt4XSA9IGFyZ3NbaSsrXTtcblx0XHRcdH1cblxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIChvW3hdKSA9PT0gJ3N0cmluZycgJiYgb1t4XS5pbmRleE9mKCchJykgPiAtMSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fX1cblxuXHRcdHJldHVybiBwO1xuXHR9LFxuXG5cdC8vIFJldHVybnMgYSBVUkwgaW5zdGFuY2Vcblx0dXJsOiBmdW5jdGlvbihwYXRoKSB7XG5cblx0XHQvLyBJZiB0aGUgcGF0aCBpcyBlbXB0eVxuXHRcdGlmICghcGF0aCkge1xuXHRcdFx0cmV0dXJuIHdpbmRvdy5sb2NhdGlvbjtcblx0XHR9XG5cblx0XHQvLyBDaHJvbWUgYW5kIEZpcmVGb3ggc3VwcG9ydCBuZXcgVVJMKCkgdG8gZXh0cmFjdCBVUkwgb2JqZWN0c1xuXHRcdGVsc2UgaWYgKHdpbmRvdy5VUkwgJiYgVVJMIGluc3RhbmNlb2YgRnVuY3Rpb24gJiYgVVJMLmxlbmd0aCAhPT0gMCkge1xuXHRcdFx0cmV0dXJuIG5ldyBVUkwocGF0aCwgd2luZG93LmxvY2F0aW9uKTtcblx0XHR9XG5cblx0XHQvLyBVZ2x5IHNoaW0sIGl0IHdvcmtzIVxuXHRcdGVsc2Uge1xuXHRcdFx0dmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cdFx0XHRhLmhyZWYgPSBwYXRoO1xuXHRcdFx0cmV0dXJuIGEuY2xvbmVOb2RlKGZhbHNlKTtcblx0XHR9XG5cdH0sXG5cblx0ZGlmZjogZnVuY3Rpb24oYSwgYikge1xuXHRcdHJldHVybiBiLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRyZXR1cm4gYS5pbmRleE9mKGl0ZW0pID09PSAtMTtcblx0XHR9KTtcblx0fSxcblxuXHQvLyBHZXQgdGhlIGRpZmZlcmVudCBoYXNoIG9mIHByb3BlcnRpZXMgdW5pcXVlIHRvIGBhYCwgYW5kIG5vdCBpbiBgYmBcblx0ZGlmZktleTogZnVuY3Rpb24oYSwgYikge1xuXHRcdGlmIChhIHx8ICFiKSB7XG5cdFx0XHR2YXIgciA9IHt9O1xuXHRcdFx0Zm9yICh2YXIgeCBpbiBhKSB7XG5cdFx0XHRcdC8vIERvZXMgdGhlIHByb3BlcnR5IG5vdCBleGlzdD9cblx0XHRcdFx0aWYgKCEoeCBpbiBiKSkge1xuXHRcdFx0XHRcdHJbeF0gPSBhW3hdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByO1xuXHRcdH1cblxuXHRcdHJldHVybiBhO1xuXHR9LFxuXG5cdC8vIFVuaXF1ZVxuXHQvLyBSZW1vdmUgZHVwbGljYXRlIGFuZCBudWxsIHZhbHVlcyBmcm9tIGFuIGFycmF5XG5cdC8vIEBwYXJhbSBhIGFycmF5XG5cdHVuaXF1ZTogZnVuY3Rpb24oYSkge1xuXHRcdGlmICghQXJyYXkuaXNBcnJheShhKSkgeyByZXR1cm4gW107IH1cblxuXHRcdHJldHVybiBhLmZpbHRlcihmdW5jdGlvbihpdGVtLCBpbmRleCkge1xuXHRcdFx0Ly8gSXMgdGhpcyB0aGUgZmlyc3QgbG9jYXRpb24gb2YgaXRlbVxuXHRcdFx0cmV0dXJuIGEuaW5kZXhPZihpdGVtKSA9PT0gaW5kZXg7XG5cdFx0fSk7XG5cdH0sXG5cblx0aXNFbXB0eTogZnVuY3Rpb24ob2JqKSB7XG5cblx0XHQvLyBTY2FsYXJcblx0XHRpZiAoIW9iailcblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0Ly8gQXJyYXlcblx0XHRpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG5cdFx0XHRyZXR1cm4gIW9iai5sZW5ndGg7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHR5cGVvZiAob2JqKSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdC8vIE9iamVjdFxuXHRcdFx0Zm9yICh2YXIga2V5IGluIG9iaikge1xuXHRcdFx0XHRpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHQvL2pzY3M6ZGlzYWJsZVxuXG5cdC8qIVxuXHQgKiogIFRoZW5hYmxlIC0tIEVtYmVkZGFibGUgTWluaW11bSBTdHJpY3RseS1Db21wbGlhbnQgUHJvbWlzZXMvQSsgMS4xLjEgVGhlbmFibGVcblx0ICoqICBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNCBSYWxmIFMuIEVuZ2Vsc2NoYWxsIDxodHRwOi8vZW5nZWxzY2hhbGwuY29tPlxuXHQgKiogIExpY2Vuc2VkIHVuZGVyIFRoZSBNSVQgTGljZW5zZSA8aHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVD5cblx0ICoqICBTb3VyY2UtQ29kZSBkaXN0cmlidXRlZCBvbiA8aHR0cDovL2dpdGh1Yi5jb20vcnNlL3RoZW5hYmxlPlxuXHQgKi9cblx0UHJvbWlzZTogKGZ1bmN0aW9uKCl7XG5cdFx0LyogIHByb21pc2Ugc3RhdGVzIFtQcm9taXNlcy9BKyAyLjFdICAqL1xuXHRcdHZhciBTVEFURV9QRU5ESU5HICAgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjEuMV0gICovXG5cdFx0dmFyIFNUQVRFX0ZVTEZJTExFRCA9IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMS4yXSAgKi9cblx0XHR2YXIgU1RBVEVfUkVKRUNURUQgID0gMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4xLjNdICAqL1xuXG5cdFx0LyogIHByb21pc2Ugb2JqZWN0IGNvbnN0cnVjdG9yICAqL1xuXHRcdHZhciBhcGkgPSBmdW5jdGlvbiAoZXhlY3V0b3IpIHtcblx0XHRcdC8qICBvcHRpb25hbGx5IHN1cHBvcnQgbm9uLWNvbnN0cnVjdG9yL3BsYWluLWZ1bmN0aW9uIGNhbGwgICovXG5cdFx0XHRpZiAoISh0aGlzIGluc3RhbmNlb2YgYXBpKSlcblx0XHRcdFx0cmV0dXJuIG5ldyBhcGkoZXhlY3V0b3IpO1xuXG5cdFx0XHQvKiAgaW5pdGlhbGl6ZSBvYmplY3QgICovXG5cdFx0XHR0aGlzLmlkICAgICAgICAgICA9IFwiVGhlbmFibGUvMS4wLjZcIjtcblx0XHRcdHRoaXMuc3RhdGUgICAgICAgID0gU1RBVEVfUEVORElORzsgLyogIGluaXRpYWwgc3RhdGUgICovXG5cdFx0XHR0aGlzLmZ1bGZpbGxWYWx1ZSA9IHVuZGVmaW5lZDsgICAgIC8qICBpbml0aWFsIHZhbHVlICAqLyAgICAgLyogIFtQcm9taXNlcy9BKyAxLjMsIDIuMS4yLjJdICAqL1xuXHRcdFx0dGhpcy5yZWplY3RSZWFzb24gPSB1bmRlZmluZWQ7ICAgICAvKiAgaW5pdGlhbCByZWFzb24gKi8gICAgIC8qICBbUHJvbWlzZXMvQSsgMS41LCAyLjEuMy4yXSAgKi9cblx0XHRcdHRoaXMub25GdWxmaWxsZWQgID0gW107ICAgICAgICAgICAgLyogIGluaXRpYWwgaGFuZGxlcnMgICovXG5cdFx0XHR0aGlzLm9uUmVqZWN0ZWQgICA9IFtdOyAgICAgICAgICAgIC8qICBpbml0aWFsIGhhbmRsZXJzICAqL1xuXG5cdFx0XHQvKiAgcHJvdmlkZSBvcHRpb25hbCBpbmZvcm1hdGlvbi1oaWRpbmcgcHJveHkgICovXG5cdFx0XHR0aGlzLnByb3h5ID0ge1xuXHRcdFx0XHR0aGVuOiB0aGlzLnRoZW4uYmluZCh0aGlzKVxuXHRcdFx0fTtcblxuXHRcdFx0LyogIHN1cHBvcnQgb3B0aW9uYWwgZXhlY3V0b3IgZnVuY3Rpb24gICovXG5cdFx0XHRpZiAodHlwZW9mIGV4ZWN1dG9yID09PSBcImZ1bmN0aW9uXCIpXG5cdFx0XHRcdGV4ZWN1dG9yLmNhbGwodGhpcywgdGhpcy5mdWxmaWxsLmJpbmQodGhpcyksIHRoaXMucmVqZWN0LmJpbmQodGhpcykpO1xuXHRcdH07XG5cblx0XHQvKiAgcHJvbWlzZSBBUEkgbWV0aG9kcyAgKi9cblx0XHRhcGkucHJvdG90eXBlID0ge1xuXHRcdFx0LyogIHByb21pc2UgcmVzb2x2aW5nIG1ldGhvZHMgICovXG5cdFx0XHRmdWxmaWxsOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIGRlbGl2ZXIodGhpcywgU1RBVEVfRlVMRklMTEVELCBcImZ1bGZpbGxWYWx1ZVwiLCB2YWx1ZSk7IH0sXG5cdFx0XHRyZWplY3Q6ICBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIGRlbGl2ZXIodGhpcywgU1RBVEVfUkVKRUNURUQsICBcInJlamVjdFJlYXNvblwiLCB2YWx1ZSk7IH0sXG5cblx0XHRcdC8qICBcIlRoZSB0aGVuIE1ldGhvZFwiIFtQcm9taXNlcy9BKyAxLjEsIDEuMiwgMi4yXSAgKi9cblx0XHRcdHRoZW46IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuXHRcdFx0XHR2YXIgY3VyciA9IHRoaXM7XG5cdFx0XHRcdHZhciBuZXh0ID0gbmV3IGFwaSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjddICAqL1xuXHRcdFx0XHRjdXJyLm9uRnVsZmlsbGVkLnB1c2goXG5cdFx0XHRcdFx0cmVzb2x2ZXIob25GdWxmaWxsZWQsIG5leHQsIFwiZnVsZmlsbFwiKSk7ICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjIvMi4yLjZdICAqL1xuXHRcdFx0XHRjdXJyLm9uUmVqZWN0ZWQucHVzaChcblx0XHRcdFx0XHRyZXNvbHZlcihvblJlamVjdGVkLCAgbmV4dCwgXCJyZWplY3RcIiApKTsgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuMy8yLjIuNl0gICovXG5cdFx0XHRcdGV4ZWN1dGUoY3Vycik7XG5cdFx0XHRcdHJldHVybiBuZXh0LnByb3h5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjcsIDMuM10gICovXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8qICBkZWxpdmVyIGFuIGFjdGlvbiAgKi9cblx0XHR2YXIgZGVsaXZlciA9IGZ1bmN0aW9uIChjdXJyLCBzdGF0ZSwgbmFtZSwgdmFsdWUpIHtcblx0XHRcdGlmIChjdXJyLnN0YXRlID09PSBTVEFURV9QRU5ESU5HKSB7XG5cdFx0XHRcdGN1cnIuc3RhdGUgPSBzdGF0ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4xLjIuMSwgMi4xLjMuMV0gICovXG5cdFx0XHRcdGN1cnJbbmFtZV0gPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4xLjIuMiwgMi4xLjMuMl0gICovXG5cdFx0XHRcdGV4ZWN1dGUoY3Vycik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gY3Vycjtcblx0XHR9O1xuXG5cdFx0LyogIGV4ZWN1dGUgYWxsIGhhbmRsZXJzICAqL1xuXHRcdHZhciBleGVjdXRlID0gZnVuY3Rpb24gKGN1cnIpIHtcblx0XHRcdGlmIChjdXJyLnN0YXRlID09PSBTVEFURV9GVUxGSUxMRUQpXG5cdFx0XHRcdGV4ZWN1dGVfaGFuZGxlcnMoY3VyciwgXCJvbkZ1bGZpbGxlZFwiLCBjdXJyLmZ1bGZpbGxWYWx1ZSk7XG5cdFx0XHRlbHNlIGlmIChjdXJyLnN0YXRlID09PSBTVEFURV9SRUpFQ1RFRClcblx0XHRcdFx0ZXhlY3V0ZV9oYW5kbGVycyhjdXJyLCBcIm9uUmVqZWN0ZWRcIiwgIGN1cnIucmVqZWN0UmVhc29uKTtcblx0XHR9O1xuXG5cdFx0LyogIGV4ZWN1dGUgcGFydGljdWxhciBzZXQgb2YgaGFuZGxlcnMgICovXG5cdFx0dmFyIGV4ZWN1dGVfaGFuZGxlcnMgPSBmdW5jdGlvbiAoY3VyciwgbmFtZSwgdmFsdWUpIHtcblx0XHRcdC8qIGdsb2JhbCBwcm9jZXNzOiB0cnVlICovXG5cdFx0XHQvKiBnbG9iYWwgc2V0SW1tZWRpYXRlOiB0cnVlICovXG5cdFx0XHQvKiBnbG9iYWwgc2V0VGltZW91dDogdHJ1ZSAqL1xuXG5cdFx0XHQvKiAgc2hvcnQtY2lyY3VpdCBwcm9jZXNzaW5nICAqL1xuXHRcdFx0aWYgKGN1cnJbbmFtZV0ubGVuZ3RoID09PSAwKVxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdC8qICBpdGVyYXRlIG92ZXIgYWxsIGhhbmRsZXJzLCBleGFjdGx5IG9uY2UgICovXG5cdFx0XHR2YXIgaGFuZGxlcnMgPSBjdXJyW25hbWVdO1xuXHRcdFx0Y3VycltuYW1lXSA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjIuMywgMi4yLjMuM10gICovXG5cdFx0XHR2YXIgZnVuYyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVycy5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHRoYW5kbGVyc1tpXSh2YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjVdICAqL1xuXHRcdFx0fTtcblxuXHRcdFx0LyogIGV4ZWN1dGUgcHJvY2VkdXJlIGFzeW5jaHJvbm91c2x5ICAqLyAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjQsIDMuMV0gICovXG5cdFx0XHRpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHByb2Nlc3MubmV4dFRpY2sgPT09IFwiZnVuY3Rpb25cIilcblx0XHRcdFx0cHJvY2Vzcy5uZXh0VGljayhmdW5jKTtcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIilcblx0XHRcdFx0c2V0SW1tZWRpYXRlKGZ1bmMpO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmMsIDApO1xuXHRcdH07XG5cblx0XHQvKiAgZ2VuZXJhdGUgYSByZXNvbHZlciBmdW5jdGlvbiAgKi9cblx0XHR2YXIgcmVzb2x2ZXIgPSBmdW5jdGlvbiAoY2IsIG5leHQsIG1ldGhvZCkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGNiICE9PSBcImZ1bmN0aW9uXCIpICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjEsIDIuMi43LjMsIDIuMi43LjRdICAqL1xuXHRcdFx0XHRcdG5leHRbbWV0aG9kXS5jYWxsKG5leHQsIHZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjIuNy4zLCAyLjIuNy40XSAgKi9cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dmFyIHJlc3VsdDtcblx0XHRcdFx0XHR0cnkgeyByZXN1bHQgPSBjYih2YWx1ZSk7IH0gICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjIuMSwgMi4yLjMuMSwgMi4yLjUsIDMuMl0gICovXG5cdFx0XHRcdFx0Y2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdG5leHQucmVqZWN0KGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMi43LjJdICAqL1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXNvbHZlKG5leHQsIHJlc3VsdCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4yLjcuMV0gICovXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdC8qICBcIlByb21pc2UgUmVzb2x1dGlvbiBQcm9jZWR1cmVcIiAgKi8gICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuM10gICovXG5cdFx0dmFyIHJlc29sdmUgPSBmdW5jdGlvbiAocHJvbWlzZSwgeCkge1xuXHRcdFx0LyogIHNhbml0eSBjaGVjayBhcmd1bWVudHMgICovICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjFdICAqL1xuXHRcdFx0aWYgKHByb21pc2UgPT09IHggfHwgcHJvbWlzZS5wcm94eSA9PT0geCkge1xuXHRcdFx0XHRwcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKFwiY2Fubm90IHJlc29sdmUgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0LyogIHN1cmdpY2FsbHkgY2hlY2sgZm9yIGEgXCJ0aGVuXCIgbWV0aG9kXG5cdFx0XHRcdChtYWlubHkgdG8ganVzdCBjYWxsIHRoZSBcImdldHRlclwiIG9mIFwidGhlblwiIG9ubHkgb25jZSkgICovXG5cdFx0XHR2YXIgdGhlbjtcblx0XHRcdGlmICgodHlwZW9mIHggPT09IFwib2JqZWN0XCIgJiYgeCAhPT0gbnVsbCkgfHwgdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHR0cnkgeyB0aGVuID0geC50aGVuOyB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjEsIDMuNV0gICovXG5cdFx0XHRcdGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0cHJvbWlzZS5yZWplY3QoZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjJdICAqL1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvKiAgaGFuZGxlIG93biBUaGVuYWJsZXMgICAgW1Byb21pc2VzL0ErIDIuMy4yXVxuXHRcdFx0XHRhbmQgc2ltaWxhciBcInRoZW5hYmxlc1wiIFtQcm9taXNlcy9BKyAyLjMuM10gICovXG5cdFx0XHRpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHR2YXIgcmVzb2x2ZWQgPSBmYWxzZTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvKiAgY2FsbCByZXRyaWV2ZWQgXCJ0aGVuXCIgbWV0aG9kICovICAgICAgICAgICAgICAgICAgLyogIFtQcm9taXNlcy9BKyAyLjMuMy4zXSAgKi9cblx0XHRcdFx0XHR0aGVuLmNhbGwoeCxcblx0XHRcdFx0XHRcdC8qICByZXNvbHZlUHJvbWlzZSAgKi8gICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuMV0gICovXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiAoeSkge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVzb2x2ZWQpIHJldHVybjsgcmVzb2x2ZWQgPSB0cnVlOyAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuM10gICovXG5cdFx0XHRcdFx0XHRcdGlmICh5ID09PSB4KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMy42XSAgKi9cblx0XHRcdFx0XHRcdFx0XHRwcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKFwiY2lyY3VsYXIgdGhlbmFibGUgY2hhaW5cIikpO1xuXHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZShwcm9taXNlLCB5KTtcblx0XHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcdC8qICByZWplY3RQcm9taXNlICAqLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuMl0gICovXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiAocikge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVzb2x2ZWQpIHJldHVybjsgcmVzb2x2ZWQgPSB0cnVlOyAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuM10gICovXG5cdFx0XHRcdFx0XHRcdHByb21pc2UucmVqZWN0KHIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRpZiAoIXJlc29sdmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qICBbUHJvbWlzZXMvQSsgMi4zLjMuMy4zXSAgKi9cblx0XHRcdFx0XHRcdHByb21pc2UucmVqZWN0KGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy4zLjMuNF0gICovXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvKiAgaGFuZGxlIG90aGVyIHZhbHVlcyAgKi9cblx0XHRcdHByb21pc2UuZnVsZmlsbCh4KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgW1Byb21pc2VzL0ErIDIuMy40LCAyLjMuMy40XSAgKi9cblx0XHR9O1xuXG5cdFx0LyogIGV4cG9ydCBBUEkgICovXG5cdFx0cmV0dXJuIGFwaTtcblx0fSkoKSxcblxuXHQvL2pzY3M6ZW5hYmxlXG5cblx0Ly8gRXZlbnRcblx0Ly8gQSBjb250cnVjdG9yIHN1cGVyY2xhc3MgZm9yIGFkZGluZyBldmVudCBtZW50aG9kcywgb24sIG9mZiwgZW1pdC5cblx0RXZlbnQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlcGFyYXRvciA9IC9bXFxzXFwsXSsvO1xuXG5cdFx0Ly8gSWYgdGhpcyBkb2Vzbid0IHN1cHBvcnQgZ2V0UHJvdG90eXBlIHRoZW4gd2UgY2FuJ3QgZ2V0IHByb3RvdHlwZS5ldmVudHMgb2YgdGhlIHBhcmVudFxuXHRcdC8vIFNvIGxldHMgZ2V0IHRoZSBjdXJyZW50IGluc3RhbmNlIGV2ZW50cywgYW5kIGFkZCB0aG9zZSB0byBhIHBhcmVudCBwcm9wZXJ0eVxuXHRcdHRoaXMucGFyZW50ID0ge1xuXHRcdFx0ZXZlbnRzOiB0aGlzLmV2ZW50cyxcblx0XHRcdGZpbmRFdmVudHM6IHRoaXMuZmluZEV2ZW50cyxcblx0XHRcdHBhcmVudDogdGhpcy5wYXJlbnQsXG5cdFx0XHR1dGlsczogdGhpcy51dGlsc1xuXHRcdH07XG5cblx0XHR0aGlzLmV2ZW50cyA9IHt9O1xuXG5cdFx0Ly8gT24sIHN1YnNjcmliZSB0byBldmVudHNcblx0XHQvLyBAcGFyYW0gZXZ0ICAgc3RyaW5nXG5cdFx0Ly8gQHBhcmFtIGNhbGxiYWNrICBmdW5jdGlvblxuXHRcdHRoaXMub24gPSBmdW5jdGlvbihldnQsIGNhbGxiYWNrKSB7XG5cblx0XHRcdGlmIChjYWxsYmFjayAmJiB0eXBlb2YgKGNhbGxiYWNrKSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHR2YXIgYSA9IGV2dC5zcGxpdChzZXBhcmF0b3IpO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcblxuXHRcdFx0XHRcdC8vIEhhcyB0aGlzIGV2ZW50IGFscmVhZHkgYmVlbiBmaXJlZCBvbiB0aGlzIGluc3RhbmNlP1xuXHRcdFx0XHRcdHRoaXMuZXZlbnRzW2FbaV1dID0gW2NhbGxiYWNrXS5jb25jYXQodGhpcy5ldmVudHNbYVtpXV0gfHwgW10pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHQvLyBPZmYsIHVuc3Vic2NyaWJlIHRvIGV2ZW50c1xuXHRcdC8vIEBwYXJhbSBldnQgICBzdHJpbmdcblx0XHQvLyBAcGFyYW0gY2FsbGJhY2sgIGZ1bmN0aW9uXG5cdFx0dGhpcy5vZmYgPSBmdW5jdGlvbihldnQsIGNhbGxiYWNrKSB7XG5cblx0XHRcdHRoaXMuZmluZEV2ZW50cyhldnQsIGZ1bmN0aW9uKG5hbWUsIGluZGV4KSB7XG5cdFx0XHRcdGlmICghY2FsbGJhY2sgfHwgdGhpcy5ldmVudHNbbmFtZV1baW5kZXhdID09PSBjYWxsYmFjaykge1xuXHRcdFx0XHRcdHRoaXMuZXZlbnRzW25hbWVdW2luZGV4XSA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9O1xuXG5cdFx0Ly8gRW1pdFxuXHRcdC8vIFRyaWdnZXJzIGFueSBzdWJzY3JpYmVkIGV2ZW50c1xuXHRcdHRoaXMuZW1pdCA9IGZ1bmN0aW9uKGV2dCAvKiwgZGF0YSwgLi4uICovKSB7XG5cblx0XHRcdC8vIEdldCBhcmd1bWVudHMgYXMgYW4gQXJyYXksIGtub2NrIG9mZiB0aGUgZmlyc3Qgb25lXG5cdFx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cdFx0XHRhcmdzLnB1c2goZXZ0KTtcblxuXHRcdFx0Ly8gSGFuZGxlclxuXHRcdFx0dmFyIGhhbmRsZXIgPSBmdW5jdGlvbihuYW1lLCBpbmRleCkge1xuXG5cdFx0XHRcdC8vIFJlcGxhY2UgdGhlIGxhc3QgcHJvcGVydHkgd2l0aCB0aGUgZXZlbnQgbmFtZVxuXHRcdFx0XHRhcmdzW2FyZ3MubGVuZ3RoIC0gMV0gPSAobmFtZSA9PT0gJyonID8gZXZ0IDogbmFtZSk7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlclxuXHRcdFx0XHR0aGlzLmV2ZW50c1tuYW1lXVtpbmRleF0uYXBwbHkodGhpcywgYXJncyk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBGaW5kIHRoZSBjYWxsYmFja3Mgd2hpY2ggbWF0Y2ggdGhlIGNvbmRpdGlvbiBhbmQgY2FsbFxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHRcdHdoaWxlIChfdGhpcyAmJiBfdGhpcy5maW5kRXZlbnRzKSB7XG5cblx0XHRcdFx0Ly8gRmluZCBldmVudHMgd2hpY2ggbWF0Y2hcblx0XHRcdFx0X3RoaXMuZmluZEV2ZW50cyhldnQgKyAnLConLCBoYW5kbGVyKTtcblx0XHRcdFx0X3RoaXMgPSBfdGhpcy5wYXJlbnQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHQvL1xuXHRcdC8vIEVhc3kgZnVuY3Rpb25zXG5cdFx0dGhpcy5lbWl0QWZ0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdF90aGlzLmVtaXQuYXBwbHkoX3RoaXMsIGFyZ3MpO1xuXHRcdFx0fSwgMCk7XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHR0aGlzLmZpbmRFdmVudHMgPSBmdW5jdGlvbihldnQsIGNhbGxiYWNrKSB7XG5cblx0XHRcdHZhciBhID0gZXZ0LnNwbGl0KHNlcGFyYXRvcik7XG5cblx0XHRcdGZvciAodmFyIG5hbWUgaW4gdGhpcy5ldmVudHMpIHtpZiAodGhpcy5ldmVudHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcblxuXHRcdFx0XHRpZiAoYS5pbmRleE9mKG5hbWUpID4gLTEpIHtcblxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ldmVudHNbbmFtZV0ubGVuZ3RoOyBpKyspIHtcblxuXHRcdFx0XHRcdFx0Ly8gRG9lcyB0aGUgZXZlbnQgaGFuZGxlciBleGlzdD9cblx0XHRcdFx0XHRcdGlmICh0aGlzLmV2ZW50c1tuYW1lXVtpXSkge1xuXHRcdFx0XHRcdFx0XHQvLyBFbWl0IG9uIHRoZSBsb2NhbCBpbnN0YW5jZSBvZiB0aGlzXG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwodGhpcywgbmFtZSwgaSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9fVxuXHRcdH07XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHQvLyBHbG9iYWwgRXZlbnRzXG5cdC8vIEF0dGFjaCB0aGUgY2FsbGJhY2sgdG8gdGhlIHdpbmRvdyBvYmplY3Rcblx0Ly8gUmV0dXJuIGl0cyB1bmlxdWUgcmVmZXJlbmNlXG5cdGdsb2JhbEV2ZW50OiBmdW5jdGlvbihjYWxsYmFjaywgZ3VpZCkge1xuXHRcdC8vIElmIHRoZSBndWlkIGhhcyBub3QgYmVlbiBzdXBwbGllZCB0aGVuIGNyZWF0ZSBhIG5ldyBvbmUuXG5cdFx0Z3VpZCA9IGd1aWQgfHwgJ19oZWxsb2pzXycgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMWUxMiwgMTApLnRvU3RyaW5nKDM2KTtcblxuXHRcdC8vIERlZmluZSB0aGUgY2FsbGJhY2sgZnVuY3Rpb25cblx0XHR3aW5kb3dbZ3VpZF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAoY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKSkge1xuXHRcdFx0XHRcdGRlbGV0ZSB3aW5kb3dbZ3VpZF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHJldHVybiBndWlkO1xuXHR9LFxuXG5cdC8vIFRyaWdnZXIgYSBjbGllbnRzaWRlIHBvcHVwXG5cdC8vIFRoaXMgaGFzIGJlZW4gYXVnbWVudGVkIHRvIHN1cHBvcnQgUGhvbmVHYXBcblx0cG9wdXA6IGZ1bmN0aW9uKHVybCwgcmVkaXJlY3RVcmksIG9wdGlvbnMpIHtcblxuXHRcdHZhciBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHQvLyBNdWx0aSBTY3JlZW4gUG9wdXAgUG9zaXRpb25pbmcgKGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2ODYxMDUwKVxuXHRcdC8vIENyZWRpdDogaHR0cDovL3d3dy54dGYuZGsvMjAxMS8wOC9jZW50ZXItbmV3LXBvcHVwLXdpbmRvdy1ldmVuLW9uLmh0bWxcblx0XHQvLyBGaXhlcyBkdWFsLXNjcmVlbiBwb3NpdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICBNb3N0IGJyb3dzZXJzICAgICAgRmlyZWZveFxuXG5cdFx0aWYgKG9wdGlvbnMuaGVpZ2h0KSB7XG5cdFx0XHR2YXIgZHVhbFNjcmVlblRvcCA9IHdpbmRvdy5zY3JlZW5Ub3AgIT09IHVuZGVmaW5lZCA/IHdpbmRvdy5zY3JlZW5Ub3AgOiBzY3JlZW4udG9wO1xuXHRcdFx0dmFyIGhlaWdodCA9IHNjcmVlbi5oZWlnaHQgfHwgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG5cdFx0XHRvcHRpb25zLnRvcCA9IChvcHRpb25zLnRvcCkgPyBvcHRpb25zLnRvcCA6IHBhcnNlSW50KChoZWlnaHQgLSBvcHRpb25zLmhlaWdodCkgLyAyLCAxMCkgKyBkdWFsU2NyZWVuVG9wO1xuXHRcdH1cblxuXHRcdGlmIChvcHRpb25zLndpZHRoKSB7XG5cdFx0XHR2YXIgZHVhbFNjcmVlbkxlZnQgPSB3aW5kb3cuc2NyZWVuTGVmdCAhPT0gdW5kZWZpbmVkID8gd2luZG93LnNjcmVlbkxlZnQgOiBzY3JlZW4ubGVmdDtcblx0XHRcdHZhciB3aWR0aCA9IHNjcmVlbi53aWR0aCB8fCB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG5cdFx0XHRvcHRpb25zLmxlZnQgPSAob3B0aW9ucy5sZWZ0KSA/IG9wdGlvbnMubGVmdCA6IHBhcnNlSW50KCh3aWR0aCAtIG9wdGlvbnMud2lkdGgpIC8gMiwgMTApICsgZHVhbFNjcmVlbkxlZnQ7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBvcHRpb25zIGludG8gYW4gYXJyYXlcblx0XHR2YXIgb3B0aW9uc0FycmF5ID0gW107XG5cdFx0T2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG5cdFx0XHR2YXIgdmFsdWUgPSBvcHRpb25zW25hbWVdO1xuXHRcdFx0b3B0aW9uc0FycmF5LnB1c2gobmFtZSArICh2YWx1ZSAhPT0gbnVsbCA/ICc9JyArIHZhbHVlIDogJycpKTtcblx0XHR9KTtcblxuXHRcdC8vIENhbGwgdGhlIG9wZW4oKSBmdW5jdGlvbiB3aXRoIHRoZSBpbml0aWFsIHBhdGhcblx0XHQvL1xuXHRcdC8vIE9BdXRoIHJlZGlyZWN0LCBmaXhlcyBVUkkgZnJhZ21lbnRzIGZyb20gYmVpbmcgbG9zdCBpbiBTYWZhcmlcblx0XHQvLyAoVVJJIEZyYWdtZW50cyB3aXRoaW4gMzAyIExvY2F0aW9uIFVSSSBhcmUgbG9zdCBvdmVyIEhUVFBTKVxuXHRcdC8vIExvYWRpbmcgdGhlIHJlZGlyZWN0Lmh0bWwgYmVmb3JlIHRyaWdnZXJpbmcgdGhlIE9BdXRoIEZsb3cgc2VlbXMgdG8gZml4IGl0LlxuXHRcdC8vXG5cdFx0Ly8gRmlyZWZveCAgZGVjb2RlcyBVUkwgZnJhZ21lbnRzIHdoZW4gY2FsbGluZyBsb2NhdGlvbi5oYXNoLlxuXHRcdC8vICAtIFRoaXMgaXMgYmFkIGlmIHRoZSB2YWx1ZSBjb250YWlucyBicmVhayBwb2ludHMgd2hpY2ggYXJlIGVzY2FwZWRcblx0XHQvLyAgLSBIZW5jZSB0aGUgdXJsIG11c3QgYmUgZW5jb2RlZCB0d2ljZSBhcyBpdCBjb250YWlucyBicmVha3BvaW50cy5cblx0XHRpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSAhPT0gLTEgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSA9PT0gLTEpIHtcblx0XHRcdHVybCA9IHJlZGlyZWN0VXJpICsgJyNvYXV0aF9yZWRpcmVjdD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGVuY29kZVVSSUNvbXBvbmVudCh1cmwpKTtcblx0XHR9XG5cblx0XHR2YXIgcG9wdXAgPSB3aW5kb3cub3Blbihcblx0XHRcdHVybCxcblx0XHRcdCdfYmxhbmsnLFxuXHRcdFx0b3B0aW9uc0FycmF5LmpvaW4oJywnKVxuXHRcdCk7XG5cblx0XHRpZiAocG9wdXAgJiYgcG9wdXAuZm9jdXMpIHtcblx0XHRcdHBvcHVwLmZvY3VzKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHBvcHVwO1xuXHR9LFxuXG5cdC8vIE9BdXRoIGFuZCBBUEkgcmVzcG9uc2UgaGFuZGxlclxuXHRyZXNwb25zZUhhbmRsZXI6IGZ1bmN0aW9uKHdpbmRvdywgcGFyZW50KSB7XG5cblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXHRcdHZhciBwO1xuXHRcdHZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcblxuXHRcdC8vIElzIHRoaXMgYW4gYXV0aCByZWxheSBtZXNzYWdlIHdoaWNoIG5lZWRzIHRvIGNhbGwgdGhlIHByb3h5P1xuXHRcdHAgPSBfdGhpcy5wYXJhbShsb2NhdGlvbi5zZWFyY2gpO1xuXG5cdFx0Ly8gT0F1dGgyIG9yIE9BdXRoMSBzZXJ2ZXIgcmVzcG9uc2U/XG5cdFx0aWYgKHAgJiYgcC5zdGF0ZSAmJiAocC5jb2RlIHx8IHAub2F1dGhfdG9rZW4pKSB7XG5cblx0XHRcdHZhciBzdGF0ZSA9IEpTT04ucGFyc2UocC5zdGF0ZSk7XG5cblx0XHRcdC8vIEFkZCB0aGlzIHBhdGggYXMgdGhlIHJlZGlyZWN0X3VyaVxuXHRcdFx0cC5yZWRpcmVjdF91cmkgPSBzdGF0ZS5yZWRpcmVjdF91cmkgfHwgbG9jYXRpb24uaHJlZi5yZXBsYWNlKC9bXFw/XFwjXS4qJC8sICcnKTtcblxuXHRcdFx0Ly8gUmVkaXJlY3QgdG8gdGhlIGhvc3Rcblx0XHRcdHZhciBwYXRoID0gX3RoaXMucXMoc3RhdGUub2F1dGhfcHJveHksIHApO1xuXG5cdFx0XHRsb2NhdGlvbi5hc3NpZ24ocGF0aCk7XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBTYXZlIHNlc3Npb24sIGZyb20gcmVkaXJlY3RlZCBhdXRoZW50aWNhdGlvblxuXHRcdC8vICNhY2Nlc3NfdG9rZW4gaGFzIGNvbWUgaW4/XG5cdFx0Ly9cblx0XHQvLyBGQUNFQk9PSyBpcyByZXR1cm5pbmcgYXV0aCBlcnJvcnMgd2l0aGluIGFzIGEgcXVlcnlfc3RyaW5nLi4uIHRoYXRzIGEgc3RpY2tsZXIgZm9yIGNvbnNpc3RlbmN5LlxuXHRcdC8vIFNvdW5kQ2xvdWQgaXMgdGhlIHN0YXRlIGluIHRoZSBxdWVyeXN0cmluZyBhbmQgdGhlIHRva2VuIGluIHRoZSBoYXNodGFnLCBzbyB3ZSdsbCBtaXggdGhlIHR3byB0b2dldGhlclxuXG5cdFx0cCA9IF90aGlzLm1lcmdlKF90aGlzLnBhcmFtKGxvY2F0aW9uLnNlYXJjaCB8fCAnJyksIF90aGlzLnBhcmFtKGxvY2F0aW9uLmhhc2ggfHwgJycpKTtcblxuXHRcdC8vIElmIHAuc3RhdGVcblx0XHRpZiAocCAmJiAnc3RhdGUnIGluIHApIHtcblxuXHRcdFx0Ly8gUmVtb3ZlIGFueSBhZGRpdGlvbiBpbmZvcm1hdGlvblxuXHRcdFx0Ly8gRS5nLiBwLnN0YXRlID0gJ2ZhY2Vib29rLnBhZ2UnO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dmFyIGEgPSBKU09OLnBhcnNlKHAuc3RhdGUpO1xuXHRcdFx0XHRfdGhpcy5leHRlbmQocCwgYSk7XG5cdFx0XHR9XG5cdFx0XHRjYXRjaCAoZSkge1xuXHRcdFx0XHR2YXIgc3RhdGVEZWNvZGVkID0gZGVjb2RlVVJJQ29tcG9uZW50KHAuc3RhdGUpO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHZhciBiID0gSlNPTi5wYXJzZShzdGF0ZURlY29kZWQpO1xuXHRcdFx0XHRcdF90aGlzLmV4dGVuZChwLCBiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBkZWNvZGUgc3RhdGUgcGFyYW1ldGVyJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQWNjZXNzX3Rva2VuP1xuXHRcdFx0aWYgKCgnYWNjZXNzX3Rva2VuJyBpbiBwICYmIHAuYWNjZXNzX3Rva2VuKSAmJiBwLm5ldHdvcmspIHtcblxuXHRcdFx0XHRpZiAoIXAuZXhwaXJlc19pbiB8fCBwYXJzZUludChwLmV4cGlyZXNfaW4sIDEwKSA9PT0gMCkge1xuXHRcdFx0XHRcdC8vIElmIHAuZXhwaXJlc19pbiBpcyB1bnNldCwgc2V0IHRvIDBcblx0XHRcdFx0XHRwLmV4cGlyZXNfaW4gPSAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cC5leHBpcmVzX2luID0gcGFyc2VJbnQocC5leHBpcmVzX2luLCAxMCk7XG5cdFx0XHRcdHAuZXhwaXJlcyA9ICgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC8gMWUzKSArIChwLmV4cGlyZXNfaW4gfHwgKDYwICogNjAgKiAyNCAqIDM2NSkpO1xuXG5cdFx0XHRcdC8vIExldHMgdXNlIHRoZSBcInN0YXRlXCIgdG8gYXNzaWduIGl0IHRvIG9uZSBvZiBvdXIgbmV0d29ya3Ncblx0XHRcdFx0YXV0aENhbGxiYWNrKHAsIHdpbmRvdywgcGFyZW50KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRXJyb3I9P1xuXHRcdFx0Ly8gJmVycm9yX2Rlc2NyaXB0aW9uPT9cblx0XHRcdC8vICZzdGF0ZT0/XG5cdFx0XHRlbHNlIGlmICgoJ2Vycm9yJyBpbiBwICYmIHAuZXJyb3IpICYmIHAubmV0d29yaykge1xuXG5cdFx0XHRcdHAuZXJyb3IgPSB7XG5cdFx0XHRcdFx0Y29kZTogcC5lcnJvcixcblx0XHRcdFx0XHRtZXNzYWdlOiBwLmVycm9yX21lc3NhZ2UgfHwgcC5lcnJvcl9kZXNjcmlwdGlvblxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8vIExldCB0aGUgc3RhdGUgaGFuZGxlciBoYW5kbGUgaXRcblx0XHRcdFx0YXV0aENhbGxiYWNrKHAsIHdpbmRvdywgcGFyZW50KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQVBJIGNhbGwsIG9yIGEgY2FuY2VsbGVkIGxvZ2luXG5cdFx0XHQvLyBSZXN1bHQgaXMgc2VyaWFsaXplZCBKU09OIHN0cmluZ1xuXHRcdFx0ZWxzZSBpZiAocC5jYWxsYmFjayAmJiBwLmNhbGxiYWNrIGluIHBhcmVudCkge1xuXG5cdFx0XHRcdC8vIFRyaWdnZXIgYSBmdW5jdGlvbiBpbiB0aGUgcGFyZW50XG5cdFx0XHRcdHZhciByZXMgPSAncmVzdWx0JyBpbiBwICYmIHAucmVzdWx0ID8gSlNPTi5wYXJzZShwLnJlc3VsdCkgOiBmYWxzZTtcblxuXHRcdFx0XHQvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayBvbiB0aGUgcGFyZW50XG5cdFx0XHRcdGNhbGxiYWNrKHBhcmVudCwgcC5jYWxsYmFjaykocmVzKTtcblx0XHRcdFx0Y2xvc2VXaW5kb3coKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgdGhpcyBwYWdlIGlzIHN0aWxsIG9wZW5cblx0XHRcdGlmIChwLnBhZ2VfdXJpKSB7XG5cdFx0XHRcdGxvY2F0aW9uLmFzc2lnbihwLnBhZ2VfdXJpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBPQXV0aCByZWRpcmVjdCwgZml4ZXMgVVJJIGZyYWdtZW50cyBmcm9tIGJlaW5nIGxvc3QgaW4gU2FmYXJpXG5cdFx0Ly8gKFVSSSBGcmFnbWVudHMgd2l0aGluIDMwMiBMb2NhdGlvbiBVUkkgYXJlIGxvc3Qgb3ZlciBIVFRQUylcblx0XHQvLyBMb2FkaW5nIHRoZSByZWRpcmVjdC5odG1sIGJlZm9yZSB0cmlnZ2VyaW5nIHRoZSBPQXV0aCBGbG93IHNlZW1zIHRvIGZpeCBpdC5cblx0XHRlbHNlIGlmICgnb2F1dGhfcmVkaXJlY3QnIGluIHApIHtcblxuXHRcdFx0bG9jYXRpb24uYXNzaWduKGRlY29kZVVSSUNvbXBvbmVudChwLm9hdXRoX3JlZGlyZWN0KSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gVHJpZ2dlciBhIGNhbGxiYWNrIHRvIGF1dGhlbnRpY2F0ZVxuXHRcdGZ1bmN0aW9uIGF1dGhDYWxsYmFjayhvYmosIHdpbmRvdywgcGFyZW50KSB7XG5cblx0XHRcdHZhciBjYiA9IG9iai5jYWxsYmFjaztcblx0XHRcdHZhciBuZXR3b3JrID0gb2JqLm5ldHdvcms7XG5cblx0XHRcdC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIG9uIHRoZSBwYXJlbnRcblx0XHRcdF90aGlzLnN0b3JlKG5ldHdvcmssIG9iaik7XG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBwYWdlIHJlcXVlc3QgaXQgaGFzIG5vIHBhcmVudCBvciBvcGVuZXIgd2luZG93IHRvIGhhbmRsZSBjYWxsYmFja3Ncblx0XHRcdGlmICgoJ2Rpc3BsYXknIGluIG9iaikgJiYgb2JqLmRpc3BsYXkgPT09ICdwYWdlJykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBmcm9tIHNlc3Npb24gb2JqZWN0XG5cdFx0XHRpZiAocGFyZW50ICYmIGNiICYmIGNiIGluIHBhcmVudCkge1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0ZGVsZXRlIG9iai5jYWxsYmFjaztcblx0XHRcdFx0fVxuXHRcdFx0XHRjYXRjaCAoZSkge31cblxuXHRcdFx0XHQvLyBVcGRhdGUgc3RvcmVcblx0XHRcdFx0X3RoaXMuc3RvcmUobmV0d29yaywgb2JqKTtcblxuXHRcdFx0XHQvLyBDYWxsIHRoZSBnbG9iYWxFdmVudCBmdW5jdGlvbiBvbiB0aGUgcGFyZW50XG5cdFx0XHRcdC8vIEl0J3Mgc2FmZXIgdG8gcGFzcyBiYWNrIGEgc3RyaW5nIHRvIHRoZSBwYXJlbnQsXG5cdFx0XHRcdC8vIFJhdGhlciB0aGFuIGFuIG9iamVjdC9hcnJheSAoYmV0dGVyIGZvciBJRTgpXG5cdFx0XHRcdHZhciBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2socGFyZW50LCBjYikoc3RyKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjYXRjaCAoZSkge1xuXHRcdFx0XHRcdC8vIEVycm9yIHRocm93biB3aGlsc3QgZXhlY3V0aW5nIHBhcmVudCBjYWxsYmFja1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGNsb3NlV2luZG93KCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY2FsbGJhY2socGFyZW50LCBjYWxsYmFja0lEKSB7XG5cdFx0XHRpZiAoY2FsbGJhY2tJRC5pbmRleE9mKCdfaGVsbG9qc18nKSAhPT0gMCkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dGhyb3cgJ0NvdWxkIG5vdCBleGVjdXRlIGNhbGxiYWNrICcgKyBjYWxsYmFja0lEO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcGFyZW50W2NhbGxiYWNrSURdO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNsb3NlV2luZG93KCkge1xuXG5cdFx0XHRpZiAod2luZG93LmZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHQvLyBJbnNpZGUgYW4gaWZyYW1lLCByZW1vdmUgZnJvbSBwYXJlbnRcblx0XHRcdFx0cGFyZW50LmRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQod2luZG93LmZyYW1lRWxlbWVudCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Ly8gQ2xvc2UgdGhpcyBjdXJyZW50IHdpbmRvd1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHdpbmRvdy5jbG9zZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNhdGNoIChlKSB7fVxuXG5cdFx0XHRcdC8vIElPUyBidWcgd29udCBsZXQgdXMgY2xvc2UgYSBwb3B1cCBpZiBzdGlsbCBsb2FkaW5nXG5cdFx0XHRcdGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR3aW5kb3cuY2xvc2UoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG59KTtcblxuLy8gRXZlbnRzXG4vLyBFeHRlbmQgdGhlIGhlbGxvIG9iamVjdCB3aXRoIGl0cyBvd24gZXZlbnQgaW5zdGFuY2VcbmhlbGxvLnV0aWxzLkV2ZW50LmNhbGwoaGVsbG8pO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gTW9uaXRvcmluZyBzZXNzaW9uIHN0YXRlXG4vLyBDaGVjayBmb3Igc2Vzc2lvbiBjaGFuZ2VzXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHQvLyBNb25pdG9yIGZvciBhIGNoYW5nZSBpbiBzdGF0ZSBhbmQgZmlyZVxuXHR2YXIgb2xkU2Vzc2lvbnMgPSB7fTtcblxuXHQvLyBIYXNoIG9mIGV4cGlyZWQgdG9rZW5zXG5cdHZhciBleHBpcmVkID0ge307XG5cblx0Ly8gTGlzdGVuIHRvIG90aGVyIHRyaWdnZXJzIHRvIEF1dGggZXZlbnRzLCB1c2UgdGhlc2UgdG8gdXBkYXRlIHRoaXNcblx0aGVsbG8ub24oJ2F1dGgubG9naW4sIGF1dGgubG9nb3V0JywgZnVuY3Rpb24oYXV0aCkge1xuXHRcdGlmIChhdXRoICYmIHR5cGVvZiAoYXV0aCkgPT09ICdvYmplY3QnICYmIGF1dGgubmV0d29yaykge1xuXHRcdFx0b2xkU2Vzc2lvbnNbYXV0aC5uZXR3b3JrXSA9IGhlbGxvLnV0aWxzLnN0b3JlKGF1dGgubmV0d29yaykgfHwge307XG5cdFx0fVxuXHR9KTtcblxuXHQoZnVuY3Rpb24gc2VsZigpIHtcblxuXHRcdHZhciBDVVJSRU5UX1RJTUUgPSAoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAvIDFlMyk7XG5cdFx0dmFyIGVtaXQgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcblx0XHRcdGhlbGxvLmVtaXQoJ2F1dGguJyArIGV2ZW50TmFtZSwge1xuXHRcdFx0XHRuZXR3b3JrOiBuYW1lLFxuXHRcdFx0XHRhdXRoUmVzcG9uc2U6IHNlc3Npb25cblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQvLyBMb29wIHRocm91Z2ggdGhlIHNlcnZpY2VzXG5cdFx0Zm9yICh2YXIgbmFtZSBpbiBoZWxsby5zZXJ2aWNlcykge2lmIChoZWxsby5zZXJ2aWNlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuXG5cdFx0XHRpZiAoIWhlbGxvLnNlcnZpY2VzW25hbWVdLmlkKSB7XG5cdFx0XHRcdC8vIFdlIGhhdmVuJ3QgYXR0YWNoZWQgYW4gSUQgc28gZG9udCBsaXN0ZW4uXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBHZXQgc2Vzc2lvblxuXHRcdFx0dmFyIHNlc3Npb24gPSBoZWxsby51dGlscy5zdG9yZShuYW1lKSB8fCB7fTtcblx0XHRcdHZhciBwcm92aWRlciA9IGhlbGxvLnNlcnZpY2VzW25hbWVdO1xuXHRcdFx0dmFyIG9sZFNlc3MgPSBvbGRTZXNzaW9uc1tuYW1lXSB8fCB7fTtcblxuXHRcdFx0Ly8gTGlzdGVuIGZvciBnbG9iYWxFdmVudHMgdGhhdCBkaWQgbm90IGdldCB0cmlnZ2VyZWQgZnJvbSB0aGUgY2hpbGRcblx0XHRcdGlmIChzZXNzaW9uICYmICdjYWxsYmFjaycgaW4gc2Vzc2lvbikge1xuXG5cdFx0XHRcdC8vIFRvIGRvIHJlbW92ZSBmcm9tIHNlc3Npb24gb2JqZWN0Li4uXG5cdFx0XHRcdHZhciBjYiA9IHNlc3Npb24uY2FsbGJhY2s7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0ZGVsZXRlIHNlc3Npb24uY2FsbGJhY2s7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2F0Y2ggKGUpIHt9XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHN0b3JlXG5cdFx0XHRcdC8vIFJlbW92aW5nIHRoZSBjYWxsYmFja1xuXHRcdFx0XHRoZWxsby51dGlscy5zdG9yZShuYW1lLCBzZXNzaW9uKTtcblxuXHRcdFx0XHQvLyBFbWl0IGdsb2JhbCBldmVudHNcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR3aW5kb3dbY2JdKHNlc3Npb24pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNhdGNoIChlKSB7fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZWZyZXNoIHRva2VuXG5cdFx0XHRpZiAoc2Vzc2lvbiAmJiAoJ2V4cGlyZXMnIGluIHNlc3Npb24pICYmIHNlc3Npb24uZXhwaXJlcyA8IENVUlJFTlRfVElNRSkge1xuXG5cdFx0XHRcdC8vIElmIGF1dG8gcmVmcmVzaCBpcyBwb3NzaWJsZVxuXHRcdFx0XHQvLyBFaXRoZXIgdGhlIGJyb3dzZXIgc3VwcG9ydHNcblx0XHRcdFx0dmFyIHJlZnJlc2ggPSBwcm92aWRlci5yZWZyZXNoIHx8IHNlc3Npb24ucmVmcmVzaF90b2tlbjtcblxuXHRcdFx0XHQvLyBIYXMgdGhlIHJlZnJlc2ggYmVlbiBydW4gcmVjZW50bHk/XG5cdFx0XHRcdGlmIChyZWZyZXNoICYmICghKG5hbWUgaW4gZXhwaXJlZCkgfHwgZXhwaXJlZFtuYW1lXSA8IENVUlJFTlRfVElNRSkpIHtcblx0XHRcdFx0XHQvLyBUcnkgdG8gcmVzaWduaW5cblx0XHRcdFx0XHRoZWxsby5lbWl0KCdub3RpY2UnLCBuYW1lICsgJyBoYXMgZXhwaXJlZCB0cnlpbmcgdG8gcmVzaWduaW4nKTtcblx0XHRcdFx0XHRoZWxsby5sb2dpbihuYW1lLCB7ZGlzcGxheTogJ25vbmUnLCBmb3JjZTogZmFsc2V9KTtcblxuXHRcdFx0XHRcdC8vIFVwZGF0ZSBleHBpcmVkLCBldmVyeSAxMCBtaW51dGVzXG5cdFx0XHRcdFx0ZXhwaXJlZFtuYW1lXSA9IENVUlJFTlRfVElNRSArIDYwMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIERvZXMgdGhpcyBwcm92aWRlciBub3Qgc3VwcG9ydCByZWZyZXNoXG5cdFx0XHRcdGVsc2UgaWYgKCFyZWZyZXNoICYmICEobmFtZSBpbiBleHBpcmVkKSkge1xuXHRcdFx0XHRcdC8vIExhYmVsIHRoZSBldmVudFxuXHRcdFx0XHRcdGVtaXQoJ2V4cGlyZWQnKTtcblx0XHRcdFx0XHRleHBpcmVkW25hbWVdID0gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHNlc3Npb24gaGFzIGV4cGlyZWQgdGhlbiB3ZSBkb250IHdhbnQgdG8gc3RvcmUgaXRzIHZhbHVlIHVudGlsIGl0IGNhbiBiZSBlc3RhYmxpc2hlZCB0aGF0IGl0cyBiZWVuIHVwZGF0ZWRcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhhcyBzZXNzaW9uIGNoYW5nZWQ/XG5cdFx0XHRlbHNlIGlmIChvbGRTZXNzLmFjY2Vzc190b2tlbiA9PT0gc2Vzc2lvbi5hY2Nlc3NfdG9rZW4gJiZcblx0XHRcdG9sZFNlc3MuZXhwaXJlcyA9PT0gc2Vzc2lvbi5leHBpcmVzKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBY2Nlc3NfdG9rZW4gaGFzIGJlZW4gcmVtb3ZlZFxuXHRcdFx0ZWxzZSBpZiAoIXNlc3Npb24uYWNjZXNzX3Rva2VuICYmIG9sZFNlc3MuYWNjZXNzX3Rva2VuKSB7XG5cdFx0XHRcdGVtaXQoJ2xvZ291dCcpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBY2Nlc3NfdG9rZW4gaGFzIGJlZW4gY3JlYXRlZFxuXHRcdFx0ZWxzZSBpZiAoc2Vzc2lvbi5hY2Nlc3NfdG9rZW4gJiYgIW9sZFNlc3MuYWNjZXNzX3Rva2VuKSB7XG5cdFx0XHRcdGVtaXQoJ2xvZ2luJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2Vzc190b2tlbiBoYXMgYmVlbiB1cGRhdGVkXG5cdFx0XHRlbHNlIGlmIChzZXNzaW9uLmV4cGlyZXMgIT09IG9sZFNlc3MuZXhwaXJlcykge1xuXHRcdFx0XHRlbWl0KCd1cGRhdGUnKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVXBkYXRlZCBzdG9yZWQgc2Vzc2lvblxuXHRcdFx0b2xkU2Vzc2lvbnNbbmFtZV0gPSBzZXNzaW9uO1xuXG5cdFx0XHQvLyBSZW1vdmUgdGhlIGV4cGlyZWQgZmxhZ3Ncblx0XHRcdGlmIChuYW1lIGluIGV4cGlyZWQpIHtcblx0XHRcdFx0ZGVsZXRlIGV4cGlyZWRbbmFtZV07XG5cdFx0XHR9XG5cdFx0fX1cblxuXHRcdC8vIENoZWNrIGVycm9yIGV2ZW50c1xuXHRcdHNldFRpbWVvdXQoc2VsZiwgMTAwMCk7XG5cdH0pKCk7XG5cbn0pKGhlbGxvKTtcblxuLy8gRU9GIENPUkUgbGliXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBBUElcbi8vIEBwYXJhbSBwYXRoICAgIHN0cmluZ1xuLy8gQHBhcmFtIHF1ZXJ5ICAgb2JqZWN0IChvcHRpb25hbClcbi8vIEBwYXJhbSBtZXRob2QgIHN0cmluZyAob3B0aW9uYWwpXG4vLyBAcGFyYW0gZGF0YSAgICBvYmplY3QgKG9wdGlvbmFsKVxuLy8gQHBhcmFtIHRpbWVvdXQgaW50ZWdlciAob3B0aW9uYWwpXG4vLyBAcGFyYW0gY2FsbGJhY2sgIGZ1bmN0aW9uIChvcHRpb25hbClcblxuaGVsbG8uYXBpID0gZnVuY3Rpb24oKSB7XG5cblx0Ly8gU2hvcnRoYW5kXG5cdHZhciBfdGhpcyA9IHRoaXM7XG5cdHZhciB1dGlscyA9IF90aGlzLnV0aWxzO1xuXHR2YXIgZXJyb3IgPSB1dGlscy5lcnJvcjtcblxuXHQvLyBDb25zdHJ1Y3QgYSBuZXcgUHJvbWlzZSBvYmplY3Rcblx0dmFyIHByb21pc2UgPSB1dGlscy5Qcm9taXNlKCk7XG5cblx0Ly8gQXJndW1lbnRzXG5cdHZhciBwID0gdXRpbHMuYXJncyh7cGF0aDogJ3MhJywgcXVlcnk6ICdvJywgbWV0aG9kOiAncycsIGRhdGE6ICdvJywgdGltZW91dDogJ2knLCBjYWxsYmFjazogJ2YnfSwgYXJndW1lbnRzKTtcblxuXHQvLyBNZXRob2Rcblx0cC5tZXRob2QgPSAocC5tZXRob2QgfHwgJ2dldCcpLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gSGVhZGVyc1xuXHRwLmhlYWRlcnMgPSBwLmhlYWRlcnMgfHwge307XG5cblx0Ly8gUXVlcnlcblx0cC5xdWVyeSA9IHAucXVlcnkgfHwge307XG5cblx0Ly8gSWYgZ2V0LCBwdXQgYWxsIHBhcmFtZXRlcnMgaW50byBxdWVyeVxuXHRpZiAocC5tZXRob2QgPT09ICdnZXQnIHx8IHAubWV0aG9kID09PSAnZGVsZXRlJykge1xuXHRcdHV0aWxzLmV4dGVuZChwLnF1ZXJ5LCBwLmRhdGEpO1xuXHRcdHAuZGF0YSA9IHt9O1xuXHR9XG5cblx0dmFyIGRhdGEgPSBwLmRhdGEgPSBwLmRhdGEgfHwge307XG5cblx0Ly8gQ29tcGxldGVkIGV2ZW50IGNhbGxiYWNrXG5cdHByb21pc2UudGhlbihwLmNhbGxiYWNrLCBwLmNhbGxiYWNrKTtcblxuXHQvLyBSZW1vdmUgdGhlIG5ldHdvcmsgZnJvbSBwYXRoLCBlLmcuIGZhY2Vib29rOi9tZS9mcmllbmRzXG5cdC8vIFJlc3VsdHMgaW4geyBuZXR3b3JrIDogZmFjZWJvb2ssIHBhdGggOiBtZS9mcmllbmRzIH1cblx0aWYgKCFwLnBhdGgpIHtcblx0XHRyZXR1cm4gcHJvbWlzZS5yZWplY3QoZXJyb3IoJ2ludmFsaWRfcGF0aCcsICdNaXNzaW5nIHRoZSBwYXRoIHBhcmFtZXRlciBmcm9tIHRoZSByZXF1ZXN0JykpO1xuXHR9XG5cblx0cC5wYXRoID0gcC5wYXRoLnJlcGxhY2UoL15cXC8rLywgJycpO1xuXHR2YXIgYSA9IChwLnBhdGguc3BsaXQoL1tcXC9cXDpdLywgMikgfHwgW10pWzBdLnRvTG93ZXJDYXNlKCk7XG5cblx0aWYgKGEgaW4gX3RoaXMuc2VydmljZXMpIHtcblx0XHRwLm5ldHdvcmsgPSBhO1xuXHRcdHZhciByZWcgPSBuZXcgUmVnRXhwKCdeJyArIGEgKyAnOj9cXC8/Jyk7XG5cdFx0cC5wYXRoID0gcC5wYXRoLnJlcGxhY2UocmVnLCAnJyk7XG5cdH1cblxuXHQvLyBOZXR3b3JrICYgUHJvdmlkZXJcblx0Ly8gRGVmaW5lIHRoZSBuZXR3b3JrIHRoYXQgdGhpcyByZXF1ZXN0IGlzIG1hZGUgZm9yXG5cdHAubmV0d29yayA9IF90aGlzLnNldHRpbmdzLmRlZmF1bHRfc2VydmljZSA9IHAubmV0d29yayB8fCBfdGhpcy5zZXR0aW5ncy5kZWZhdWx0X3NlcnZpY2U7XG5cdHZhciBvID0gX3RoaXMuc2VydmljZXNbcC5uZXR3b3JrXTtcblxuXHQvLyBJTlZBTElEXG5cdC8vIElzIHRoZXJlIG5vIHNlcnZpY2UgYnkgdGhlIGdpdmVuIG5ldHdvcmsgbmFtZT9cblx0aWYgKCFvKSB7XG5cdFx0cmV0dXJuIHByb21pc2UucmVqZWN0KGVycm9yKCdpbnZhbGlkX25ldHdvcmsnLCAnQ291bGQgbm90IG1hdGNoIHRoZSBzZXJ2aWNlIHJlcXVlc3RlZDogJyArIHAubmV0d29yaykpO1xuXHR9XG5cblx0Ly8gUEFUSFxuXHQvLyBBcyBsb25nIGFzIHRoZSBwYXRoIGlzbid0IGZsYWdnZWQgYXMgdW5hdmFpYWJsZSwgZS5nLiBwYXRoID09IGZhbHNlXG5cblx0aWYgKCEoIShwLm1ldGhvZCBpbiBvKSB8fCAhKHAucGF0aCBpbiBvW3AubWV0aG9kXSkgfHwgb1twLm1ldGhvZF1bcC5wYXRoXSAhPT0gZmFsc2UpKSB7XG5cdFx0cmV0dXJuIHByb21pc2UucmVqZWN0KGVycm9yKCdpbnZhbGlkX3BhdGgnLCAnVGhlIHByb3ZpZGVkIHBhdGggaXMgbm90IGF2YWlsYWJsZSBvbiB0aGUgc2VsZWN0ZWQgbmV0d29yaycpKTtcblx0fVxuXG5cdC8vIFBST1hZXG5cdC8vIE9BdXRoMSBjYWxscyBhbHdheXMgbmVlZCBhIHByb3h5XG5cblx0aWYgKCFwLm9hdXRoX3Byb3h5KSB7XG5cdFx0cC5vYXV0aF9wcm94eSA9IF90aGlzLnNldHRpbmdzLm9hdXRoX3Byb3h5O1xuXHR9XG5cblx0aWYgKCEoJ3Byb3h5JyBpbiBwKSkge1xuXHRcdHAucHJveHkgPSBwLm9hdXRoX3Byb3h5ICYmIG8ub2F1dGggJiYgcGFyc2VJbnQoby5vYXV0aC52ZXJzaW9uLCAxMCkgPT09IDE7XG5cdH1cblxuXHQvLyBUSU1FT1VUXG5cdC8vIEFkb3B0IHRpbWVvdXQgZnJvbSBnbG9iYWwgc2V0dGluZ3MgYnkgZGVmYXVsdFxuXG5cdGlmICghKCd0aW1lb3V0JyBpbiBwKSkge1xuXHRcdHAudGltZW91dCA9IF90aGlzLnNldHRpbmdzLnRpbWVvdXQ7XG5cdH1cblxuXHQvLyBGb3JtYXQgcmVzcG9uc2Vcblx0Ly8gV2hldGhlciB0byBydW4gdGhlIHJhdyByZXNwb25zZSB0aHJvdWdoIHBvc3QgcHJvY2Vzc2luZy5cblx0aWYgKCEoJ2Zvcm1hdFJlc3BvbnNlJyBpbiBwKSkge1xuXHRcdHAuZm9ybWF0UmVzcG9uc2UgPSB0cnVlO1xuXHR9XG5cblx0Ly8gR2V0IHRoZSBjdXJyZW50IHNlc3Npb25cblx0Ly8gQXBwZW5kIHRoZSBhY2Nlc3NfdG9rZW4gdG8gdGhlIHF1ZXJ5XG5cdHAuYXV0aFJlc3BvbnNlID0gX3RoaXMuZ2V0QXV0aFJlc3BvbnNlKHAubmV0d29yayk7XG5cdGlmIChwLmF1dGhSZXNwb25zZSAmJiBwLmF1dGhSZXNwb25zZS5hY2Nlc3NfdG9rZW4pIHtcblx0XHRwLnF1ZXJ5LmFjY2Vzc190b2tlbiA9IHAuYXV0aFJlc3BvbnNlLmFjY2Vzc190b2tlbjtcblx0fVxuXG5cdHZhciB1cmwgPSBwLnBhdGg7XG5cdHZhciBtO1xuXG5cdC8vIFN0b3JlIHRoZSBxdWVyeSBhcyBvcHRpb25zXG5cdC8vIFRoaXMgaXMgdXNlZCB0byBwb3B1bGF0ZSB0aGUgcmVxdWVzdCBvYmplY3QgYmVmb3JlIHRoZSBkYXRhIGlzIGF1Z21lbnRlZCBieSB0aGUgcHJld3JhcCBoYW5kbGVycy5cblx0cC5vcHRpb25zID0gdXRpbHMuY2xvbmUocC5xdWVyeSk7XG5cblx0Ly8gQ2xvbmUgdGhlIGRhdGEgb2JqZWN0XG5cdC8vIFByZXZlbnQgdGhpcyBzY3JpcHQgb3ZlcndyaXRpbmcgdGhlIGRhdGEgb2YgdGhlIGluY29taW5nIG9iamVjdC5cblx0Ly8gRW5zdXJlIHRoYXQgZXZlcnl0aW1lIHdlIHJ1biBhbiBpdGVyYXRpb24gdGhlIGNhbGxiYWNrcyBoYXZlbid0IHJlbW92ZWQgc29tZSBkYXRhXG5cdHAuZGF0YSA9IHV0aWxzLmNsb25lKGRhdGEpO1xuXG5cdC8vIFVSTCBNYXBwaW5nXG5cdC8vIElzIHRoZXJlIGEgbWFwIGZvciB0aGUgZ2l2ZW4gVVJMP1xuXHR2YXIgYWN0aW9ucyA9IG9beydkZWxldGUnOiAnZGVsJ31bcC5tZXRob2RdIHx8IHAubWV0aG9kXSB8fCB7fTtcblxuXHQvLyBFeHRyYXBvbGF0ZSB0aGUgUXVlcnlTdHJpbmdcblx0Ly8gUHJvdmlkZSBhIGNsZWFuIHBhdGhcblx0Ly8gTW92ZSB0aGUgcXVlcnlzdHJpbmcgaW50byB0aGUgZGF0YVxuXHRpZiAocC5tZXRob2QgPT09ICdnZXQnKSB7XG5cblx0XHR2YXIgcXVlcnkgPSB1cmwuc3BsaXQoL1tcXD8jXS8pWzFdO1xuXHRcdGlmIChxdWVyeSkge1xuXHRcdFx0dXRpbHMuZXh0ZW5kKHAucXVlcnksIHV0aWxzLnBhcmFtKHF1ZXJ5KSk7XG5cblx0XHRcdC8vIFJlbW92ZSB0aGUgcXVlcnkgcGFydCBmcm9tIHRoZSBVUkxcblx0XHRcdHVybCA9IHVybC5yZXBsYWNlKC9cXD8uKj8oI3wkKS8sICckMScpO1xuXHRcdH1cblx0fVxuXG5cdC8vIElzIHRoZSBoYXNoIGZyYWdtZW50IGRlZmluZWRcblx0aWYgKChtID0gdXJsLm1hdGNoKC8jKC4rKS8sICcnKSkpIHtcblx0XHR1cmwgPSB1cmwuc3BsaXQoJyMnKVswXTtcblx0XHRwLnBhdGggPSBtWzFdO1xuXHR9XG5cdGVsc2UgaWYgKHVybCBpbiBhY3Rpb25zKSB7XG5cdFx0cC5wYXRoID0gdXJsO1xuXHRcdHVybCA9IGFjdGlvbnNbdXJsXTtcblx0fVxuXHRlbHNlIGlmICgnZGVmYXVsdCcgaW4gYWN0aW9ucykge1xuXHRcdHVybCA9IGFjdGlvbnNbJ2RlZmF1bHQnXTtcblx0fVxuXG5cdC8vIFJlZGlyZWN0IEhhbmRsZXJcblx0Ly8gVGhpcyBkZWZpbmVzIGZvciB0aGUgRm9ybStJZnJhbWUrSGFzaCBoYWNrIHdoZXJlIHRvIHJldHVybiB0aGUgcmVzdWx0cyB0b28uXG5cdHAucmVkaXJlY3RfdXJpID0gX3RoaXMuc2V0dGluZ3MucmVkaXJlY3RfdXJpO1xuXG5cdC8vIERlZmluZSBGb3JtYXRIYW5kbGVyXG5cdC8vIFRoZSByZXF1ZXN0IGNhbiBiZSBwcm9jZXNlZCBpbiBhIG11bHRpdHVkZSBvZiB3YXlzXG5cdC8vIEhlcmUncyB0aGUgb3B0aW9ucyAtIGRlcGVuZGluZyBvbiB0aGUgYnJvd3NlciBhbmQgZW5kcG9pbnRcblx0cC54aHIgPSBvLnhocjtcblx0cC5qc29ucCA9IG8uanNvbnA7XG5cdHAuZm9ybSA9IG8uZm9ybTtcblxuXHQvLyBNYWtlIHJlcXVlc3Rcblx0aWYgKHR5cGVvZiAodXJsKSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdC8vIERvZXMgc2VsZiBoYXZlIGl0cyBvd24gY2FsbGJhY2s/XG5cdFx0dXJsKHAsIGdldFBhdGgpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdC8vIEVsc2UgdGhlIFVSTCBpcyBhIHN0cmluZ1xuXHRcdGdldFBhdGgodXJsKTtcblx0fVxuXG5cdHJldHVybiBwcm9taXNlLnByb3h5O1xuXG5cdC8vIElmIHVybCBuZWVkcyBhIGJhc2Vcblx0Ly8gV3JhcCBldmVyeXRoaW5nIGluXG5cdGZ1bmN0aW9uIGdldFBhdGgodXJsKSB7XG5cblx0XHQvLyBGb3JtYXQgdGhlIHN0cmluZyBpZiBpdCBuZWVkcyBpdFxuXHRcdHVybCA9IHVybC5yZXBsYWNlKC9cXEBcXHsoW2EtelxcX1xcLV0rKShcXHwuKj8pP1xcfS9naSwgZnVuY3Rpb24obSwga2V5LCBkZWZhdWx0cykge1xuXHRcdFx0dmFyIHZhbCA9IGRlZmF1bHRzID8gZGVmYXVsdHMucmVwbGFjZSgvXlxcfC8sICcnKSA6ICcnO1xuXHRcdFx0aWYgKGtleSBpbiBwLnF1ZXJ5KSB7XG5cdFx0XHRcdHZhbCA9IHAucXVlcnlba2V5XTtcblx0XHRcdFx0ZGVsZXRlIHAucXVlcnlba2V5XTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKHAuZGF0YSAmJiBrZXkgaW4gcC5kYXRhKSB7XG5cdFx0XHRcdHZhbCA9IHAuZGF0YVtrZXldO1xuXHRcdFx0XHRkZWxldGUgcC5kYXRhW2tleV07XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICghZGVmYXVsdHMpIHtcblx0XHRcdFx0cHJvbWlzZS5yZWplY3QoZXJyb3IoJ21pc3NpbmdfYXR0cmlidXRlJywgJ1RoZSBhdHRyaWJ1dGUgJyArIGtleSArICcgaXMgbWlzc2luZyBmcm9tIHRoZSByZXF1ZXN0JykpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGJhc2Vcblx0XHRpZiAoIXVybC5tYXRjaCgvXmh0dHBzPzpcXC9cXC8vKSkge1xuXHRcdFx0dXJsID0gby5iYXNlICsgdXJsO1xuXHRcdH1cblxuXHRcdC8vIERlZmluZSB0aGUgcmVxdWVzdCBVUkxcblx0XHRwLnVybCA9IHVybDtcblxuXHRcdC8vIE1ha2UgdGhlIEhUVFAgcmVxdWVzdCB3aXRoIHRoZSBjdXJhdGVkIHJlcXVlc3Qgb2JqZWN0XG5cdFx0Ly8gQ0FMTEJBQ0sgSEFORExFUlxuXHRcdC8vIEAgcmVzcG9uc2Ugb2JqZWN0XG5cdFx0Ly8gQCBzdGF0dXNDb2RlIGludGVnZXIgaWYgYXZhaWxhYmxlXG5cdFx0dXRpbHMucmVxdWVzdChwLCBmdW5jdGlvbihyLCBoZWFkZXJzKSB7XG5cblx0XHRcdC8vIElzIHRoaXMgYSByYXcgcmVzcG9uc2U/XG5cdFx0XHRpZiAoIXAuZm9ybWF0UmVzcG9uc2UpIHtcblx0XHRcdFx0Ly8gQmFkIHJlcXVlc3Q/IGVycm9yIHN0YXR1c0NvZGUgb3Igb3RoZXJ3aXNlIGNvbnRhaW5zIGFuIGVycm9yIHJlc3BvbnNlIHZpcyBKU09OUD9cblx0XHRcdFx0aWYgKHR5cGVvZiBoZWFkZXJzID09PSAnb2JqZWN0JyA/IChoZWFkZXJzLnN0YXR1c0NvZGUgPj0gNDAwKSA6ICh0eXBlb2YgciA9PT0gJ29iamVjdCcgJiYgJ2Vycm9yJyBpbiByKSkge1xuXHRcdFx0XHRcdHByb21pc2UucmVqZWN0KHIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHByb21pc2UuZnVsZmlsbChyKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2hvdWxkIHRoaXMgYmUgYW4gb2JqZWN0XG5cdFx0XHRpZiAociA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRyID0ge3N1Y2Nlc3M6dHJ1ZX07XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmICghcikge1xuXHRcdFx0XHRyID0ge307XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRoZSBkZWxldGUgY2FsbGJhY2sgbmVlZHMgYSBiZXR0ZXIgcmVzcG9uc2Vcblx0XHRcdGlmIChwLm1ldGhvZCA9PT0gJ2RlbGV0ZScpIHtcblx0XHRcdFx0ciA9ICghciB8fCB1dGlscy5pc0VtcHR5KHIpKSA/IHtzdWNjZXNzOnRydWV9IDogcjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRk9STUFUIFJFU1BPTlNFP1xuXHRcdFx0Ly8gRG9lcyBzZWxmIHJlcXVlc3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgZm9ybWF0dGVyXG5cdFx0XHRpZiAoby53cmFwICYmICgocC5wYXRoIGluIG8ud3JhcCkgfHwgKCdkZWZhdWx0JyBpbiBvLndyYXApKSkge1xuXHRcdFx0XHR2YXIgd3JhcCA9IChwLnBhdGggaW4gby53cmFwID8gcC5wYXRoIDogJ2RlZmF1bHQnKTtcblx0XHRcdFx0dmFyIHRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXG5cdFx0XHRcdC8vIEZPUk1BVCBSRVNQT05TRVxuXHRcdFx0XHR2YXIgYiA9IG8ud3JhcFt3cmFwXShyLCBoZWFkZXJzLCBwKTtcblxuXHRcdFx0XHQvLyBIYXMgdGhlIHJlc3BvbnNlIGJlZW4gdXR0ZXJseSBvdmVyd3JpdHRlbj9cblx0XHRcdFx0Ly8gVHlwaWNhbGx5IHNlbGYgYXVnbWVudHMgdGhlIGV4aXN0aW5nIG9iamVjdC4uIGJ1dCBmb3IgdGhvc2UgcmFyZSBvY2Nhc3Npb25zXG5cdFx0XHRcdGlmIChiKSB7XG5cdFx0XHRcdFx0ciA9IGI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSXMgdGhlcmUgYSBuZXh0X3BhZ2UgZGVmaW5lZCBpbiB0aGUgcmVzcG9uc2U/XG5cdFx0XHRpZiAociAmJiAncGFnaW5nJyBpbiByICYmIHIucGFnaW5nLm5leHQpIHtcblxuXHRcdFx0XHQvLyBBZGQgdGhlIHJlbGF0aXZlIHBhdGggaWYgaXQgaXMgbWlzc2luZyBmcm9tIHRoZSBwYWdpbmcvbmV4dCBwYXRoXG5cdFx0XHRcdGlmIChyLnBhZ2luZy5uZXh0WzBdID09PSAnPycpIHtcblx0XHRcdFx0XHRyLnBhZ2luZy5uZXh0ID0gcC5wYXRoICsgci5wYWdpbmcubmV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRoZSByZWxhdGl2ZSBwYXRoIGhhcyBiZWVuIGRlZmluZWQsIGxldHMgbWFya3VwIHRoZSBoYW5kbGVyIGluIHRoZSBIYXNoRnJhZ21lbnRcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0ci5wYWdpbmcubmV4dCArPSAnIycgKyBwLnBhdGg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRGlzcGF0Y2ggdG8gbGlzdGVuZXJzXG5cdFx0XHQvLyBFbWl0IGV2ZW50cyB3aGljaCBwZXJ0YWluIHRvIHRoZSBmb3JtYXR0ZWQgcmVzcG9uc2Vcblx0XHRcdGlmICghciB8fCAnZXJyb3InIGluIHIpIHtcblx0XHRcdFx0cHJvbWlzZS5yZWplY3Qocik7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0cHJvbWlzZS5mdWxmaWxsKHIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59O1xuXG4vLyBBUEkgdXRpbGl0aWVzXG5oZWxsby51dGlscy5leHRlbmQoaGVsbG8udXRpbHMsIHtcblxuXHQvLyBNYWtlIGFuIEhUVFAgcmVxdWVzdFxuXHRyZXF1ZXN0OiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgZXJyb3IgPSBfdGhpcy5lcnJvcjtcblxuXHRcdC8vIFRoaXMgaGFzIHRvIGdvIHRocm91Z2ggYSBQT1NUIHJlcXVlc3Rcblx0XHRpZiAoIV90aGlzLmlzRW1wdHkocC5kYXRhKSAmJiAhKCdGaWxlTGlzdCcgaW4gd2luZG93KSAmJiBfdGhpcy5oYXNCaW5hcnkocC5kYXRhKSkge1xuXG5cdFx0XHQvLyBEaXNhYmxlIFhIUiBhbmQgSlNPTlBcblx0XHRcdHAueGhyID0gZmFsc2U7XG5cdFx0XHRwLmpzb25wID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgYW5kIHNlcnZpY2Ugc3VwcG9ydCBDT1JTXG5cdFx0dmFyIGNvcnMgPSB0aGlzLnJlcXVlc3RfY29ycyhmdW5jdGlvbigpIHtcblx0XHRcdC8vIElmIGl0IGRvZXMgdGhlbiBydW4gdGhpcy4uLlxuXHRcdFx0cmV0dXJuICgocC54aHIgPT09IHVuZGVmaW5lZCkgfHwgKHAueGhyICYmICh0eXBlb2YgKHAueGhyKSAhPT0gJ2Z1bmN0aW9uJyB8fCBwLnhocihwLCBwLnF1ZXJ5KSkpKTtcblx0XHR9KTtcblxuXHRcdGlmIChjb3JzKSB7XG5cblx0XHRcdGZvcm1hdFVybChwLCBmdW5jdGlvbih1cmwpIHtcblxuXHRcdFx0XHR2YXIgeCA9IF90aGlzLnhocihwLm1ldGhvZCwgdXJsLCBwLmhlYWRlcnMsIHAuZGF0YSwgY2FsbGJhY2spO1xuXHRcdFx0XHR4Lm9ucHJvZ3Jlc3MgPSBwLm9ucHJvZ3Jlc3MgfHwgbnVsbDtcblxuXHRcdFx0XHQvLyBXaW5kb3dzIFBob25lIGRvZXMgbm90IHN1cHBvcnQgeGhyLnVwbG9hZCwgc2VlICM3NFxuXHRcdFx0XHQvLyBGZWF0dXJlIGRldGVjdFxuXHRcdFx0XHRpZiAoeC51cGxvYWQgJiYgcC5vbnVwbG9hZHByb2dyZXNzKSB7XG5cdFx0XHRcdFx0eC51cGxvYWQub25wcm9ncmVzcyA9IHAub251cGxvYWRwcm9ncmVzcztcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENsb25lIHRoZSBxdWVyeSBvYmplY3Rcblx0XHQvLyBFYWNoIHJlcXVlc3QgbW9kaWZpZXMgdGhlIHF1ZXJ5IG9iamVjdCBhbmQgbmVlZHMgdG8gYmUgdGFyZWQgYWZ0ZXIgZWFjaCBvbmUuXG5cdFx0dmFyIF9xdWVyeSA9IHAucXVlcnk7XG5cblx0XHRwLnF1ZXJ5ID0gX3RoaXMuY2xvbmUocC5xdWVyeSk7XG5cblx0XHQvLyBBc3NpZ24gYSBuZXcgY2FsbGJhY2tJRFxuXHRcdHAuY2FsbGJhY2tJRCA9IF90aGlzLmdsb2JhbEV2ZW50KCk7XG5cblx0XHQvLyBKU09OUFxuXHRcdGlmIChwLmpzb25wICE9PSBmYWxzZSkge1xuXG5cdFx0XHQvLyBDbG9uZSB0aGUgcXVlcnkgb2JqZWN0XG5cdFx0XHRwLnF1ZXJ5LmNhbGxiYWNrID0gcC5jYWxsYmFja0lEO1xuXG5cdFx0XHQvLyBJZiB0aGUgSlNPTlAgaXMgYSBmdW5jdGlvbiB0aGVuIHJ1biBpdFxuXHRcdFx0aWYgKHR5cGVvZiAocC5qc29ucCkgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0cC5qc29ucChwLCBwLnF1ZXJ5KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTGV0cyB1c2UgSlNPTlAgaWYgdGhlIG1ldGhvZCBpcyAnZ2V0J1xuXHRcdFx0aWYgKHAubWV0aG9kID09PSAnZ2V0Jykge1xuXG5cdFx0XHRcdGZvcm1hdFVybChwLCBmdW5jdGlvbih1cmwpIHtcblx0XHRcdFx0XHRfdGhpcy5qc29ucCh1cmwsIGNhbGxiYWNrLCBwLmNhbGxiYWNrSUQsIHAudGltZW91dCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHQvLyBJdCdzIG5vdCBjb21wYXRpYmxlIHJlc2V0IHF1ZXJ5XG5cdFx0XHRcdHAucXVlcnkgPSBfcXVlcnk7XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UncmUgb24gdG8gdGhlIG9sZCBzY2hvb2wsIGlmcmFtZSBoYWNrcyBhbmQgSlNPTlBcblx0XHRpZiAocC5mb3JtICE9PSBmYWxzZSkge1xuXG5cdFx0XHQvLyBBZGQgc29tZSBhZGRpdGlvbmFsIHF1ZXJ5IHBhcmFtZXRlcnMgdG8gdGhlIFVSTFxuXHRcdFx0Ly8gV2UncmUgcHJldHR5IHN0dWZmZWQgaWYgdGhlIGVuZHBvaW50IGRvZXNuJ3QgbGlrZSB0aGVzZVxuXHRcdFx0cC5xdWVyeS5yZWRpcmVjdF91cmkgPSBwLnJlZGlyZWN0X3VyaTtcblx0XHRcdHAucXVlcnkuc3RhdGUgPSBKU09OLnN0cmluZ2lmeSh7Y2FsbGJhY2s6cC5jYWxsYmFja0lEfSk7XG5cblx0XHRcdHZhciBvcHRzO1xuXG5cdFx0XHRpZiAodHlwZW9mIChwLmZvcm0pID09PSAnZnVuY3Rpb24nKSB7XG5cblx0XHRcdFx0Ly8gRm9ybWF0IHRoZSByZXF1ZXN0XG5cdFx0XHRcdG9wdHMgPSBwLmZvcm0ocCwgcC5xdWVyeSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChwLm1ldGhvZCA9PT0gJ3Bvc3QnICYmIG9wdHMgIT09IGZhbHNlKSB7XG5cblx0XHRcdFx0Zm9ybWF0VXJsKHAsIGZ1bmN0aW9uKHVybCkge1xuXHRcdFx0XHRcdF90aGlzLnBvc3QodXJsLCBwLmRhdGEsIG9wdHMsIGNhbGxiYWNrLCBwLmNhbGxiYWNrSUQsIHAudGltZW91dCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBOb25lIG9mIHRoZSBtZXRob2RzIHdlcmUgc3VjY2Vzc2Z1bCB0aHJvdyBhbiBlcnJvclxuXHRcdGNhbGxiYWNrKGVycm9yKCdpbnZhbGlkX3JlcXVlc3QnLCAnVGhlcmUgd2FzIG5vIG1lY2hhbmlzbSBmb3IgaGFuZGxpbmcgdGhpcyByZXF1ZXN0JykpO1xuXG5cdFx0cmV0dXJuO1xuXG5cdFx0Ly8gRm9ybWF0IFVSTFxuXHRcdC8vIENvbnN0cnVjdHMgdGhlIHJlcXVlc3QgVVJMLCBvcHRpb25hbGx5IHdyYXBzIHRoZSBVUkwgdGhyb3VnaCBhIGNhbGwgdG8gYSBwcm94eSBzZXJ2ZXJcblx0XHQvLyBSZXR1cm5zIHRoZSBmb3JtYXR0ZWQgVVJMXG5cdFx0ZnVuY3Rpb24gZm9ybWF0VXJsKHAsIGNhbGxiYWNrKSB7XG5cblx0XHRcdC8vIEFyZSB3ZSBzaWduaW5nIHRoZSByZXF1ZXN0P1xuXHRcdFx0dmFyIHNpZ247XG5cblx0XHRcdC8vIE9BdXRoMVxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSB0b2tlbiBmcm9tIHRoZSBxdWVyeSBiZWZvcmUgc2lnbmluZ1xuXHRcdFx0aWYgKHAuYXV0aFJlc3BvbnNlICYmIHAuYXV0aFJlc3BvbnNlLm9hdXRoICYmIHBhcnNlSW50KHAuYXV0aFJlc3BvbnNlLm9hdXRoLnZlcnNpb24sIDEwKSA9PT0gMSkge1xuXG5cdFx0XHRcdC8vIE9BVVRIIFNJR05JTkcgUFJPWFlcblx0XHRcdFx0c2lnbiA9IHAucXVlcnkuYWNjZXNzX3Rva2VuO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSB0aGUgYWNjZXNzX3Rva2VuXG5cdFx0XHRcdGRlbGV0ZSBwLnF1ZXJ5LmFjY2Vzc190b2tlbjtcblxuXHRcdFx0XHQvLyBFbmZvcmUgdXNlIG9mIFByb3h5XG5cdFx0XHRcdHAucHJveHkgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQT1NUIGJvZHkgdG8gcXVlcnlzdHJpbmdcblx0XHRcdGlmIChwLmRhdGEgJiYgKHAubWV0aG9kID09PSAnZ2V0JyB8fCBwLm1ldGhvZCA9PT0gJ2RlbGV0ZScpKSB7XG5cdFx0XHRcdC8vIEF0dGFjaCB0aGUgcC5kYXRhIHRvIHRoZSBxdWVyeXN0cmluZy5cblx0XHRcdFx0X3RoaXMuZXh0ZW5kKHAucXVlcnksIHAuZGF0YSk7XG5cdFx0XHRcdHAuZGF0YSA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnN0cnVjdCB0aGUgcGF0aFxuXHRcdFx0dmFyIHBhdGggPSBfdGhpcy5xcyhwLnVybCwgcC5xdWVyeSk7XG5cblx0XHRcdC8vIFByb3h5IHRoZSByZXF1ZXN0IHRocm91Z2ggYSBzZXJ2ZXJcblx0XHRcdC8vIFVzZWQgZm9yIHNpZ25pbmcgT0F1dGgxXG5cdFx0XHQvLyBBbmQgY2lyY3VtdmVudGluZyBzZXJ2aWNlcyB3aXRob3V0IEFjY2Vzcy1Db250cm9sIEhlYWRlcnNcblx0XHRcdGlmIChwLnByb3h5KSB7XG5cdFx0XHRcdC8vIFVzZSB0aGUgcHJveHkgYXMgYSBwYXRoXG5cdFx0XHRcdHBhdGggPSBfdGhpcy5xcyhwLm9hdXRoX3Byb3h5LCB7XG5cdFx0XHRcdFx0cGF0aDogcGF0aCxcblx0XHRcdFx0XHRhY2Nlc3NfdG9rZW46IHNpZ24gfHwgJycsXG5cblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgcHJvbXB0IHRoZSByZXF1ZXN0IHRvIGJlIHNpZ25lZCBhcyB0aG91Z2ggaXQgaXMgT0F1dGgxXG5cdFx0XHRcdFx0dGhlbjogcC5wcm94eV9yZXNwb25zZV90eXBlIHx8IChwLm1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSAnZ2V0JyA/ICdyZWRpcmVjdCcgOiAncHJveHknKSxcblx0XHRcdFx0XHRtZXRob2Q6IHAubWV0aG9kLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0c3VwcHJlc3NfcmVzcG9uc2VfY29kZXM6IHRydWVcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGNhbGxiYWNrKHBhdGgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBUZXN0IHdoZXRoZXIgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIENPUlMgcmVzcG9uc2Vcblx0cmVxdWVzdF9jb3JzOiBmdW5jdGlvbihjYWxsYmFjaykge1xuXHRcdHJldHVybiAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKSAmJiBjYWxsYmFjaygpO1xuXHR9LFxuXG5cdC8vIFJldHVybiB0aGUgdHlwZSBvZiBET00gb2JqZWN0XG5cdGRvbUluc3RhbmNlOiBmdW5jdGlvbih0eXBlLCBkYXRhKSB7XG5cdFx0dmFyIHRlc3QgPSAnSFRNTCcgKyAodHlwZSB8fCAnJykucmVwbGFjZShcblx0XHRcdC9eW2Etel0vLFxuXHRcdFx0ZnVuY3Rpb24obSkge1xuXHRcdFx0XHRyZXR1cm4gbS50b1VwcGVyQ2FzZSgpO1xuXHRcdFx0fVxuXG5cdFx0KSArICdFbGVtZW50JztcblxuXHRcdGlmICghZGF0YSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGlmICh3aW5kb3dbdGVzdF0pIHtcblx0XHRcdHJldHVybiBkYXRhIGluc3RhbmNlb2Ygd2luZG93W3Rlc3RdO1xuXHRcdH1cblx0XHRlbHNlIGlmICh3aW5kb3cuRWxlbWVudCkge1xuXHRcdFx0cmV0dXJuIGRhdGEgaW5zdGFuY2VvZiB3aW5kb3cuRWxlbWVudCAmJiAoIXR5cGUgfHwgKGRhdGEudGFnTmFtZSAmJiBkYXRhLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdHlwZSkpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiAoIShkYXRhIGluc3RhbmNlb2YgT2JqZWN0IHx8IGRhdGEgaW5zdGFuY2VvZiBBcnJheSB8fCBkYXRhIGluc3RhbmNlb2YgU3RyaW5nIHx8IGRhdGEgaW5zdGFuY2VvZiBOdW1iZXIpICYmIGRhdGEudGFnTmFtZSAmJiBkYXRhLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdHlwZSk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIENyZWF0ZSBhIGNsb25lIG9mIGFuIG9iamVjdFxuXHRjbG9uZTogZnVuY3Rpb24ob2JqKSB7XG5cdFx0Ly8gRG9lcyBub3QgY2xvbmUgRE9NIGVsZW1lbnRzLCBub3IgQmluYXJ5IGRhdGEsIGUuZy4gQmxvYnMsIEZpbGVsaXN0c1xuXHRcdGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIChvYmopICE9PSAnb2JqZWN0JyB8fCBvYmogaW5zdGFuY2VvZiBEYXRlIHx8ICdub2RlTmFtZScgaW4gb2JqIHx8IHRoaXMuaXNCaW5hcnkob2JqKSB8fCAodHlwZW9mIEZvcm1EYXRhID09PSAnZnVuY3Rpb24nICYmIG9iaiBpbnN0YW5jZW9mIEZvcm1EYXRhKSkge1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG5cdFx0XHQvLyBDbG9uZSBlYWNoIGl0ZW0gaW4gdGhlIGFycmF5XG5cdFx0XHRyZXR1cm4gb2JqLm1hcCh0aGlzLmNsb25lLmJpbmQodGhpcykpO1xuXHRcdH1cblxuXHRcdC8vIEJ1dCBkb2VzIGNsb25lIGV2ZXJ5dGhpbmcgZWxzZS5cblx0XHR2YXIgY2xvbmUgPSB7fTtcblx0XHRmb3IgKHZhciB4IGluIG9iaikge1xuXHRcdFx0Y2xvbmVbeF0gPSB0aGlzLmNsb25lKG9ialt4XSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9LFxuXG5cdC8vIFhIUjogdXNlcyBDT1JTIHRvIG1ha2UgcmVxdWVzdHNcblx0eGhyOiBmdW5jdGlvbihtZXRob2QsIHVybCwgaGVhZGVycywgZGF0YSwgY2FsbGJhY2spIHtcblxuXHRcdHZhciByID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFx0dmFyIGVycm9yID0gdGhpcy5lcnJvcjtcblxuXHRcdC8vIEJpbmFyeT9cblx0XHR2YXIgYmluYXJ5ID0gZmFsc2U7XG5cdFx0aWYgKG1ldGhvZCA9PT0gJ2Jsb2InKSB7XG5cdFx0XHRiaW5hcnkgPSBtZXRob2Q7XG5cdFx0XHRtZXRob2QgPSAnR0VUJztcblx0XHR9XG5cblx0XHRtZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIFhoci5yZXNwb25zZVR5cGUgJ2pzb24nIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYW55IG9mIHRoZSB2ZW5kb3JzIHlldC5cblx0XHRyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdHZhciBqc29uID0gci5yZXNwb25zZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGpzb24gPSBKU09OLnBhcnNlKHIucmVzcG9uc2VUZXh0KTtcblx0XHRcdH1cblx0XHRcdGNhdGNoIChfZSkge1xuXHRcdFx0XHRpZiAoci5zdGF0dXMgPT09IDQwMSkge1xuXHRcdFx0XHRcdGpzb24gPSBlcnJvcignYWNjZXNzX2RlbmllZCcsIHIuc3RhdHVzVGV4dCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dmFyIGhlYWRlcnMgPSBoZWFkZXJzVG9KU09OKHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHRcdFx0aGVhZGVycy5zdGF0dXNDb2RlID0gci5zdGF0dXM7XG5cblx0XHRcdGNhbGxiYWNrKGpzb24gfHwgKG1ldGhvZCA9PT0gJ0dFVCcgPyBlcnJvcignZW1wdHlfcmVzcG9uc2UnLCAnQ291bGQgbm90IGdldCByZXNvdXJjZScpIDoge30pLCBoZWFkZXJzKTtcblx0XHR9O1xuXG5cdFx0ci5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0dmFyIGpzb24gPSByLnJlc3BvbnNlVGV4dDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGpzb24gPSBKU09OLnBhcnNlKHIucmVzcG9uc2VUZXh0KTtcblx0XHRcdH1cblx0XHRcdGNhdGNoIChfZSkge31cblxuXHRcdFx0Y2FsbGJhY2soanNvbiB8fCBlcnJvcignYWNjZXNzX2RlbmllZCcsICdDb3VsZCBub3QgZ2V0IHJlc291cmNlJykpO1xuXHRcdH07XG5cblx0XHR2YXIgeDtcblxuXHRcdC8vIFNob3VsZCB3ZSBhZGQgdGhlIHF1ZXJ5IHRvIHRoZSBVUkw/XG5cdFx0aWYgKG1ldGhvZCA9PT0gJ0dFVCcgfHwgbWV0aG9kID09PSAnREVMRVRFJykge1xuXHRcdFx0ZGF0YSA9IG51bGw7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGRhdGEgJiYgdHlwZW9mIChkYXRhKSAhPT0gJ3N0cmluZycgJiYgIShkYXRhIGluc3RhbmNlb2YgRm9ybURhdGEpICYmICEoZGF0YSBpbnN0YW5jZW9mIEZpbGUpICYmICEoZGF0YSBpbnN0YW5jZW9mIEJsb2IpKSB7XG5cdFx0XHQvLyBMb29wIHRocm91Z2ggYW5kIGFkZCBmb3JtRGF0YVxuXHRcdFx0dmFyIGYgPSBuZXcgRm9ybURhdGEoKTtcblx0XHRcdGZvciAoeCBpbiBkYXRhKSBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSh4KSkge1xuXHRcdFx0XHRpZiAoZGF0YVt4XSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0XHRcdFx0XHRpZiAoJ2ZpbGVzJyBpbiBkYXRhW3hdICYmIGRhdGFbeF0uZmlsZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Zi5hcHBlbmQoeCwgZGF0YVt4XS5maWxlc1swXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKGRhdGFbeF0gaW5zdGFuY2VvZiBCbG9iKSB7XG5cdFx0XHRcdFx0Zi5hcHBlbmQoeCwgZGF0YVt4XSwgZGF0YS5uYW1lKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRmLmFwcGVuZCh4LCBkYXRhW3hdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRkYXRhID0gZjtcblx0XHR9XG5cblx0XHQvLyBPcGVuIHRoZSBwYXRoLCBhc3luY1xuXHRcdHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG5cblx0XHRpZiAoYmluYXJ5KSB7XG5cdFx0XHRpZiAoJ3Jlc3BvbnNlVHlwZScgaW4gcikge1xuXHRcdFx0XHRyLnJlc3BvbnNlVHlwZSA9IGJpbmFyeTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRyLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWQnKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTZXQgYW55IGJlc3Bva2UgaGVhZGVyc1xuXHRcdGlmIChoZWFkZXJzKSB7XG5cdFx0XHRmb3IgKHggaW4gaGVhZGVycykge1xuXHRcdFx0XHRyLnNldFJlcXVlc3RIZWFkZXIoeCwgaGVhZGVyc1t4XSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ci5zZW5kKGRhdGEpO1xuXG5cdFx0cmV0dXJuIHI7XG5cblx0XHQvLyBIZWFkZXJzIGFyZSByZXR1cm5lZCBhcyBhIHN0cmluZ1xuXHRcdGZ1bmN0aW9uIGhlYWRlcnNUb0pTT04ocykge1xuXHRcdFx0dmFyIHIgPSB7fTtcblx0XHRcdHZhciByZWcgPSAvKFthLXpcXC1dKyk6XFxzPyguKik7Py9naTtcblx0XHRcdHZhciBtO1xuXHRcdFx0d2hpbGUgKChtID0gcmVnLmV4ZWMocykpKSB7XG5cdFx0XHRcdHJbbVsxXV0gPSBtWzJdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcjtcblx0XHR9XG5cdH0sXG5cblx0Ly8gSlNPTlBcblx0Ly8gSW5qZWN0cyBhIHNjcmlwdCB0YWcgaW50byB0aGUgRE9NIHRvIGJlIGV4ZWN1dGVkIGFuZCBhcHBlbmRzIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdGhlIHdpbmRvdyBvYmplY3Rcblx0Ly8gQHBhcmFtIHN0cmluZy9mdW5jdGlvbiBwYXRoRnVuYyBlaXRoZXIgYSBzdHJpbmcgb2YgdGhlIFVSTCBvciBhIGNhbGxiYWNrIGZ1bmN0aW9uIHBhdGhGdW5jKHF1ZXJ5c3RyaW5naGFzaCwgY29udGludWVGdW5jKTtcblx0Ly8gQHBhcmFtIGZ1bmN0aW9uIGNhbGxiYWNrIGEgZnVuY3Rpb24gdG8gY2FsbCBvbiBjb21wbGV0aW9uO1xuXHRqc29ucDogZnVuY3Rpb24odXJsLCBjYWxsYmFjaywgY2FsbGJhY2tJRCwgdGltZW91dCkge1xuXG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgZXJyb3IgPSBfdGhpcy5lcnJvcjtcblxuXHRcdC8vIENoYW5nZSB0aGUgbmFtZSBvZiB0aGUgY2FsbGJhY2tcblx0XHR2YXIgYm9vbCA9IDA7XG5cdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuXHRcdHZhciBvcGVyYUZpeDtcblx0XHR2YXIgcmVzdWx0ID0gZXJyb3IoJ3NlcnZlcl9lcnJvcicsICdzZXJ2ZXJfZXJyb3InKTtcblx0XHR2YXIgY2IgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICghKGJvb2wrKykpIHtcblx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2socmVzdWx0KTtcblx0XHRcdFx0XHRoZWFkLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdFx0XHRcdH0sIDApO1xuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdC8vIEFkZCBjYWxsYmFjayB0byB0aGUgd2luZG93IG9iamVjdFxuXHRcdGNhbGxiYWNrSUQgPSBfdGhpcy5nbG9iYWxFdmVudChmdW5jdGlvbihqc29uKSB7XG5cdFx0XHRyZXN1bHQgPSBqc29uO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdC8vIE1hcmsgY2FsbGJhY2sgYXMgZG9uZVxuXHRcdH0sIGNhbGxiYWNrSUQpO1xuXG5cdFx0Ly8gVGhlIFVSTCBpcyBhIGZ1bmN0aW9uIGZvciBzb21lIGNhc2VzIGFuZCBhcyBzdWNoXG5cdFx0Ly8gRGV0ZXJtaW5lIGl0cyB2YWx1ZSB3aXRoIGEgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgbmV3IHBhcmFtZXRlcnMgb2YgdGhpcyBmdW5jdGlvbi5cblx0XHR1cmwgPSB1cmwucmVwbGFjZShuZXcgUmVnRXhwKCc9XFxcXD8oJnwkKScpLCAnPScgKyBjYWxsYmFja0lEICsgJyQxJyk7XG5cblx0XHQvLyBCdWlsZCBzY3JpcHQgdGFnXG5cdFx0dmFyIHNjcmlwdCA9IF90aGlzLmFwcGVuZCgnc2NyaXB0Jywge1xuXHRcdFx0aWQ6IGNhbGxiYWNrSUQsXG5cdFx0XHRuYW1lOiBjYWxsYmFja0lELFxuXHRcdFx0c3JjOiB1cmwsXG5cdFx0XHRhc3luYzogdHJ1ZSxcblx0XHRcdG9ubG9hZDogY2IsXG5cdFx0XHRvbmVycm9yOiBjYixcblx0XHRcdG9ucmVhZHlzdGF0ZWNoYW5nZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICgvbG9hZGVkfGNvbXBsZXRlL2kudGVzdCh0aGlzLnJlYWR5U3RhdGUpKSB7XG5cdFx0XHRcdFx0Y2IoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gT3BlcmEgZml4IGVycm9yXG5cdFx0Ly8gUHJvYmxlbTogSWYgYW4gZXJyb3Igb2NjdXJzIHdpdGggc2NyaXB0IGxvYWRpbmcgT3BlcmEgZmFpbHMgdG8gdHJpZ2dlciB0aGUgc2NyaXB0Lm9uZXJyb3IgaGFuZGxlciB3ZSBzcGVjaWZpZWRcblx0XHQvL1xuXHRcdC8vIEZpeDpcblx0XHQvLyBCeSBzZXR0aW5nIHRoZSByZXF1ZXN0IHRvIHN5bmNocm9ub3VzIHdlIGNhbiB0cmlnZ2VyIHRoZSBlcnJvciBoYW5kbGVyIHdoZW4gYWxsIGVsc2UgZmFpbHMuXG5cdFx0Ly8gVGhpcyBhY3Rpb24gd2lsbCBiZSBpZ25vcmVkIGlmIHdlJ3ZlIGFscmVhZHkgY2FsbGVkIHRoZSBjYWxsYmFjayBoYW5kbGVyIFwiY2JcIiB3aXRoIGEgc3VjY2Vzc2Z1bCBvbmxvYWQgZXZlbnRcblx0XHRpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdvcGVyYScpID4gLTEpIHtcblx0XHRcdG9wZXJhRml4ID0gX3RoaXMuYXBwZW5kKCdzY3JpcHQnLCB7XG5cdFx0XHRcdHRleHQ6ICdkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXCcnICsgY2FsbGJhY2tJRCArICdcXCcpLm9uZXJyb3IoKTsnXG5cdFx0XHR9KTtcblx0XHRcdHNjcmlwdC5hc3luYyA9IGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIEFkZCB0aW1lb3V0XG5cdFx0aWYgKHRpbWVvdXQpIHtcblx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXN1bHQgPSBlcnJvcigndGltZW91dCcsICd0aW1lb3V0Jyk7XG5cdFx0XHRcdGNiKCk7XG5cdFx0XHR9LCB0aW1lb3V0KTtcblx0XHR9XG5cblx0XHQvLyBUT0RPOiBhZGQgZml4IGZvciBJRSxcblx0XHQvLyBIb3dldmVyOiB1bmFibGUgcmVjcmVhdGUgdGhlIGJ1ZyBvZiBmaXJpbmcgb2ZmIHRoZSBvbnJlYWR5c3RhdGVjaGFuZ2UgYmVmb3JlIHRoZSBzY3JpcHQgY29udGVudCBoYXMgYmVlbiBleGVjdXRlZCBhbmQgdGhlIHZhbHVlIG9mIFwicmVzdWx0XCIgaGFzIGJlZW4gZGVmaW5lZC5cblx0XHQvLyBJbmplY3Qgc2NyaXB0IHRhZyBpbnRvIHRoZSBoZWFkIGVsZW1lbnRcblx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cblx0XHQvLyBBcHBlbmQgT3BlcmEgRml4IHRvIHJ1biBhZnRlciBvdXIgc2NyaXB0XG5cdFx0aWYgKG9wZXJhRml4KSB7XG5cdFx0XHRoZWFkLmFwcGVuZENoaWxkKG9wZXJhRml4KTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gUG9zdFxuXHQvLyBTZW5kIGluZm9ybWF0aW9uIHRvIGEgcmVtb3RlIGxvY2F0aW9uIHVzaW5nIHRoZSBwb3N0IG1lY2hhbmlzbVxuXHQvLyBAcGFyYW0gc3RyaW5nIHVyaSBwYXRoXG5cdC8vIEBwYXJhbSBvYmplY3QgZGF0YSwga2V5IHZhbHVlIGRhdGEgdG8gc2VuZFxuXHQvLyBAcGFyYW0gZnVuY3Rpb24gY2FsbGJhY2ssIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgaW4gcmVzcG9uc2Vcblx0cG9zdDogZnVuY3Rpb24odXJsLCBkYXRhLCBvcHRpb25zLCBjYWxsYmFjaywgY2FsbGJhY2tJRCwgdGltZW91dCkge1xuXG5cdFx0dmFyIF90aGlzID0gdGhpcztcblx0XHR2YXIgZXJyb3IgPSBfdGhpcy5lcnJvcjtcblx0XHR2YXIgZG9jID0gZG9jdW1lbnQ7XG5cblx0XHQvLyBUaGlzIGhhY2sgbmVlZHMgYSBmb3JtXG5cdFx0dmFyIGZvcm0gPSBudWxsO1xuXHRcdHZhciByZWVuYWJsZUFmdGVyU3VibWl0ID0gW107XG5cdFx0dmFyIG5ld2Zvcm07XG5cdFx0dmFyIGkgPSAwO1xuXHRcdHZhciB4ID0gbnVsbDtcblx0XHR2YXIgYm9vbCA9IDA7XG5cdFx0dmFyIGNiID0gZnVuY3Rpb24ocikge1xuXHRcdFx0aWYgKCEoYm9vbCsrKSkge1xuXHRcdFx0XHRjYWxsYmFjayhyKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gV2hhdCBpcyB0aGUgbmFtZSBvZiB0aGUgY2FsbGJhY2sgdG8gY29udGFpblxuXHRcdC8vIFdlJ2xsIGFsc28gdXNlIHRoaXMgdG8gbmFtZSB0aGUgaWZyYW1lXG5cdFx0X3RoaXMuZ2xvYmFsRXZlbnQoY2IsIGNhbGxiYWNrSUQpO1xuXG5cdFx0Ly8gQnVpbGQgdGhlIGlmcmFtZSB3aW5kb3dcblx0XHR2YXIgd2luO1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBJRTcgaGFjaywgb25seSBsZXRzIHVzIGRlZmluZSB0aGUgbmFtZSBoZXJlLCBub3QgbGF0ZXIuXG5cdFx0XHR3aW4gPSBkb2MuY3JlYXRlRWxlbWVudCgnPGlmcmFtZSBuYW1lPVwiJyArIGNhbGxiYWNrSUQgKyAnXCI+Jyk7XG5cdFx0fVxuXHRcdGNhdGNoIChlKSB7XG5cdFx0XHR3aW4gPSBkb2MuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG5cdFx0fVxuXG5cdFx0d2luLm5hbWUgPSBjYWxsYmFja0lEO1xuXHRcdHdpbi5pZCA9IGNhbGxiYWNrSUQ7XG5cdFx0d2luLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cblx0XHQvLyBPdmVycmlkZSBjYWxsYmFjayBtZWNoYW5pc20uIFRyaWdnZ2VyIGEgcmVzcG9uc2Ugb25sb2FkL29uZXJyb3Jcblx0XHRpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNhbGxiYWNrb25sb2FkKSB7XG5cdFx0XHQvLyBPbmxvYWQgaXMgYmVpbmcgZmlyZWQgdHdpY2Vcblx0XHRcdHdpbi5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2Ioe1xuXHRcdFx0XHRcdHJlc3BvbnNlOiAncG9zdGVkJyxcblx0XHRcdFx0XHRtZXNzYWdlOiAnQ29udGVudCB3YXMgcG9zdGVkJ1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0aWYgKHRpbWVvdXQpIHtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNiKGVycm9yKCd0aW1lb3V0JywgJ1RoZSBwb3N0IG9wZXJhdGlvbiB0aW1lZCBvdXQnKSk7XG5cdFx0XHR9LCB0aW1lb3V0KTtcblx0XHR9XG5cblx0XHRkb2MuYm9keS5hcHBlbmRDaGlsZCh3aW4pO1xuXG5cdFx0Ly8gSWYgd2UgYXJlIGp1c3QgcG9zdGluZyBhIHNpbmdsZSBpdGVtXG5cdFx0aWYgKF90aGlzLmRvbUluc3RhbmNlKCdmb3JtJywgZGF0YSkpIHtcblx0XHRcdC8vIEdldCB0aGUgcGFyZW50IGZvcm1cblx0XHRcdGZvcm0gPSBkYXRhLmZvcm07XG5cblx0XHRcdC8vIExvb3AgdGhyb3VnaCBhbmQgZGlzYWJsZSBhbGwgb2YgaXRzIHNpYmxpbmdzXG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgZm9ybS5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoZm9ybS5lbGVtZW50c1tpXSAhPT0gZGF0YSkge1xuXHRcdFx0XHRcdGZvcm0uZWxlbWVudHNbaV0uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1vdmUgdGhlIGZvY3VzIHRvIHRoZSBmb3JtXG5cdFx0XHRkYXRhID0gZm9ybTtcblx0XHR9XG5cblx0XHQvLyBQb3N0aW5nIGEgZm9ybVxuXHRcdGlmIChfdGhpcy5kb21JbnN0YW5jZSgnZm9ybScsIGRhdGEpKSB7XG5cdFx0XHQvLyBUaGlzIGlzIGEgZm9ybSBlbGVtZW50XG5cdFx0XHRmb3JtID0gZGF0YTtcblxuXHRcdFx0Ly8gRG9lcyB0aGlzIGZvcm0gbmVlZCB0byBiZSBhIG11bHRpcGFydCBmb3JtP1xuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGZvcm0uZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKCFmb3JtLmVsZW1lbnRzW2ldLmRpc2FibGVkICYmIGZvcm0uZWxlbWVudHNbaV0udHlwZSA9PT0gJ2ZpbGUnKSB7XG5cdFx0XHRcdFx0Zm9ybS5lbmNvZGluZyA9IGZvcm0uZW5jdHlwZSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJztcblx0XHRcdFx0XHRmb3JtLmVsZW1lbnRzW2ldLnNldEF0dHJpYnV0ZSgnbmFtZScsICdmaWxlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHQvLyBJdHMgbm90IGEgZm9ybSBlbGVtZW50LFxuXHRcdFx0Ly8gVGhlcmVmb3JlIGl0IG11c3QgYmUgYSBKU09OIG9iamVjdCBvZiBLZXk9PlZhbHVlIG9yIEtleT0+RWxlbWVudFxuXHRcdFx0Ly8gSWYgYW55b25lIG9mIHRob3NlIHZhbHVlcyBhcmUgYSBpbnB1dCB0eXBlPWZpbGUgd2Ugc2hhbGwgc2hhbGwgaW5zZXJ0IGl0cyBzaWJsaW5ncyBpbnRvIHRoZSBmb3JtIGZvciB3aGljaCBpdCBiZWxvbmdzLlxuXHRcdFx0Zm9yICh4IGluIGRhdGEpIGlmIChkYXRhLmhhc093blByb3BlcnR5KHgpKSB7XG5cdFx0XHRcdC8vIElzIHRoaXMgYW4gaW5wdXQgRWxlbWVudD9cblx0XHRcdFx0aWYgKF90aGlzLmRvbUluc3RhbmNlKCdpbnB1dCcsIGRhdGFbeF0pICYmIGRhdGFbeF0udHlwZSA9PT0gJ2ZpbGUnKSB7XG5cdFx0XHRcdFx0Zm9ybSA9IGRhdGFbeF0uZm9ybTtcblx0XHRcdFx0XHRmb3JtLmVuY29kaW5nID0gZm9ybS5lbmN0eXBlID0gJ211bHRpcGFydC9mb3JtLWRhdGEnO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIERvIElmIHRoZXJlIGlzIG5vIGRlZmluZWQgZm9ybSBlbGVtZW50LCBsZXRzIGNyZWF0ZSBvbmUuXG5cdFx0XHRpZiAoIWZvcm0pIHtcblx0XHRcdFx0Ly8gQnVpbGQgZm9ybVxuXHRcdFx0XHRmb3JtID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcblx0XHRcdFx0ZG9jLmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cdFx0XHRcdG5ld2Zvcm0gPSBmb3JtO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgaW5wdXQ7XG5cblx0XHRcdC8vIEFkZCBlbGVtZW50cyB0byB0aGUgZm9ybSBpZiB0aGV5IGRvbnQgZXhpc3Rcblx0XHRcdGZvciAoeCBpbiBkYXRhKSBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSh4KSkge1xuXG5cdFx0XHRcdC8vIElzIHRoaXMgYW4gZWxlbWVudD9cblx0XHRcdFx0dmFyIGVsID0gKF90aGlzLmRvbUluc3RhbmNlKCdpbnB1dCcsIGRhdGFbeF0pIHx8IF90aGlzLmRvbUluc3RhbmNlKCd0ZXh0QXJlYScsIGRhdGFbeF0pIHx8IF90aGlzLmRvbUluc3RhbmNlKCdzZWxlY3QnLCBkYXRhW3hdKSk7XG5cblx0XHRcdFx0Ly8gSXMgdGhpcyBub3QgYW4gaW5wdXQgZWxlbWVudCwgb3Igb25lIHRoYXQgZXhpc3RzIG91dHNpZGUgdGhlIGZvcm0uXG5cdFx0XHRcdGlmICghZWwgfHwgZGF0YVt4XS5mb3JtICE9PSBmb3JtKSB7XG5cblx0XHRcdFx0XHQvLyBEb2VzIGFuIGVsZW1lbnQgaGF2ZSB0aGUgc2FtZSBuYW1lP1xuXHRcdFx0XHRcdHZhciBpbnB1dHMgPSBmb3JtLmVsZW1lbnRzW3hdO1xuXHRcdFx0XHRcdGlmIChpbnB1dCkge1xuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGl0LlxuXHRcdFx0XHRcdFx0aWYgKCEoaW5wdXRzIGluc3RhbmNlb2YgTm9kZUxpc3QpKSB7XG5cdFx0XHRcdFx0XHRcdGlucHV0cyA9IFtpbnB1dHNdO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdGlucHV0c1tpXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlucHV0c1tpXSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBDcmVhdGUgYW4gaW5wdXQgZWxlbWVudFxuXHRcdFx0XHRcdGlucHV0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cdFx0XHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2hpZGRlbicpO1xuXHRcdFx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsIHgpO1xuXG5cdFx0XHRcdFx0Ly8gRG9lcyBpdCBoYXZlIGEgdmFsdWUgYXR0cmlidXRlP1xuXHRcdFx0XHRcdGlmIChlbCkge1xuXHRcdFx0XHRcdFx0aW5wdXQudmFsdWUgPSBkYXRhW3hdLnZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGlmIChfdGhpcy5kb21JbnN0YW5jZShudWxsLCBkYXRhW3hdKSkge1xuXHRcdFx0XHRcdFx0aW5wdXQudmFsdWUgPSBkYXRhW3hdLmlubmVySFRNTCB8fCBkYXRhW3hdLmlubmVyVGV4dDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRpbnB1dC52YWx1ZSA9IGRhdGFbeF07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Zm9ybS5hcHBlbmRDaGlsZChpbnB1dCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJdCBpcyBhbiBlbGVtZW50LCB3aGljaCBleGlzdHMgd2l0aGluIHRoZSBmb3JtLCBidXQgdGhlIG5hbWUgaXMgd3Jvbmdcblx0XHRcdFx0ZWxzZSBpZiAoZWwgJiYgZGF0YVt4XS5uYW1lICE9PSB4KSB7XG5cdFx0XHRcdFx0ZGF0YVt4XS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCB4KTtcblx0XHRcdFx0XHRkYXRhW3hdLm5hbWUgPSB4O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIERpc2FibGUgZWxlbWVudHMgZnJvbSB3aXRoaW4gdGhlIGZvcm0gaWYgdGhleSB3ZXJlbid0IHNwZWNpZmllZFxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IGZvcm0uZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblxuXHRcdFx0XHRpbnB1dCA9IGZvcm0uZWxlbWVudHNbaV07XG5cblx0XHRcdFx0Ly8gRG9lcyB0aGUgc2FtZSBuYW1lIGFuZCB2YWx1ZSBleGlzdCBpbiB0aGUgcGFyZW50XG5cdFx0XHRcdGlmICghKGlucHV0Lm5hbWUgaW4gZGF0YSkgJiYgaW5wdXQuZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpICE9PSB0cnVlKSB7XG5cdFx0XHRcdFx0Ly8gRGlzYWJsZVxuXHRcdFx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcblxuXHRcdFx0XHRcdC8vIEFkZCByZS1lbmFibGUgdG8gY2FsbGJhY2tcblx0XHRcdFx0XHRyZWVuYWJsZUFmdGVyU3VibWl0LnB1c2goaW5wdXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSB0YXJnZXQgb2YgdGhlIGZvcm1cblx0XHRmb3JtLnNldEF0dHJpYnV0ZSgnbWV0aG9kJywgJ1BPU1QnKTtcblx0XHRmb3JtLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgY2FsbGJhY2tJRCk7XG5cdFx0Zm9ybS50YXJnZXQgPSBjYWxsYmFja0lEO1xuXG5cdFx0Ly8gVXBkYXRlIHRoZSBmb3JtIFVSTFxuXHRcdGZvcm0uc2V0QXR0cmlidXRlKCdhY3Rpb24nLCB1cmwpO1xuXG5cdFx0Ly8gU3VibWl0IHRoZSBmb3JtXG5cdFx0Ly8gU29tZSByZWFzb24gdGhpcyBuZWVkcyB0byBiZSBvZmZzZXQgZnJvbSB0aGUgY3VycmVudCB3aW5kb3cgZXhlY3V0aW9uXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdGZvcm0uc3VibWl0KCk7XG5cblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBpZnJhbWUgZnJvbSB0aGUgcGFnZS5cblx0XHRcdFx0XHQvL3dpbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHdpbik7XG5cdFx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBmb3JtXG5cdFx0XHRcdFx0aWYgKG5ld2Zvcm0pIHtcblx0XHRcdFx0XHRcdG5ld2Zvcm0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuZXdmb3JtKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2F0Y2ggKGUpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignSGVsbG9KUzogY291bGQgbm90IHJlbW92ZSBpZnJhbWUnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2F0Y2ggKGVlKSB7fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVlbmFibGUgdGhlIGRpc2FibGVkIGZvcm1cblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZWVuYWJsZUFmdGVyU3VibWl0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKHJlZW5hYmxlQWZ0ZXJTdWJtaXRbaV0pIHtcblx0XHRcdFx0XHRcdHJlZW5hYmxlQWZ0ZXJTdWJtaXRbaV0uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdFx0XHRcdHJlZW5hYmxlQWZ0ZXJTdWJtaXRbaV0uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIDApO1xuXHRcdH0sIDEwMCk7XG5cdH0sXG5cblx0Ly8gU29tZSBvZiB0aGUgcHJvdmlkZXJzIHJlcXVpcmUgdGhhdCBvbmx5IG11bHRpcGFydCBpcyB1c2VkIHdpdGggbm9uLWJpbmFyeSBmb3Jtcy5cblx0Ly8gVGhpcyBmdW5jdGlvbiBjaGVja3Mgd2hldGhlciB0aGUgZm9ybSBjb250YWlucyBiaW5hcnkgZGF0YVxuXHRoYXNCaW5hcnk6IGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRmb3IgKHZhciB4IGluIGRhdGEpIGlmIChkYXRhLmhhc093blByb3BlcnR5KHgpKSB7XG5cdFx0XHRpZiAodGhpcy5pc0JpbmFyeShkYXRhW3hdKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lcyBpZiBhIHZhcmlhYmxlIEVpdGhlciBJcyBvciBsaWtlIGEgRm9ybUlucHV0IGhhcyB0aGUgdmFsdWUgb2YgYSBCbG9iXG5cblx0aXNCaW5hcnk6IGZ1bmN0aW9uKGRhdGEpIHtcblxuXHRcdHJldHVybiBkYXRhIGluc3RhbmNlb2YgT2JqZWN0ICYmIChcblx0XHQodGhpcy5kb21JbnN0YW5jZSgnaW5wdXQnLCBkYXRhKSAmJiBkYXRhLnR5cGUgPT09ICdmaWxlJykgfHxcblx0XHQoJ0ZpbGVMaXN0JyBpbiB3aW5kb3cgJiYgZGF0YSBpbnN0YW5jZW9mIHdpbmRvdy5GaWxlTGlzdCkgfHxcblx0XHQoJ0ZpbGUnIGluIHdpbmRvdyAmJiBkYXRhIGluc3RhbmNlb2Ygd2luZG93LkZpbGUpIHx8XG5cdFx0KCdCbG9iJyBpbiB3aW5kb3cgJiYgZGF0YSBpbnN0YW5jZW9mIHdpbmRvdy5CbG9iKSk7XG5cblx0fSxcblxuXHQvLyBDb252ZXJ0IERhdGEtVVJJIHRvIEJsb2Igc3RyaW5nXG5cdHRvQmxvYjogZnVuY3Rpb24oZGF0YVVSSSkge1xuXHRcdHZhciByZWcgPSAvXmRhdGFcXDooW147LF0rKFxcO2NoYXJzZXQ9W147LF0rKT8pKFxcO2Jhc2U2NCk/LC9pO1xuXHRcdHZhciBtID0gZGF0YVVSSS5tYXRjaChyZWcpO1xuXHRcdGlmICghbSkge1xuXHRcdFx0cmV0dXJuIGRhdGFVUkk7XG5cdFx0fVxuXG5cdFx0dmFyIGJpbmFyeSA9IGF0b2IoZGF0YVVSSS5yZXBsYWNlKHJlZywgJycpKTtcblx0XHR2YXIgYXJyYXkgPSBbXTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGJpbmFyeS5sZW5ndGg7IGkrKykge1xuXHRcdFx0YXJyYXkucHVzaChiaW5hcnkuY2hhckNvZGVBdChpKSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ldyBCbG9iKFtuZXcgVWludDhBcnJheShhcnJheSldLCB7dHlwZTogbVsxXX0pO1xuXHR9XG5cbn0pO1xuXG4vLyBFWFRSQTogQ29udmVydCBGb3JtRWxlbWVudCB0byBKU09OIGZvciBQT1NUaW5nXG4vLyBXcmFwcGVycyB0byBhZGQgYWRkaXRpb25hbCBmdW5jdGlvbmFsaXR5IHRvIGV4aXN0aW5nIGZ1bmN0aW9uc1xuKGZ1bmN0aW9uKGhlbGxvKSB7XG5cblx0Ly8gQ29weSBvcmlnaW5hbCBmdW5jdGlvblxuXHR2YXIgYXBpID0gaGVsbG8uYXBpO1xuXHR2YXIgdXRpbHMgPSBoZWxsby51dGlscztcblxuXHR1dGlscy5leHRlbmQodXRpbHMsIHtcblxuXHRcdC8vIERhdGFUb0pTT05cblx0XHQvLyBUaGlzIHRha2VzIGEgRm9ybUVsZW1lbnR8Tm9kZUxpc3R8SW5wdXRFbGVtZW50fE1peGVkT2JqZWN0cyBhbmQgY29udmVycyB0aGUgZGF0YSBvYmplY3QgdG8gSlNPTi5cblx0XHRkYXRhVG9KU09OOiBmdW5jdGlvbihwKSB7XG5cblx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cdFx0XHR2YXIgdyA9IHdpbmRvdztcblx0XHRcdHZhciBkYXRhID0gcC5kYXRhO1xuXG5cdFx0XHQvLyBJcyBkYXRhIGEgZm9ybSBvYmplY3Rcblx0XHRcdGlmIChfdGhpcy5kb21JbnN0YW5jZSgnZm9ybScsIGRhdGEpKSB7XG5cdFx0XHRcdGRhdGEgPSBfdGhpcy5ub2RlTGlzdFRvSlNPTihkYXRhLmVsZW1lbnRzKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKCdOb2RlTGlzdCcgaW4gdyAmJiBkYXRhIGluc3RhbmNlb2YgTm9kZUxpc3QpIHtcblx0XHRcdFx0ZGF0YSA9IF90aGlzLm5vZGVMaXN0VG9KU09OKGRhdGEpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoX3RoaXMuZG9tSW5zdGFuY2UoJ2lucHV0JywgZGF0YSkpIHtcblx0XHRcdFx0ZGF0YSA9IF90aGlzLm5vZGVMaXN0VG9KU09OKFtkYXRhXSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElzIGRhdGEgYSBibG9iLCBGaWxlLCBGaWxlTGlzdD9cblx0XHRcdGlmICgoJ0ZpbGUnIGluIHcgJiYgZGF0YSBpbnN0YW5jZW9mIHcuRmlsZSkgfHxcblx0XHRcdFx0KCdCbG9iJyBpbiB3ICYmIGRhdGEgaW5zdGFuY2VvZiB3LkJsb2IpIHx8XG5cdFx0XHRcdCgnRmlsZUxpc3QnIGluIHcgJiYgZGF0YSBpbnN0YW5jZW9mIHcuRmlsZUxpc3QpKSB7XG5cdFx0XHRcdGRhdGEgPSB7ZmlsZTogZGF0YX07XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb3AgdGhyb3VnaCBkYXRhIGlmIGl0J3Mgbm90IGZvcm0gZGF0YSBpdCBtdXN0IG5vdyBiZSBhIEpTT04gb2JqZWN0XG5cdFx0XHRpZiAoISgnRm9ybURhdGEnIGluIHcgJiYgZGF0YSBpbnN0YW5jZW9mIHcuRm9ybURhdGEpKSB7XG5cblx0XHRcdFx0Zm9yICh2YXIgeCBpbiBkYXRhKSBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSh4KSkge1xuXG5cdFx0XHRcdFx0aWYgKCdGaWxlTGlzdCcgaW4gdyAmJiBkYXRhW3hdIGluc3RhbmNlb2Ygdy5GaWxlTGlzdCkge1xuXHRcdFx0XHRcdFx0aWYgKGRhdGFbeF0ubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdFx0XHRcdGRhdGFbeF0gPSBkYXRhW3hdWzBdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGlmIChfdGhpcy5kb21JbnN0YW5jZSgnaW5wdXQnLCBkYXRhW3hdKSAmJiBkYXRhW3hdLnR5cGUgPT09ICdmaWxlJykge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKF90aGlzLmRvbUluc3RhbmNlKCdpbnB1dCcsIGRhdGFbeF0pIHx8XG5cdFx0XHRcdFx0XHRfdGhpcy5kb21JbnN0YW5jZSgnc2VsZWN0JywgZGF0YVt4XSkgfHxcblx0XHRcdFx0XHRcdF90aGlzLmRvbUluc3RhbmNlKCd0ZXh0QXJlYScsIGRhdGFbeF0pKSB7XG5cdFx0XHRcdFx0XHRkYXRhW3hdID0gZGF0YVt4XS52YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZiAoX3RoaXMuZG9tSW5zdGFuY2UobnVsbCwgZGF0YVt4XSkpIHtcblx0XHRcdFx0XHRcdGRhdGFbeF0gPSBkYXRhW3hdLmlubmVySFRNTCB8fCBkYXRhW3hdLmlubmVyVGV4dDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cC5kYXRhID0gZGF0YTtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH0sXG5cblx0XHQvLyBOb2RlTGlzdFRvSlNPTlxuXHRcdC8vIEdpdmVuIGEgbGlzdCBvZiBlbGVtZW50cyBleHRyYXBvbGF0ZSB0aGVpciB2YWx1ZXMgYW5kIHJldHVybiBhcyBhIGpzb24gb2JqZWN0XG5cdFx0bm9kZUxpc3RUb0pTT046IGZ1bmN0aW9uKG5vZGVsaXN0KSB7XG5cblx0XHRcdHZhciBqc29uID0ge307XG5cblx0XHRcdC8vIENyZWF0ZSBhIGRhdGEgc3RyaW5nXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cblx0XHRcdFx0dmFyIGlucHV0ID0gbm9kZWxpc3RbaV07XG5cblx0XHRcdFx0Ly8gSWYgdGhlIG5hbWUgb2YgdGhlIGlucHV0IGlzIGVtcHR5IG9yIGRpYWJsZWQsIGRvbnQgYWRkIGl0LlxuXHRcdFx0XHRpZiAoaW5wdXQuZGlzYWJsZWQgfHwgIWlucHV0Lm5hbWUpIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElzIHRoaXMgYSBmaWxlLCBkb2VzIHRoZSBicm93c2VyIG5vdCBzdXBwb3J0ICdmaWxlcycgYW5kICdGb3JtRGF0YSc/XG5cdFx0XHRcdGlmIChpbnB1dC50eXBlID09PSAnZmlsZScpIHtcblx0XHRcdFx0XHRqc29uW2lucHV0Lm5hbWVdID0gaW5wdXQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0anNvbltpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlIHx8IGlucHV0LmlubmVySFRNTDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4ganNvbjtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIFJlcGxhY2UgaXRcblx0aGVsbG8uYXBpID0gZnVuY3Rpb24oKSB7XG5cblx0XHQvLyBHZXQgYXJndW1lbnRzXG5cdFx0dmFyIHAgPSB1dGlscy5hcmdzKHtwYXRoOiAncyEnLCBtZXRob2Q6ICdzJywgZGF0YTonbycsIHRpbWVvdXQ6ICdpJywgY2FsbGJhY2s6ICdmJ30sIGFyZ3VtZW50cyk7XG5cblx0XHQvLyBDaGFuZ2UgZm9yIGludG8gYSBkYXRhIG9iamVjdFxuXHRcdGlmIChwLmRhdGEpIHtcblx0XHRcdHV0aWxzLmRhdGFUb0pTT04ocCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFwaS5jYWxsKHRoaXMsIHApO1xuXHR9O1xuXG59KShoZWxsbyk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vXG4vLyBTYXZlIGFueSBhY2Nlc3MgdG9rZW4gdGhhdCBpcyBpbiB0aGUgY3VycmVudCBwYWdlIFVSTFxuLy8gSGFuZGxlIGFueSByZXNwb25zZSBzb2xpY2l0ZWQgdGhyb3VnaCBpZnJhbWUgaGFzaCB0YWcgZm9sbG93aW5nIGFuIEFQSSByZXF1ZXN0XG4vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5oZWxsby51dGlscy5yZXNwb25zZUhhbmRsZXIod2luZG93LCB3aW5kb3cub3BlbmVyIHx8IHdpbmRvdy5wYXJlbnQpO1xuXG4vLyBTY3JpcHQgdG8gc3VwcG9ydCBDaHJvbWVBcHBzXG4vLyBUaGlzIG92ZXJpZGVzIHRoZSBoZWxsby51dGlscy5wb3B1cCBtZXRob2QgdG8gc3VwcG9ydCBjaHJvbWUuaWRlbnRpdHkubGF1bmNoV2ViQXV0aEZsb3dcbi8vIFNlZSBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2FwcHMvYXBwX2lkZW50aXR5I25vblxuXG4vLyBJcyB0aGlzIGEgY2hyb21lIGFwcD9cblxuaWYgKHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBjaHJvbWUuaWRlbnRpdHkgPT09ICdvYmplY3QnICYmIGNocm9tZS5pZGVudGl0eS5sYXVuY2hXZWJBdXRoRmxvdykge1xuXG5cdChmdW5jdGlvbigpIHtcblxuXHRcdC8vIFN3YXAgdGhlIHBvcHVwIG1ldGhvZFxuXHRcdGhlbGxvLnV0aWxzLnBvcHVwID0gZnVuY3Rpb24odXJsKSB7XG5cblx0XHRcdHJldHVybiBfb3Blbih1cmwsIHRydWUpO1xuXG5cdFx0fTtcblxuXHRcdC8vIFN3YXAgdGhlIGhpZGRlbiBpZnJhbWUgbWV0aG9kXG5cdFx0aGVsbG8udXRpbHMuaWZyYW1lID0gZnVuY3Rpb24odXJsKSB7XG5cblx0XHRcdF9vcGVuKHVybCwgZmFsc2UpO1xuXG5cdFx0fTtcblxuXHRcdC8vIFN3YXAgdGhlIHJlcXVlc3RfY29ycyBtZXRob2Rcblx0XHRoZWxsby51dGlscy5yZXF1ZXN0X2NvcnMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuXG5cdFx0XHRjYWxsYmFjaygpO1xuXG5cdFx0XHQvLyBBbHdheXMgcnVuIGFzIENPUlNcblxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdC8vIFN3YXAgdGhlIHN0b3JhZ2UgbWV0aG9kXG5cdFx0dmFyIF9jYWNoZSA9IHt9O1xuXHRcdGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCgnaGVsbG8nLCBmdW5jdGlvbihyKSB7XG5cdFx0XHQvLyBVcGRhdGUgdGhlIGNhY2hlXG5cdFx0XHRfY2FjaGUgPSByLmhlbGxvIHx8IHt9O1xuXHRcdH0pO1xuXG5cdFx0aGVsbG8udXRpbHMuc3RvcmUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuXG5cdFx0XHQvLyBHZXQgYWxsXG5cdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRyZXR1cm4gX2NhY2hlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBHZXRcblx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdHJldHVybiBfY2FjaGVbbmFtZV0gfHwgbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0XG5cdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0X2NhY2hlW25hbWVdID0gdmFsdWU7XG5cdFx0XHRcdGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7aGVsbG86IF9jYWNoZX0pO1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlbGV0ZVxuXHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdGRlbGV0ZSBfY2FjaGVbbmFtZV07XG5cdFx0XHRcdGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7aGVsbG86IF9jYWNoZX0pO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gT3BlbiBmdW5jdGlvblxuXHRcdGZ1bmN0aW9uIF9vcGVuKHVybCwgaW50ZXJhY3RpdmUpIHtcblxuXHRcdFx0Ly8gTGF1bmNoXG5cdFx0XHR2YXIgcmVmID0ge1xuXHRcdFx0XHRjbG9zZWQ6IGZhbHNlXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBMYXVuY2ggdGhlIHdlYkF1dGhGbG93XG5cdFx0XHRjaHJvbWUuaWRlbnRpdHkubGF1bmNoV2ViQXV0aEZsb3coe1xuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0aW50ZXJhY3RpdmU6IGludGVyYWN0aXZlXG5cdFx0XHR9LCBmdW5jdGlvbihyZXNwb25zZVVybCkge1xuXG5cdFx0XHRcdC8vIERpZCB0aGUgdXNlciBjYW5jZWwgdGhpcyBwcmVtYXR1cmVseVxuXHRcdFx0XHRpZiAocmVzcG9uc2VVcmwgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJlZi5jbG9zZWQgPSB0cnVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFNwbGl0IGFwcGFydCB0aGUgVVJMXG5cdFx0XHRcdHZhciBhID0gaGVsbG8udXRpbHMudXJsKHJlc3BvbnNlVXJsKTtcblxuXHRcdFx0XHQvLyBUaGUgbG9jYXRpb24gY2FuIGJlIGF1Z21lbnRlZCBpbiB0byBhIGxvY2F0aW9uIG9iamVjdCBsaWtlIHNvLi4uXG5cdFx0XHRcdC8vIFdlIGRvbnQgaGF2ZSB3aW5kb3cgb3BlcmF0aW9ucyBvbiB0aGUgcG9wdXAgc28gbGV0cyBjcmVhdGUgc29tZVxuXHRcdFx0XHR2YXIgX3BvcHVwID0ge1xuXHRcdFx0XHRcdGxvY2F0aW9uOiB7XG5cblx0XHRcdFx0XHRcdC8vIENoYW5nZSB0aGUgbG9jYXRpb24gb2YgdGhlIHBvcHVwXG5cdFx0XHRcdFx0XHRhc3NpZ246IGZ1bmN0aW9uKHVybCkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIElmIHRoZXJlIGlzIGEgc2Vjb25kYXJ5IHJlYXNzaWduXG5cdFx0XHRcdFx0XHRcdC8vIEluIHRoZSBjYXNlIG9mIE9BdXRoMVxuXHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIHRoaXMgaW4gbm9uLWludGVyYWN0aXZlIG1vZGUuXG5cdFx0XHRcdFx0XHRcdF9vcGVuKHVybCwgZmFsc2UpO1xuXHRcdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdFx0c2VhcmNoOiBhLnNlYXJjaCxcblx0XHRcdFx0XHRcdGhhc2g6IGEuaGFzaCxcblx0XHRcdFx0XHRcdGhyZWY6IGEuaHJlZlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y2xvc2U6IGZ1bmN0aW9uKCkge31cblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBUaGVuIHRoaXMgVVJMIGNvbnRhaW5zIGluZm9ybWF0aW9uIHdoaWNoIEhlbGxvSlMgbXVzdCBwcm9jZXNzXG5cdFx0XHRcdC8vIFVSTCBzdHJpbmdcblx0XHRcdFx0Ly8gV2luZG93IC0gYW55IGFjdGlvbiBzdWNoIGFzIHdpbmRvdyByZWxvY2F0aW9uIGdvZXMgaGVyZVxuXHRcdFx0XHQvLyBPcGVuZXIgLSB0aGUgcGFyZW50IHdpbmRvdyB3aGljaCBvcGVuZWQgdGhpcywgYWthIHRoaXMgc2NyaXB0XG5cblx0XHRcdFx0aGVsbG8udXRpbHMucmVzcG9uc2VIYW5kbGVyKF9wb3B1cCwgd2luZG93KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBSZXR1cm4gdGhlIHJlZmVyZW5jZVxuXHRcdFx0cmV0dXJuIHJlZjtcblx0XHR9XG5cblx0fSkoKTtcbn1cblxuLy8gUGhvbmVnYXAgb3ZlcnJpZGUgZm9yIGhlbGxvLnBob25lZ2FwLmpzXG4oZnVuY3Rpb24oKSB7XG5cblx0Ly8gSXMgdGhpcyBhIHBob25lZ2FwIGltcGxlbWVudGF0aW9uP1xuXHRpZiAoISgvXmZpbGU6XFwvezN9W15cXC9dLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSAmJiB3aW5kb3cuY29yZG92YSkpIHtcblx0XHQvLyBDb3Jkb3ZhIGlzIG5vdCBpbmNsdWRlZC5cblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBBdWdtZW50IHRoZSBoaWRkZW4gaWZyYW1lIG1ldGhvZFxuXHRoZWxsby51dGlscy5pZnJhbWUgPSBmdW5jdGlvbih1cmwsIHJlZGlyZWN0VXJpKSB7XG5cdFx0aGVsbG8udXRpbHMucG9wdXAodXJsLCByZWRpcmVjdFVyaSwge2hpZGRlbjogJ3llcyd9KTtcblx0fTtcblxuXHQvLyBBdWdtZW50IHRoZSBwb3B1cFxuXHR2YXIgdXRpbFBvcHVwID0gaGVsbG8udXRpbHMucG9wdXA7XG5cblx0Ly8gUmVwbGFjZSBwb3B1cFxuXHRoZWxsby51dGlscy5wb3B1cCA9IGZ1bmN0aW9uKHVybCwgcmVkaXJlY3RVcmksIG9wdGlvbnMpIHtcblxuXHRcdC8vIFJ1biB0aGUgc3RhbmRhcmRcblx0XHR2YXIgcG9wdXAgPSB1dGlsUG9wdXAuY2FsbCh0aGlzLCB1cmwsIHJlZGlyZWN0VXJpLCBvcHRpb25zKTtcblxuXHRcdC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGZvciByZW9wZW5pbmcgdGhlIHBvcHVwLCBhbmQgYXNzaWduaW5nIGV2ZW50cyB0byB0aGUgbmV3IHBvcHVwIG9iamVjdFxuXHRcdC8vIFBob25lR2FwIHN1cHBvcnRcblx0XHQvLyBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gbGlzdGVuIHRvIHRoZSBjaGFuZ2UgaW4gdGhlIHBvcHVwIHdpbmRvd3MgVVJMXG5cdFx0Ly8gVGhpcyBtdXN0IGFwcGVhciBiZWZvcmUgcG9wdXAuZm9jdXMoKTtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHBvcHVwICYmIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIpIHtcblxuXHRcdFx0XHQvLyBHZXQgdGhlIG9yaWdpbiBvZiB0aGUgcmVkaXJlY3QgVVJJXG5cblx0XHRcdFx0dmFyIGEgPSBoZWxsby51dGlscy51cmwocmVkaXJlY3RVcmkpO1xuXHRcdFx0XHR2YXIgcmVkaXJlY3RVcmlPcmlnaW4gPSBhLm9yaWdpbiB8fCAoYS5wcm90b2NvbCArICcvLycgKyBhLmhvc3RuYW1lKTtcblxuXHRcdFx0XHQvLyBMaXN0ZW4gdG8gY2hhbmdlcyBpbiB0aGUgSW5BcHBCcm93c2VyIHdpbmRvd1xuXG5cdFx0XHRcdHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRzdGFydCcsIGZ1bmN0aW9uKGUpIHtcblxuXHRcdFx0XHRcdHZhciB1cmwgPSBlLnVybDtcblxuXHRcdFx0XHRcdC8vIElzIHRoaXMgdGhlIHBhdGgsIGFzIGdpdmVuIGJ5IHRoZSByZWRpcmVjdFVyaT9cblx0XHRcdFx0XHQvLyBDaGVjayB0aGUgbmV3IFVSTCBhZ2FpbnMgdGhlIHJlZGlyZWN0VXJpT3JpZ2luLlxuXHRcdFx0XHRcdC8vIEFjY29yZGluZyB0byAjNjMgYSB1c2VyIGNvdWxkIGNsaWNrICdjYW5jZWwnIGluIHNvbWUgZGlhbG9nIGJveGVzIC4uLi5cblx0XHRcdFx0XHQvLyBUaGUgcG9wdXAgcmVkaXJlY3RzIHRvIGFub3RoZXIgcGFnZSB3aXRoIHRoZSBzYW1lIG9yaWdpbiwgeWV0IHdlIHN0aWxsIHdpc2ggaXQgdG8gY2xvc2UuXG5cblx0XHRcdFx0XHRpZiAodXJsLmluZGV4T2YocmVkaXJlY3RVcmlPcmlnaW4pICE9PSAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3BsaXQgYXBwYXJ0IHRoZSBVUkxcblx0XHRcdFx0XHR2YXIgYSA9IGhlbGxvLnV0aWxzLnVybCh1cmwpO1xuXG5cdFx0XHRcdFx0Ly8gV2UgZG9udCBoYXZlIHdpbmRvdyBvcGVyYXRpb25zIG9uIHRoZSBwb3B1cCBzbyBsZXRzIGNyZWF0ZSBzb21lXG5cdFx0XHRcdFx0Ly8gVGhlIGxvY2F0aW9uIGNhbiBiZSBhdWdtZW50ZWQgaW4gdG8gYSBsb2NhdGlvbiBvYmplY3QgbGlrZSBzby4uLlxuXG5cdFx0XHRcdFx0dmFyIF9wb3B1cCA9IHtcblx0XHRcdFx0XHRcdGxvY2F0aW9uOiB7XG5cdFx0XHRcdFx0XHRcdC8vIENoYW5nZSB0aGUgbG9jYXRpb24gb2YgdGhlIHBvcHVwXG5cdFx0XHRcdFx0XHRcdGFzc2lnbjogZnVuY3Rpb24obG9jYXRpb24pIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIFVuZm91cnR1bmF0bHkgYW4gYXBwIGlzIG1heSBub3QgY2hhbmdlIHRoZSBsb2NhdGlvbiBvZiBhIEluQXBwQnJvd3NlciB3aW5kb3cuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU28gdG8gc2hpbSB0aGlzLCBqdXN0IG9wZW4gYSBuZXcgb25lLlxuXHRcdFx0XHRcdFx0XHRcdHBvcHVwLmV4ZWN1dGVTY3JpcHQoe2NvZGU6ICd3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiJyArIGxvY2F0aW9uICsgJztcIid9KTtcblx0XHRcdFx0XHRcdFx0fSxcblxuXHRcdFx0XHRcdFx0XHRzZWFyY2g6IGEuc2VhcmNoLFxuXHRcdFx0XHRcdFx0XHRoYXNoOiBhLmhhc2gsXG5cdFx0XHRcdFx0XHRcdGhyZWY6IGEuaHJlZlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGNsb3NlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHBvcHVwLmNsb3NlKSB7XG5cdFx0XHRcdFx0XHRcdFx0cG9wdXAuY2xvc2UoKTtcblx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cG9wdXAuY2xvc2VkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Y2F0Y2ggKF9lKSB7fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdC8vIFRoZW4gdGhpcyBVUkwgY29udGFpbnMgaW5mb3JtYXRpb24gd2hpY2ggSGVsbG9KUyBtdXN0IHByb2Nlc3Ncblx0XHRcdFx0XHQvLyBVUkwgc3RyaW5nXG5cdFx0XHRcdFx0Ly8gV2luZG93IC0gYW55IGFjdGlvbiBzdWNoIGFzIHdpbmRvdyByZWxvY2F0aW9uIGdvZXMgaGVyZVxuXHRcdFx0XHRcdC8vIE9wZW5lciAtIHRoZSBwYXJlbnQgd2luZG93IHdoaWNoIG9wZW5lZCB0aGlzLCBha2EgdGhpcyBzY3JpcHRcblxuXHRcdFx0XHRcdGhlbGxvLnV0aWxzLnJlc3BvbnNlSGFuZGxlcihfcG9wdXAsIHdpbmRvdyk7XG5cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNhdGNoIChlKSB7fVxuXG5cdFx0cmV0dXJuIHBvcHVwO1xuXHR9O1xuXG59KSgpO1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHQvLyBPQXV0aDFcblx0dmFyIE9BdXRoMVNldHRpbmdzID0ge1xuXHRcdHZlcnNpb246ICcxLjAnLFxuXHRcdGF1dGg6ICdodHRwczovL3d3dy5kcm9wYm94LmNvbS8xL29hdXRoL2F1dGhvcml6ZScsXG5cdFx0cmVxdWVzdDogJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tLzEvb2F1dGgvcmVxdWVzdF90b2tlbicsXG5cdFx0dG9rZW46ICdodHRwczovL2FwaS5kcm9wYm94LmNvbS8xL29hdXRoL2FjY2Vzc190b2tlbidcblx0fTtcblxuXHQvLyBPQXV0aDIgU2V0dGluZ3Ncblx0dmFyIE9BdXRoMlNldHRpbmdzID0ge1xuXHRcdHZlcnNpb246IDIsXG5cdFx0YXV0aDogJ2h0dHBzOi8vd3d3LmRyb3Bib3guY29tLzEvb2F1dGgyL2F1dGhvcml6ZScsXG5cdFx0Z3JhbnQ6ICdodHRwczovL2FwaS5kcm9wYm94LmNvbS8xL29hdXRoMi90b2tlbidcblx0fTtcblxuXHQvLyBJbml0aWF0ZSB0aGUgRHJvcGJveCBtb2R1bGVcblx0aGVsbG8uaW5pdCh7XG5cblx0XHRkcm9wYm94OiB7XG5cblx0XHRcdG5hbWU6ICdEcm9wYm94JyxcblxuXHRcdFx0b2F1dGg6IE9BdXRoMlNldHRpbmdzLFxuXG5cdFx0XHRsb2dpbjogZnVuY3Rpb24ocCkge1xuXHRcdFx0XHQvLyBPQXV0aDIgbm9uLXN0YW5kYXJkIGFkanVzdG1lbnRzXG5cdFx0XHRcdHAucXMuc2NvcGUgPSAnJztcblxuXHRcdFx0XHQvLyBTaG91bGQgdGhpcyBiZSBydW4gYXMgT0F1dGgxP1xuXHRcdFx0XHQvLyBJZiB0aGUgcmVkaXJlY3RfdXJpIGlzIGlzIEhUVFAgKG5vbi1zZWN1cmUpIHRoZW4gaXRzIHJlcXVpcmVkIHRvIHJldmVydCB0byB0aGUgT0F1dGgxIGVuZHBvaW50c1xuXHRcdFx0XHR2YXIgcmVkaXJlY3QgPSBkZWNvZGVVUklDb21wb25lbnQocC5xcy5yZWRpcmVjdF91cmkpO1xuXHRcdFx0XHRpZiAocmVkaXJlY3QuaW5kZXhPZignaHR0cDonKSA9PT0gMCAmJiByZWRpcmVjdC5pbmRleE9mKCdodHRwOi8vbG9jYWxob3N0LycpICE9PSAwKSB7XG5cblx0XHRcdFx0XHQvLyBPdmVycmlkZSB0aGUgZHJvcGJveCBPQXV0aCBzZXR0aW5ncy5cblx0XHRcdFx0XHRoZWxsby5zZXJ2aWNlcy5kcm9wYm94Lm9hdXRoID0gT0F1dGgxU2V0dGluZ3M7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Ly8gT3ZlcnJpZGUgdGhlIGRyb3Bib3ggT0F1dGggc2V0dGluZ3MuXG5cdFx0XHRcdFx0aGVsbG8uc2VydmljZXMuZHJvcGJveC5vYXV0aCA9IE9BdXRoMlNldHRpbmdzO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVGhlIGRyb3Bib3ggbG9naW4gd2luZG93IGlzIGEgZGlmZmVyZW50IHNpemVcblx0XHRcdFx0cC5vcHRpb25zLnBvcHVwLndpZHRoID0gMTAwMDtcblx0XHRcdFx0cC5vcHRpb25zLnBvcHVwLmhlaWdodCA9IDEwMDA7XG5cdFx0XHR9LFxuXG5cdFx0XHQvKlxuXHRcdFx0XHREcm9wYm94IGRvZXMgbm90IGFsbG93IGluc2VjdXJlIEhUVFAgVVJJJ3MgaW4gdGhlIHJlZGlyZWN0X3VyaSBmaWVsZFxuXHRcdFx0XHQuLi5vdGhlcndpc2UgSSdkIGxvdmUgdG8gdXNlIE9BdXRoMlxuXG5cdFx0XHRcdEZvbGxvdyByZXF1ZXN0IGh0dHBzOi8vZm9ydW1zLmRyb3Bib3guY29tL3RvcGljLnBocD9pZD0xMDY1MDVcblxuXHRcdFx0XHRwLnFzLnJlc3BvbnNlX3R5cGUgPSAnY29kZSc7XG5cdFx0XHRcdG9hdXRoOiB7XG5cdFx0XHRcdFx0dmVyc2lvbjogMixcblx0XHRcdFx0XHRhdXRoOiAnaHR0cHM6Ly93d3cuZHJvcGJveC5jb20vMS9vYXV0aDIvYXV0aG9yaXplJyxcblx0XHRcdFx0XHRncmFudDogJ2h0dHBzOi8vYXBpLmRyb3Bib3guY29tLzEvb2F1dGgyL3Rva2VuJ1xuXHRcdFx0XHR9XG5cdFx0XHQqL1xuXG5cdFx0XHQvLyBBUEkgQmFzZSBVUkxcblx0XHRcdGJhc2U6ICdodHRwczovL2FwaS5kcm9wYm94LmNvbS8xLycsXG5cblx0XHRcdC8vIEJlc3Bva2Ugc2V0dGluZzogdGhpcyBpcyBzdGF0ZXMgd2hldGhlciB0byB1c2UgdGhlIGN1c3RvbSBlbnZpcm9ubWVudCBvZiBEcm9wYm94IG9yIHRvIHVzZSB0aGVpciBvd24gZW52aXJvbm1lbnRcblx0XHRcdC8vIEJlY2F1c2UgaXQncyBub3RvcmlvdXNseSBkaWZmaWN1bHQgZm9yIERyb3Bib3ggdG9vIHByb3ZpZGUgYWNjZXNzIGZyb20gb3RoZXIgd2Vic2VydmljZXMsIHRoaXMgZGVmYXVsdHMgdG8gU2FuZGJveFxuXHRcdFx0cm9vdDogJ3NhbmRib3gnLFxuXG5cdFx0XHQvLyBNYXAgR0VUIHJlcXVlc3RzXG5cdFx0XHRnZXQ6IHtcblx0XHRcdFx0bWU6ICdhY2NvdW50L2luZm8nLFxuXG5cdFx0XHRcdC8vIEh0dHBzOi8vd3d3LmRyb3Bib3guY29tL2RldmVsb3BlcnMvY29yZS9kb2NzI21ldGFkYXRhXG5cdFx0XHRcdCdtZS9maWxlcyc6IHJlcSgnbWV0YWRhdGEvYXV0by9Ae3BhcmVudHx9JyksXG5cdFx0XHRcdCdtZS9mb2xkZXInOiByZXEoJ21ldGFkYXRhL2F1dG8vQHtpZH0nKSxcblx0XHRcdFx0J21lL2ZvbGRlcnMnOiByZXEoJ21ldGFkYXRhL2F1dG8vJyksXG5cblx0XHRcdFx0J2RlZmF1bHQnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdGlmIChwLnBhdGgubWF0Y2goJ2h0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlcy8nKSkge1xuXHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIGZpbGUsIHJldHVybiBiaW5hcnkgZGF0YVxuXHRcdFx0XHRcdFx0cC5tZXRob2QgPSAnYmxvYic7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FsbGJhY2socC5wYXRoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0cG9zdDoge1xuXHRcdFx0XHQnbWUvZmlsZXMnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXG5cdFx0XHRcdFx0dmFyIHBhdGggPSBwLmRhdGEucGFyZW50O1xuXHRcdFx0XHRcdHZhciBmaWxlTmFtZSA9IHAuZGF0YS5uYW1lO1xuXG5cdFx0XHRcdFx0cC5kYXRhID0ge1xuXHRcdFx0XHRcdFx0ZmlsZTogcC5kYXRhLmZpbGVcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0Ly8gRG9lcyB0aGlzIGhhdmUgYSBkYXRhLXVyaSB0byB1cGxvYWQgYXMgYSBmaWxlP1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgKHAuZGF0YS5maWxlKSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHRcdHAuZGF0YS5maWxlID0gaGVsbG8udXRpbHMudG9CbG9iKHAuZGF0YS5maWxlKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWxsYmFjaygnaHR0cHM6Ly9hcGktY29udGVudC5kcm9wYm94LmNvbS8xL2ZpbGVzX3B1dC9hdXRvLycgKyBwYXRoICsgJy8nICsgZmlsZU5hbWUpO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdCdtZS9mb2xkZXJzJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHtcblxuXHRcdFx0XHRcdHZhciBuYW1lID0gcC5kYXRhLm5hbWU7XG5cdFx0XHRcdFx0cC5kYXRhID0ge307XG5cblx0XHRcdFx0XHRjYWxsYmFjaygnZmlsZW9wcy9jcmVhdGVfZm9sZGVyP3Jvb3Q9QHtyb290fHNhbmRib3h9JicgKyBoZWxsby51dGlscy5wYXJhbSh7XG5cdFx0XHRcdFx0XHRwYXRoOiBuYW1lXG5cdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBNYXAgREVMRVRFIHJlcXVlc3RzXG5cdFx0XHRkZWw6IHtcblx0XHRcdFx0J21lL2ZpbGVzJzogJ2ZpbGVvcHMvZGVsZXRlP3Jvb3Q9QHtyb290fHNhbmRib3h9JnBhdGg9QHtpZH0nLFxuXHRcdFx0XHQnbWUvZm9sZGVyJzogJ2ZpbGVvcHMvZGVsZXRlP3Jvb3Q9QHtyb290fHNhbmRib3h9JnBhdGg9QHtpZH0nXG5cdFx0XHR9LFxuXG5cdFx0XHR3cmFwOiB7XG5cdFx0XHRcdG1lOiBmdW5jdGlvbihvKSB7XG5cdFx0XHRcdFx0Zm9ybWF0RXJyb3Iobyk7XG5cdFx0XHRcdFx0aWYgKCFvLnVpZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0by5uYW1lID0gby5kaXNwbGF5X25hbWU7XG5cdFx0XHRcdFx0dmFyIG0gPSBvLm5hbWUuc3BsaXQoJyAnKTtcblx0XHRcdFx0XHRvLmZpcnN0X25hbWUgPSBtLnNoaWZ0KCk7XG5cdFx0XHRcdFx0by5sYXN0X25hbWUgPSBtLmpvaW4oJyAnKTtcblx0XHRcdFx0XHRvLmlkID0gby51aWQ7XG5cdFx0XHRcdFx0ZGVsZXRlIG8udWlkO1xuXHRcdFx0XHRcdGRlbGV0ZSBvLmRpc3BsYXlfbmFtZTtcblx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnZGVmYXVsdCc6IGZ1bmN0aW9uKG8sIGhlYWRlcnMsIHJlcSkge1xuXHRcdFx0XHRcdGZvcm1hdEVycm9yKG8pO1xuXHRcdFx0XHRcdGlmIChvLmlzX2RpciAmJiBvLmNvbnRlbnRzKSB7XG5cdFx0XHRcdFx0XHRvLmRhdGEgPSBvLmNvbnRlbnRzO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIG8uY29udGVudHM7XG5cblx0XHRcdFx0XHRcdG8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0XHRcdFx0aXRlbS5yb290ID0gby5yb290O1xuXHRcdFx0XHRcdFx0XHRmb3JtYXRGaWxlKGl0ZW0sIGhlYWRlcnMsIHJlcSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRmb3JtYXRGaWxlKG8sIGhlYWRlcnMsIHJlcSk7XG5cblx0XHRcdFx0XHRpZiAoby5pc19kZWxldGVkKSB7XG5cdFx0XHRcdFx0XHRvLnN1Y2Nlc3MgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBEb2Vzbid0IHJldHVybiB0aGUgQ09SUyBoZWFkZXJzXG5cdFx0XHR4aHI6IGZ1bmN0aW9uKHApIHtcblxuXHRcdFx0XHQvLyBUaGUgcHJveHkgc3VwcG9ydHMgYWxsb3ctY3Jvc3Mtb3JpZ2luLXJlc291cmNlXG5cdFx0XHRcdC8vIEFsYXMgdGhhdCdzIHRoZSBvbmx5IHRoaW5nIHdlJ3JlIHVzaW5nLlxuXHRcdFx0XHRpZiAocC5kYXRhICYmIHAuZGF0YS5maWxlKSB7XG5cdFx0XHRcdFx0dmFyIGZpbGUgPSBwLmRhdGEuZmlsZTtcblx0XHRcdFx0XHRpZiAoZmlsZSkge1xuXHRcdFx0XHRcdFx0aWYgKGZpbGUuZmlsZXMpIHtcblx0XHRcdFx0XHRcdFx0cC5kYXRhID0gZmlsZS5maWxlc1swXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRwLmRhdGEgPSBmaWxlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChwLm1ldGhvZCA9PT0gJ2RlbGV0ZScpIHtcblx0XHRcdFx0XHRwLm1ldGhvZCA9ICdwb3N0Jztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSxcblxuXHRcdFx0Zm9ybTogZnVuY3Rpb24ocCwgcXMpIHtcblx0XHRcdFx0ZGVsZXRlIHFzLnN0YXRlO1xuXHRcdFx0XHRkZWxldGUgcXMucmVkaXJlY3RfdXJpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0ZnVuY3Rpb24gZm9ybWF0RXJyb3Iobykge1xuXHRcdGlmIChvICYmICdlcnJvcicgaW4gbykge1xuXHRcdFx0by5lcnJvciA9IHtcblx0XHRcdFx0Y29kZTogJ3NlcnZlcl9lcnJvcicsXG5cdFx0XHRcdG1lc3NhZ2U6IG8uZXJyb3IubWVzc2FnZSB8fCBvLmVycm9yXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdEZpbGUobywgaGVhZGVycywgcmVxKSB7XG5cblx0XHRpZiAodHlwZW9mIG8gIT09ICdvYmplY3QnIHx8XG5cdFx0XHQodHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnICYmIG8gaW5zdGFuY2VvZiBCbG9iKSB8fFxuXHRcdFx0KHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgbyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuXHRcdFx0Ly8gVGhpcyBpcyBhIGZpbGUsIGxldCBpdCB0aHJvdWdoIHVuZm9ybWF0dGVkXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCdlcnJvcicgaW4gbykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBwYXRoID0gKG8ucm9vdCAhPT0gJ2FwcF9mb2xkZXInID8gby5yb290IDogJycpICsgby5wYXRoLnJlcGxhY2UoL1xcJi9nLCAnJTI2Jyk7XG5cdFx0cGF0aCA9IHBhdGgucmVwbGFjZSgvXlxcLy8sICcnKTtcblx0XHRpZiAoby50aHVtYl9leGlzdHMpIHtcblx0XHRcdG8udGh1bWJuYWlsID0gcmVxLm9hdXRoX3Byb3h5ICsgJz9wYXRoPScgK1xuXHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KCdodHRwczovL2FwaS1jb250ZW50LmRyb3Bib3guY29tLzEvdGh1bWJuYWlscy9hdXRvLycgKyBwYXRoICsgJz9mb3JtYXQ9anBlZyZzaXplPW0nKSArICcmYWNjZXNzX3Rva2VuPScgKyByZXEub3B0aW9ucy5hY2Nlc3NfdG9rZW47XG5cdFx0fVxuXG5cdFx0by50eXBlID0gKG8uaXNfZGlyID8gJ2ZvbGRlcicgOiBvLm1pbWVfdHlwZSk7XG5cdFx0by5uYW1lID0gby5wYXRoLnJlcGxhY2UoLy4qXFwvL2csICcnKTtcblx0XHRpZiAoby5pc19kaXIpIHtcblx0XHRcdG8uZmlsZXMgPSBwYXRoLnJlcGxhY2UoL15cXC8vLCAnJyk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0by5kb3dubG9hZExpbmsgPSBoZWxsby5zZXR0aW5ncy5vYXV0aF9wcm94eSArICc/cGF0aD0nICtcblx0XHRcdGVuY29kZVVSSUNvbXBvbmVudCgnaHR0cHM6Ly9hcGktY29udGVudC5kcm9wYm94LmNvbS8xL2ZpbGVzL2F1dG8vJyArIHBhdGgpICsgJyZhY2Nlc3NfdG9rZW49JyArIHJlcS5vcHRpb25zLmFjY2Vzc190b2tlbjtcblx0XHRcdG8uZmlsZSA9ICdodHRwczovL2FwaS1jb250ZW50LmRyb3Bib3guY29tLzEvZmlsZXMvYXV0by8nICsgcGF0aDtcblx0XHR9XG5cblx0XHRpZiAoIW8uaWQpIHtcblx0XHRcdG8uaWQgPSBvLnBhdGgucmVwbGFjZSgvXlxcLy8sICcnKTtcblx0XHR9XG5cblx0XHQvLyBPLm1lZGlhID0gJ2h0dHBzOi8vYXBpLWNvbnRlbnQuZHJvcGJveC5jb20vMS9maWxlcy8nICsgcGF0aDtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlcShzdHIpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24ocCwgY2IpIHtcblx0XHRcdGRlbGV0ZSBwLnF1ZXJ5LmxpbWl0O1xuXHRcdFx0Y2Ioc3RyKTtcblx0XHR9O1xuXHR9XG5cbn0pKGhlbGxvKTtcblxuKGZ1bmN0aW9uKGhlbGxvKSB7XG5cdC8vIEZvciBBUElzLCBvbmNlIGEgdmVyc2lvbiBpcyBubyBsb25nZXIgdXNhYmxlLCBhbnkgY2FsbHMgbWFkZSB0byBpdCB3aWxsIGJlIGRlZmF1bHRlZCB0byB0aGUgbmV4dCBvbGRlc3QgdXNhYmxlIHZlcnNpb24uXG5cdC8vIFNvIHdlIGV4cGxpY2l0bHkgc3RhdGUgaXQuXG5cdHZhciB2ZXJzaW9uID0gJ3YyLjknO1xuXG5cdGhlbGxvLmluaXQoe1xuXG5cdFx0ZmFjZWJvb2s6IHtcblxuXHRcdFx0bmFtZTogJ0ZhY2Vib29rJyxcblxuXHRcdFx0Ly8gU0VFIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9mYWNlYm9vay1sb2dpbi9tYW51YWxseS1idWlsZC1hLWxvZ2luLWZsb3dcblx0XHRcdG9hdXRoOiB7XG5cdFx0XHRcdHZlcnNpb246IDIsXG5cdFx0XHRcdGF1dGg6ICdodHRwczovL3d3dy5mYWNlYm9vay5jb20vJyArIHZlcnNpb24gKyAnL2RpYWxvZy9vYXV0aC8nLFxuXHRcdFx0XHRncmFudDogJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL29hdXRoL2FjY2Vzc190b2tlbidcblx0XHRcdH0sXG5cblx0XHRcdC8vIEF1dGhvcml6YXRpb24gc2NvcGVzXG5cdFx0XHRzY29wZToge1xuXHRcdFx0XHRiYXNpYzogJ3B1YmxpY19wcm9maWxlJyxcblx0XHRcdFx0ZW1haWw6ICdlbWFpbCcsXG5cdFx0XHRcdHNoYXJlOiAndXNlcl9wb3N0cycsXG5cdFx0XHRcdGJpcnRoZGF5OiAndXNlcl9iaXJ0aGRheScsXG5cdFx0XHRcdGV2ZW50czogJ3VzZXJfZXZlbnRzJyxcblx0XHRcdFx0cGhvdG9zOiAndXNlcl9waG90b3MnLFxuXHRcdFx0XHR2aWRlb3M6ICd1c2VyX3ZpZGVvcycsXG5cdFx0XHRcdGZyaWVuZHM6ICd1c2VyX2ZyaWVuZHMnLFxuXHRcdFx0XHRmaWxlczogJ3VzZXJfcGhvdG9zLHVzZXJfdmlkZW9zJyxcblx0XHRcdFx0cHVibGlzaF9maWxlczogJ3VzZXJfcGhvdG9zLHVzZXJfdmlkZW9zLHB1Ymxpc2hfYWN0aW9ucycsXG5cdFx0XHRcdHB1Ymxpc2g6ICdwdWJsaXNoX2FjdGlvbnMnLFxuXG5cdFx0XHRcdC8vIERlcHJlY2F0ZWQgaW4gdjIuMFxuXHRcdFx0XHQvLyBDcmVhdGVfZXZlbnRcdDogJ2NyZWF0ZV9ldmVudCcsXG5cblx0XHRcdFx0b2ZmbGluZV9hY2Nlc3M6ICcnXG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZWZyZXNoIHRoZSBhY2Nlc3NfdG9rZW5cblx0XHRcdHJlZnJlc2g6IGZhbHNlLFxuXG5cdFx0XHRsb2dpbjogZnVuY3Rpb24ocCkge1xuXG5cdFx0XHRcdC8vIFJlYXV0aGVudGljYXRlXG5cdFx0XHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9mYWNlYm9vay1sb2dpbi9yZWF1dGhlbnRpY2F0aW9uXG5cdFx0XHRcdGlmIChwLm9wdGlvbnMuZm9yY2UpIHtcblx0XHRcdFx0XHRwLnFzLmF1dGhfdHlwZSA9ICdyZWF1dGhlbnRpY2F0ZSc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXQgdGhlIGRpc3BsYXkgdmFsdWVcblx0XHRcdFx0cC5xcy5kaXNwbGF5ID0gcC5vcHRpb25zLmRpc3BsYXkgfHwgJ3BvcHVwJztcblx0XHRcdH0sXG5cblx0XHRcdGxvZ291dDogZnVuY3Rpb24oY2FsbGJhY2ssIG9wdGlvbnMpIHtcblx0XHRcdFx0Ly8gQXNzaWduIGNhbGxiYWNrIHRvIGEgZ2xvYmFsIGhhbmRsZXJcblx0XHRcdFx0dmFyIGNhbGxiYWNrSUQgPSBoZWxsby51dGlscy5nbG9iYWxFdmVudChjYWxsYmFjayk7XG5cdFx0XHRcdHZhciByZWRpcmVjdCA9IGVuY29kZVVSSUNvbXBvbmVudChoZWxsby5zZXR0aW5ncy5yZWRpcmVjdF91cmkgKyAnPycgKyBoZWxsby51dGlscy5wYXJhbSh7Y2FsbGJhY2s6Y2FsbGJhY2tJRCwgcmVzdWx0OiBKU09OLnN0cmluZ2lmeSh7Zm9yY2U6dHJ1ZX0pLCBzdGF0ZTogJ3t9J30pKTtcblx0XHRcdFx0dmFyIHRva2VuID0gKG9wdGlvbnMuYXV0aFJlc3BvbnNlIHx8IHt9KS5hY2Nlc3NfdG9rZW47XG5cdFx0XHRcdGhlbGxvLnV0aWxzLmlmcmFtZSgnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2xvZ291dC5waHA/bmV4dD0nICsgcmVkaXJlY3QgKyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZW4pO1xuXG5cdFx0XHRcdC8vIFBvc3NpYmxlIHJlc3BvbnNlczpcblx0XHRcdFx0Ly8gU3RyaW5nIFVSTFx0LSBoZWxsby5sb2dvdXQgc2hvdWxkIGhhbmRsZSB0aGUgbG9nb3V0XG5cdFx0XHRcdC8vIFVuZGVmaW5lZFx0LSB0aGlzIGZ1bmN0aW9uIHdpbGwgaGFuZGxlIHRoZSBjYWxsYmFja1xuXHRcdFx0XHQvLyBUcnVlIC0gdGhyb3cgYSBzdWNjZXNzLCB0aGlzIGNhbGxiYWNrIGlzbid0IGhhbmRsaW5nIHRoZSBjYWxsYmFja1xuXHRcdFx0XHQvLyBGYWxzZSAtIHRocm93IGEgZXJyb3Jcblx0XHRcdFx0aWYgKCF0b2tlbikge1xuXHRcdFx0XHRcdC8vIElmIHRoZXJlIGlzbid0IGEgdG9rZW4sIHRoZSBhYm92ZSB3b250IHJldHVybiBhIHJlc3BvbnNlLCBzbyBsZXRzIHRyaWdnZXIgYSByZXNwb25zZVxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQVBJIEJhc2UgVVJMXG5cdFx0XHRiYXNlOiAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIHZlcnNpb24gKyAnLycsXG5cblx0XHRcdC8vIE1hcCBHRVQgcmVxdWVzdHNcblx0XHRcdGdldDoge1xuXHRcdFx0XHRtZTogJ21lP2ZpZWxkcz1lbWFpbCxmaXJzdF9uYW1lLGxhc3RfbmFtZSxuYW1lLHRpbWV6b25lLHZlcmlmaWVkJyxcblx0XHRcdFx0J21lL2ZyaWVuZHMnOiAnbWUvZnJpZW5kcycsXG5cdFx0XHRcdCdtZS9mb2xsb3dpbmcnOiAnbWUvZnJpZW5kcycsXG5cdFx0XHRcdCdtZS9mb2xsb3dlcnMnOiAnbWUvZnJpZW5kcycsXG5cdFx0XHRcdCdtZS9zaGFyZSc6ICdtZS9mZWVkJyxcblx0XHRcdFx0J21lL2xpa2UnOiAnbWUvbGlrZXMnLFxuXHRcdFx0XHQnbWUvZmlsZXMnOiAnbWUvYWxidW1zJyxcblx0XHRcdFx0J21lL2FsYnVtcyc6ICdtZS9hbGJ1bXM/ZmllbGRzPWNvdmVyX3Bob3RvLG5hbWUnLFxuXHRcdFx0XHQnbWUvYWxidW0nOiAnQHtpZH0vcGhvdG9zP2ZpZWxkcz1waWN0dXJlJyxcblx0XHRcdFx0J21lL3Bob3Rvcyc6ICdtZS9waG90b3MnLFxuXHRcdFx0XHQnbWUvcGhvdG8nOiAnQHtpZH0nLFxuXHRcdFx0XHQnZnJpZW5kL2FsYnVtcyc6ICdAe2lkfS9hbGJ1bXMnLFxuXHRcdFx0XHQnZnJpZW5kL3Bob3Rvcyc6ICdAe2lkfS9waG90b3MnXG5cblx0XHRcdFx0Ly8gUGFnaW5hdGlvblxuXHRcdFx0XHQvLyBIdHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL2RvY3MvcmVmZXJlbmNlL2FwaS9wYWdpbmF0aW9uL1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gTWFwIFBPU1QgcmVxdWVzdHNcblx0XHRcdHBvc3Q6IHtcblx0XHRcdFx0J21lL3NoYXJlJzogJ21lL2ZlZWQnLFxuXHRcdFx0XHQnbWUvcGhvdG8nOiAnQHtpZH0nXG5cblx0XHRcdFx0Ly8gSHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS9kb2NzL2dyYXBoLWFwaS9yZWZlcmVuY2UvdjIuMi9vYmplY3QvbGlrZXMvXG5cdFx0XHR9LFxuXG5cdFx0XHR3cmFwOiB7XG5cdFx0XHRcdG1lOiBmb3JtYXRVc2VyLFxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9mb2xsb3dpbmcnOiBmb3JtYXRGcmllbmRzLFxuXHRcdFx0XHQnbWUvZm9sbG93ZXJzJzogZm9ybWF0RnJpZW5kcyxcblx0XHRcdFx0J21lL2FsYnVtcyc6IGZvcm1hdCxcblx0XHRcdFx0J21lL3Bob3Rvcyc6IGZvcm1hdCxcblx0XHRcdFx0J21lL2ZpbGVzJzogZm9ybWF0LFxuXHRcdFx0XHQnZGVmYXVsdCc6IGZvcm1hdFxuXHRcdFx0fSxcblxuXHRcdFx0Ly8gU3BlY2lhbCByZXF1aXJlbWVudHMgZm9yIGhhbmRsaW5nIFhIUlxuXHRcdFx0eGhyOiBmdW5jdGlvbihwLCBxcykge1xuXHRcdFx0XHRpZiAocC5tZXRob2QgPT09ICdnZXQnIHx8IHAubWV0aG9kID09PSAncG9zdCcpIHtcblx0XHRcdFx0XHRxcy5zdXBwcmVzc19yZXNwb25zZV9jb2RlcyA9IHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJcyB0aGlzIGEgcG9zdCB3aXRoIGEgZGF0YS11cmk/XG5cdFx0XHRcdGlmIChwLm1ldGhvZCA9PT0gJ3Bvc3QnICYmIHAuZGF0YSAmJiB0eXBlb2YgKHAuZGF0YS5maWxlKSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHQvLyBDb252ZXJ0IHRoZSBEYXRhLVVSSSB0byBhIEJsb2Jcblx0XHRcdFx0XHRwLmRhdGEuZmlsZSA9IGhlbGxvLnV0aWxzLnRvQmxvYihwLmRhdGEuZmlsZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0sXG5cblx0XHRcdC8vIFNwZWNpYWwgcmVxdWlyZW1lbnRzIGZvciBoYW5kbGluZyBKU09OUCBmYWxsYmFja1xuXHRcdFx0anNvbnA6IGZ1bmN0aW9uKHAsIHFzKSB7XG5cdFx0XHRcdHZhciBtID0gcC5tZXRob2Q7XG5cdFx0XHRcdGlmIChtICE9PSAnZ2V0JyAmJiAhaGVsbG8udXRpbHMuaGFzQmluYXJ5KHAuZGF0YSkpIHtcblx0XHRcdFx0XHRwLmRhdGEubWV0aG9kID0gbTtcblx0XHRcdFx0XHRwLm1ldGhvZCA9ICdnZXQnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKHAubWV0aG9kID09PSAnZGVsZXRlJykge1xuXHRcdFx0XHRcdHFzLm1ldGhvZCA9ICdkZWxldGUnO1xuXHRcdFx0XHRcdHAubWV0aG9kID0gJ3Bvc3QnO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBTcGVjaWFsIHJlcXVpcmVtZW50cyBmb3IgaWZyYW1lIGZvcm0gaGFja1xuXHRcdFx0Zm9ybTogZnVuY3Rpb24ocCkge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdC8vIEZpcmUgdGhlIGNhbGxiYWNrIG9ubG9hZFxuXHRcdFx0XHRcdGNhbGxiYWNrb25sb2FkOiB0cnVlXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHR2YXIgYmFzZSA9ICdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nO1xuXG5cdGZ1bmN0aW9uIGZvcm1hdFVzZXIobykge1xuXHRcdGlmIChvLmlkKSB7XG5cdFx0XHRvLnRodW1ibmFpbCA9IG8ucGljdHVyZSA9ICdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgby5pZCArICcvcGljdHVyZSc7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRGcmllbmRzKG8pIHtcblx0XHRpZiAoJ2RhdGEnIGluIG8pIHtcblx0XHRcdG8uZGF0YS5mb3JFYWNoKGZvcm1hdFVzZXIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0KG8sIGhlYWRlcnMsIHJlcSkge1xuXHRcdGlmICh0eXBlb2YgbyA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRvID0ge3N1Y2Nlc3M6IG99O1xuXHRcdH1cblxuXHRcdGlmIChvICYmICdkYXRhJyBpbiBvKSB7XG5cdFx0XHR2YXIgdG9rZW4gPSByZXEucXVlcnkuYWNjZXNzX3Rva2VuO1xuXG5cdFx0XHRpZiAoIShvLmRhdGEgaW5zdGFuY2VvZiBBcnJheSkpIHtcblx0XHRcdFx0dmFyIGRhdGEgPSBvLmRhdGE7XG5cdFx0XHRcdGRlbGV0ZSBvLmRhdGE7XG5cdFx0XHRcdG8uZGF0YSA9IFtkYXRhXTtcblx0XHRcdH1cblxuXHRcdFx0by5kYXRhLmZvckVhY2goZnVuY3Rpb24oZCkge1xuXG5cdFx0XHRcdGlmIChkLnBpY3R1cmUpIHtcblx0XHRcdFx0XHRkLnRodW1ibmFpbCA9IGQucGljdHVyZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGQucGljdHVyZXMgPSAoZC5pbWFnZXMgfHwgW10pXG5cdFx0XHRcdFx0LnNvcnQoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGEud2lkdGggLSBiLndpZHRoO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmIChkLmNvdmVyX3Bob3RvICYmIGQuY292ZXJfcGhvdG8uaWQpIHtcblx0XHRcdFx0XHRkLnRodW1ibmFpbCA9IGJhc2UgKyBkLmNvdmVyX3Bob3RvLmlkICsgJy9waWN0dXJlP2FjY2Vzc190b2tlbj0nICsgdG9rZW47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoZC50eXBlID09PSAnYWxidW0nKSB7XG5cdFx0XHRcdFx0ZC5maWxlcyA9IGQucGhvdG9zID0gYmFzZSArIGQuaWQgKyAnL3Bob3Rvcyc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoZC5jYW5fdXBsb2FkKSB7XG5cdFx0XHRcdFx0ZC51cGxvYWRfbG9jYXRpb24gPSBiYXNlICsgZC5pZCArICcvcGhvdG9zJztcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxufSkoaGVsbG8pO1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHRoZWxsby5pbml0KHtcblxuXHRcdGZsaWNrcjoge1xuXG5cdFx0XHRuYW1lOiAnRmxpY2tyJyxcblxuXHRcdFx0Ly8gRW5zdXJlIHRoYXQgeW91IGRlZmluZSBhbiBvYXV0aF9wcm94eVxuXHRcdFx0b2F1dGg6IHtcblx0XHRcdFx0dmVyc2lvbjogJzEuMGEnLFxuXHRcdFx0XHRhdXRoOiAnaHR0cHM6Ly93d3cuZmxpY2tyLmNvbS9zZXJ2aWNlcy9vYXV0aC9hdXRob3JpemU/cGVybXM9cmVhZCcsXG5cdFx0XHRcdHJlcXVlc3Q6ICdodHRwczovL3d3dy5mbGlja3IuY29tL3NlcnZpY2VzL29hdXRoL3JlcXVlc3RfdG9rZW4nLFxuXHRcdFx0XHR0b2tlbjogJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvb2F1dGgvYWNjZXNzX3Rva2VuJ1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQVBJIGJhc2UgVVJMXG5cdFx0XHRiYXNlOiAnaHR0cHM6Ly9hcGkuZmxpY2tyLmNvbS9zZXJ2aWNlcy9yZXN0JyxcblxuXHRcdFx0Ly8gTWFwIEdFVCByZXNxdWVzdHNcblx0XHRcdGdldDoge1xuXHRcdFx0XHRtZTogc2lnbignZmxpY2tyLnBlb3BsZS5nZXRJbmZvJyksXG5cdFx0XHRcdCdtZS9mcmllbmRzJzogc2lnbignZmxpY2tyLmNvbnRhY3RzLmdldExpc3QnLCB7cGVyX3BhZ2U6J0B7bGltaXR8NTB9J30pLFxuXHRcdFx0XHQnbWUvZm9sbG93aW5nJzogc2lnbignZmxpY2tyLmNvbnRhY3RzLmdldExpc3QnLCB7cGVyX3BhZ2U6J0B7bGltaXR8NTB9J30pLFxuXHRcdFx0XHQnbWUvZm9sbG93ZXJzJzogc2lnbignZmxpY2tyLmNvbnRhY3RzLmdldExpc3QnLCB7cGVyX3BhZ2U6J0B7bGltaXR8NTB9J30pLFxuXHRcdFx0XHQnbWUvYWxidW1zJzogc2lnbignZmxpY2tyLnBob3Rvc2V0cy5nZXRMaXN0Jywge3Blcl9wYWdlOidAe2xpbWl0fDUwfSd9KSxcblx0XHRcdFx0J21lL2FsYnVtJzogc2lnbignZmxpY2tyLnBob3Rvc2V0cy5nZXRQaG90b3MnLCB7cGhvdG9zZXRfaWQ6ICdAe2lkfSd9KSxcblx0XHRcdFx0J21lL3Bob3Rvcyc6IHNpZ24oJ2ZsaWNrci5wZW9wbGUuZ2V0UGhvdG9zJywge3Blcl9wYWdlOidAe2xpbWl0fDUwfSd9KVxuXHRcdFx0fSxcblxuXHRcdFx0d3JhcDoge1xuXHRcdFx0XHRtZTogZnVuY3Rpb24obykge1xuXHRcdFx0XHRcdGZvcm1hdEVycm9yKG8pO1xuXHRcdFx0XHRcdG8gPSBjaGVja1Jlc3BvbnNlKG8sICdwZXJzb24nKTtcblx0XHRcdFx0XHRpZiAoby5pZCkge1xuXHRcdFx0XHRcdFx0aWYgKG8ucmVhbG5hbWUpIHtcblx0XHRcdFx0XHRcdFx0by5uYW1lID0gby5yZWFsbmFtZS5fY29udGVudDtcblx0XHRcdFx0XHRcdFx0dmFyIG0gPSBvLm5hbWUuc3BsaXQoJyAnKTtcblx0XHRcdFx0XHRcdFx0by5maXJzdF9uYW1lID0gbS5zaGlmdCgpO1xuXHRcdFx0XHRcdFx0XHRvLmxhc3RfbmFtZSA9IG0uam9pbignICcpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRvLnRodW1ibmFpbCA9IGdldEJ1ZGR5SWNvbihvLCAnbCcpO1xuXHRcdFx0XHRcdFx0by5waWN0dXJlID0gZ2V0QnVkZHlJY29uKG8sICdsJyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0J21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLFxuXHRcdFx0XHQnbWUvZm9sbG93ZXJzJzogZm9ybWF0RnJpZW5kcyxcblx0XHRcdFx0J21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9hbGJ1bXMnOiBmdW5jdGlvbihvKSB7XG5cdFx0XHRcdFx0Zm9ybWF0RXJyb3Iobyk7XG5cdFx0XHRcdFx0byA9IGNoZWNrUmVzcG9uc2UobywgJ3Bob3Rvc2V0cycpO1xuXHRcdFx0XHRcdHBhZ2luZyhvKTtcblx0XHRcdFx0XHRpZiAoby5waG90b3NldCkge1xuXHRcdFx0XHRcdFx0by5kYXRhID0gby5waG90b3NldDtcblx0XHRcdFx0XHRcdG8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0XHRcdFx0aXRlbS5uYW1lID0gaXRlbS50aXRsZS5fY29udGVudDtcblx0XHRcdFx0XHRcdFx0aXRlbS5waG90b3MgPSAnaHR0cHM6Ly9hcGkuZmxpY2tyLmNvbS9zZXJ2aWNlcy9yZXN0JyArIGdldEFwaVVybCgnZmxpY2tyLnBob3Rvc2V0cy5nZXRQaG90b3MnLCB7cGhvdG9zZXRfaWQ6IGl0ZW0uaWR9LCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRkZWxldGUgby5waG90b3NldDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnbWUvcGhvdG9zJzogZnVuY3Rpb24obykge1xuXHRcdFx0XHRcdGZvcm1hdEVycm9yKG8pO1xuXHRcdFx0XHRcdHJldHVybiBmb3JtYXRQaG90b3Mobyk7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0J2RlZmF1bHQnOiBmdW5jdGlvbihvKSB7XG5cdFx0XHRcdFx0Zm9ybWF0RXJyb3Iobyk7XG5cdFx0XHRcdFx0cmV0dXJuIGZvcm1hdFBob3RvcyhvKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0eGhyOiBmYWxzZSxcblxuXHRcdFx0anNvbnA6IGZ1bmN0aW9uKHAsIHFzKSB7XG5cdFx0XHRcdGlmIChwLm1ldGhvZCA9PSAnZ2V0Jykge1xuXHRcdFx0XHRcdGRlbGV0ZSBxcy5jYWxsYmFjaztcblx0XHRcdFx0XHRxcy5qc29uY2FsbGJhY2sgPSBwLmNhbGxiYWNrSUQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXG5cdGZ1bmN0aW9uIGdldEFwaVVybChtZXRob2QsIGV4dHJhUGFyYW1zLCBza2lwTmV0d29yaykge1xuXHRcdHZhciB1cmwgPSAoKHNraXBOZXR3b3JrKSA/ICcnIDogJ2ZsaWNrcjonKSArXG5cdFx0XHQnP21ldGhvZD0nICsgbWV0aG9kICtcblx0XHRcdCcmYXBpX2tleT0nICsgaGVsbG8uc2VydmljZXMuZmxpY2tyLmlkICtcblx0XHRcdCcmZm9ybWF0PWpzb24nO1xuXHRcdGZvciAodmFyIHBhcmFtIGluIGV4dHJhUGFyYW1zKSB7XG5cdFx0XHRpZiAoZXh0cmFQYXJhbXMuaGFzT3duUHJvcGVydHkocGFyYW0pKSB7XG5cdFx0XHRcdHVybCArPSAnJicgKyBwYXJhbSArICc9JyArIGV4dHJhUGFyYW1zW3BhcmFtXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdXJsO1xuXHR9XG5cblx0Ly8gVGhpcyBpcyBub3QgZXhhY3RseSBuZWF0IGJ1dCBhdm9pZCB0byBjYWxsXG5cdC8vIFRoZSBtZXRob2QgJ2ZsaWNrci50ZXN0LmxvZ2luJyBmb3IgZWFjaCBhcGkgY2FsbFxuXG5cdGZ1bmN0aW9uIHdpdGhVc2VyKGNiKSB7XG5cdFx0dmFyIGF1dGggPSBoZWxsby5nZXRBdXRoUmVzcG9uc2UoJ2ZsaWNrcicpO1xuXHRcdGNiKGF1dGggJiYgYXV0aC51c2VyX25zaWQgPyBhdXRoLnVzZXJfbnNpZCA6IG51bGwpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2lnbih1cmwsIHBhcmFtcykge1xuXHRcdGlmICghcGFyYW1zKSB7XG5cdFx0XHRwYXJhbXMgPSB7fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24ocCwgY2FsbGJhY2spIHtcblx0XHRcdHdpdGhVc2VyKGZ1bmN0aW9uKHVzZXJJZCkge1xuXHRcdFx0XHRwYXJhbXMudXNlcl9pZCA9IHVzZXJJZDtcblx0XHRcdFx0Y2FsbGJhY2soZ2V0QXBpVXJsKHVybCwgcGFyYW1zLCB0cnVlKSk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QnVkZHlJY29uKHByb2ZpbGUsIHNpemUpIHtcblx0XHR2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vaW1hZ2VzL2J1ZGR5aWNvbi5naWYnO1xuXHRcdGlmIChwcm9maWxlLm5zaWQgJiYgcHJvZmlsZS5pY29uc2VydmVyICYmIHByb2ZpbGUuaWNvbmZhcm0pIHtcblx0XHRcdHVybCA9ICdodHRwczovL2Zhcm0nICsgcHJvZmlsZS5pY29uZmFybSArICcuc3RhdGljZmxpY2tyLmNvbS8nICtcblx0XHRcdFx0cHJvZmlsZS5pY29uc2VydmVyICsgJy8nICtcblx0XHRcdFx0J2J1ZGR5aWNvbnMvJyArIHByb2ZpbGUubnNpZCArXG5cdFx0XHRcdCgoc2l6ZSkgPyAnXycgKyBzaXplIDogJycpICsgJy5qcGcnO1xuXHRcdH1cblxuXHRcdHJldHVybiB1cmw7XG5cdH1cblxuXHQvLyBTZWU6IGh0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvYXBpL21pc2MudXJscy5odG1sXG5cdGZ1bmN0aW9uIGNyZWF0ZVBob3RvVXJsKGlkLCBmYXJtLCBzZXJ2ZXIsIHNlY3JldCwgc2l6ZSkge1xuXHRcdHNpemUgPSAoc2l6ZSkgPyAnXycgKyBzaXplIDogJyc7XG5cdFx0cmV0dXJuICdodHRwczovL2Zhcm0nICsgZmFybSArICcuc3RhdGljZmxpY2tyLmNvbS8nICsgc2VydmVyICsgJy8nICsgaWQgKyAnXycgKyBzZWNyZXQgKyBzaXplICsgJy5qcGcnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRFcnJvcihvKSB7XG5cdFx0aWYgKG8gJiYgby5zdGF0ICYmIG8uc3RhdC50b0xvd2VyQ2FzZSgpICE9ICdvaycpIHtcblx0XHRcdG8uZXJyb3IgPSB7XG5cdFx0XHRcdGNvZGU6ICdpbnZhbGlkX3JlcXVlc3QnLFxuXHRcdFx0XHRtZXNzYWdlOiBvLm1lc3NhZ2Vcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0UGhvdG9zKG8pIHtcblx0XHRpZiAoby5waG90b3NldCB8fCBvLnBob3Rvcykge1xuXHRcdFx0dmFyIHNldCA9ICgncGhvdG9zZXQnIGluIG8pID8gJ3Bob3Rvc2V0JyA6ICdwaG90b3MnO1xuXHRcdFx0byA9IGNoZWNrUmVzcG9uc2Uobywgc2V0KTtcblx0XHRcdHBhZ2luZyhvKTtcblx0XHRcdG8uZGF0YSA9IG8ucGhvdG87XG5cdFx0XHRkZWxldGUgby5waG90bztcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgby5kYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBwaG90byA9IG8uZGF0YVtpXTtcblx0XHRcdFx0cGhvdG8ubmFtZSA9IHBob3RvLnRpdGxlO1xuXHRcdFx0XHRwaG90by5waWN0dXJlID0gY3JlYXRlUGhvdG9VcmwocGhvdG8uaWQsIHBob3RvLmZhcm0sIHBob3RvLnNlcnZlciwgcGhvdG8uc2VjcmV0LCAnJyk7XG5cdFx0XHRcdHBob3RvLnBpY3R1cmVzID0gY3JlYXRlUGljdHVyZXMocGhvdG8uaWQsIHBob3RvLmZhcm0sIHBob3RvLnNlcnZlciwgcGhvdG8uc2VjcmV0KTtcblx0XHRcdFx0cGhvdG8uc291cmNlID0gY3JlYXRlUGhvdG9VcmwocGhvdG8uaWQsIHBob3RvLmZhcm0sIHBob3RvLnNlcnZlciwgcGhvdG8uc2VjcmV0LCAnYicpO1xuXHRcdFx0XHRwaG90by50aHVtYm5haWwgPSBjcmVhdGVQaG90b1VybChwaG90by5pZCwgcGhvdG8uZmFybSwgcGhvdG8uc2VydmVyLCBwaG90by5zZWNyZXQsICdtJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHQvLyBTZWU6IGh0dHBzOi8vd3d3LmZsaWNrci5jb20vc2VydmljZXMvYXBpL21pc2MudXJscy5odG1sXG5cdGZ1bmN0aW9uIGNyZWF0ZVBpY3R1cmVzKGlkLCBmYXJtLCBzZXJ2ZXIsIHNlY3JldCkge1xuXG5cdFx0dmFyIE5PX0xJTUlUID0gMjA0ODtcblx0XHR2YXIgc2l6ZXMgPSBbXG5cdFx0XHR7aWQ6ICd0JywgbWF4OiAxMDB9LFxuXHRcdFx0e2lkOiAnbScsIG1heDogMjQwfSxcblx0XHRcdHtpZDogJ24nLCBtYXg6IDMyMH0sXG5cdFx0XHR7aWQ6ICcnLCBtYXg6IDUwMH0sXG5cdFx0XHR7aWQ6ICd6JywgbWF4OiA2NDB9LFxuXHRcdFx0e2lkOiAnYycsIG1heDogODAwfSxcblx0XHRcdHtpZDogJ2InLCBtYXg6IDEwMjR9LFxuXHRcdFx0e2lkOiAnaCcsIG1heDogMTYwMH0sXG5cdFx0XHR7aWQ6ICdrJywgbWF4OiAyMDQ4fSxcblx0XHRcdHtpZDogJ28nLCBtYXg6IE5PX0xJTUlUfVxuXHRcdF07XG5cblx0XHRyZXR1cm4gc2l6ZXMubWFwKGZ1bmN0aW9uKHNpemUpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHNvdXJjZTogY3JlYXRlUGhvdG9VcmwoaWQsIGZhcm0sIHNlcnZlciwgc2VjcmV0LCBzaXplLmlkKSxcblxuXHRcdFx0XHQvLyBOb3RlOiB0aGlzIGlzIGEgZ3Vlc3MgdGhhdCdzIGFsbW9zdCBjZXJ0YWluIHRvIGJlIHdyb25nICh1bmxlc3Mgc3F1YXJlIHNvdXJjZSlcblx0XHRcdFx0d2lkdGg6IHNpemUubWF4LFxuXHRcdFx0XHRoZWlnaHQ6IHNpemUubWF4XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tSZXNwb25zZShvLCBrZXkpIHtcblxuXHRcdGlmIChrZXkgaW4gbykge1xuXHRcdFx0byA9IG9ba2V5XTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoISgnZXJyb3InIGluIG8pKSB7XG5cdFx0XHRvLmVycm9yID0ge1xuXHRcdFx0XHRjb2RlOiAnaW52YWxpZF9yZXF1ZXN0Jyxcblx0XHRcdFx0bWVzc2FnZTogby5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZ2V0IGRhdGEgZnJvbSBGbGlja3InXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvKSB7XG5cdFx0Zm9ybWF0RXJyb3Iobyk7XG5cdFx0aWYgKG8uY29udGFjdHMpIHtcblx0XHRcdG8gPSBjaGVja1Jlc3BvbnNlKG8sICdjb250YWN0cycpO1xuXHRcdFx0cGFnaW5nKG8pO1xuXHRcdFx0by5kYXRhID0gby5jb250YWN0O1xuXHRcdFx0ZGVsZXRlIG8uY29udGFjdDtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgby5kYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBpdGVtID0gby5kYXRhW2ldO1xuXHRcdFx0XHRpdGVtLmlkID0gaXRlbS5uc2lkO1xuXHRcdFx0XHRpdGVtLm5hbWUgPSBpdGVtLnJlYWxuYW1lIHx8IGl0ZW0udXNlcm5hbWU7XG5cdFx0XHRcdGl0ZW0udGh1bWJuYWlsID0gZ2V0QnVkZHlJY29uKGl0ZW0sICdtJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBwYWdpbmcocmVzKSB7XG5cdFx0aWYgKHJlcy5wYWdlICYmIHJlcy5wYWdlcyAmJiByZXMucGFnZSAhPT0gcmVzLnBhZ2VzKSB7XG5cdFx0XHRyZXMucGFnaW5nID0ge1xuXHRcdFx0XHRuZXh0OiAnP3BhZ2U9JyArICgrK3Jlcy5wYWdlKVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxufSkoaGVsbG8pO1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHRoZWxsby5pbml0KHtcblxuXHRcdGZvdXJzcXVhcmU6IHtcblxuXHRcdFx0bmFtZTogJ0ZvdXJzcXVhcmUnLFxuXG5cdFx0XHRvYXV0aDoge1xuXHRcdFx0XHQvLyBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVyLmZvdXJzcXVhcmUuY29tL292ZXJ2aWV3L2F1dGhcblx0XHRcdFx0dmVyc2lvbjogMixcblx0XHRcdFx0YXV0aDogJ2h0dHBzOi8vZm91cnNxdWFyZS5jb20vb2F1dGgyL2F1dGhlbnRpY2F0ZScsXG5cdFx0XHRcdGdyYW50OiAnaHR0cHM6Ly9mb3Vyc3F1YXJlLmNvbS9vYXV0aDIvYWNjZXNzX3Rva2VuJ1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVmcmVzaCB0aGUgYWNjZXNzX3Rva2VuIG9uY2UgZXhwaXJlZFxuXHRcdFx0cmVmcmVzaDogdHJ1ZSxcblxuXHRcdFx0YmFzZTogJ2h0dHBzOi8vYXBpLmZvdXJzcXVhcmUuY29tL3YyLycsXG5cblx0XHRcdGdldDoge1xuXHRcdFx0XHRtZTogJ3VzZXJzL3NlbGYnLFxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6ICd1c2Vycy9zZWxmL2ZyaWVuZHMnLFxuXHRcdFx0XHQnbWUvZm9sbG93ZXJzJzogJ3VzZXJzL3NlbGYvZnJpZW5kcycsXG5cdFx0XHRcdCdtZS9mb2xsb3dpbmcnOiAndXNlcnMvc2VsZi9mcmllbmRzJ1xuXHRcdFx0fSxcblxuXHRcdFx0d3JhcDoge1xuXHRcdFx0XHRtZTogZnVuY3Rpb24obykge1xuXHRcdFx0XHRcdGZvcm1hdEVycm9yKG8pO1xuXHRcdFx0XHRcdGlmIChvICYmIG8ucmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdG8gPSBvLnJlc3BvbnNlLnVzZXI7XG5cdFx0XHRcdFx0XHRmb3JtYXRVc2VyKG8pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdCdkZWZhdWx0JzogZnVuY3Rpb24obykge1xuXHRcdFx0XHRcdGZvcm1hdEVycm9yKG8pO1xuXG5cdFx0XHRcdFx0Ly8gRm9ybWF0IGZyaWVuZHNcblx0XHRcdFx0XHRpZiAobyAmJiAncmVzcG9uc2UnIGluIG8gJiYgJ2ZyaWVuZHMnIGluIG8ucmVzcG9uc2UgJiYgJ2l0ZW1zJyBpbiBvLnJlc3BvbnNlLmZyaWVuZHMpIHtcblx0XHRcdFx0XHRcdG8uZGF0YSA9IG8ucmVzcG9uc2UuZnJpZW5kcy5pdGVtcztcblx0XHRcdFx0XHRcdG8uZGF0YS5mb3JFYWNoKGZvcm1hdFVzZXIpO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIG8ucmVzcG9uc2U7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdHhocjogZm9ybWF0UmVxdWVzdCxcblx0XHRcdGpzb25wOiBmb3JtYXRSZXF1ZXN0XG5cdFx0fVxuXHR9KTtcblxuXHRmdW5jdGlvbiBmb3JtYXRFcnJvcihvKSB7XG5cdFx0aWYgKG8ubWV0YSAmJiAoby5tZXRhLmNvZGUgPT09IDQwMCB8fCBvLm1ldGEuY29kZSA9PT0gNDAxKSkge1xuXHRcdFx0by5lcnJvciA9IHtcblx0XHRcdFx0Y29kZTogJ2FjY2Vzc19kZW5pZWQnLFxuXHRcdFx0XHRtZXNzYWdlOiBvLm1ldGEuZXJyb3JEZXRhaWxcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7XG5cdFx0aWYgKG8gJiYgby5pZCkge1xuXHRcdFx0by50aHVtYm5haWwgPSBvLnBob3RvLnByZWZpeCArICcxMDB4MTAwJyArIG8ucGhvdG8uc3VmZml4O1xuXHRcdFx0by5uYW1lID0gby5maXJzdE5hbWUgKyAnICcgKyBvLmxhc3ROYW1lO1xuXHRcdFx0by5maXJzdF9uYW1lID0gby5maXJzdE5hbWU7XG5cdFx0XHRvLmxhc3RfbmFtZSA9IG8ubGFzdE5hbWU7XG5cdFx0XHRpZiAoby5jb250YWN0KSB7XG5cdFx0XHRcdGlmIChvLmNvbnRhY3QuZW1haWwpIHtcblx0XHRcdFx0XHRvLmVtYWlsID0gby5jb250YWN0LmVtYWlsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0UmVxdWVzdChwLCBxcykge1xuXHRcdHZhciB0b2tlbiA9IHFzLmFjY2Vzc190b2tlbjtcblx0XHRkZWxldGUgcXMuYWNjZXNzX3Rva2VuO1xuXHRcdHFzLm9hdXRoX3Rva2VuID0gdG9rZW47XG5cdFx0cXMudiA9IDIwMTIxMTI1O1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cbn0pKGhlbGxvKTtcblxuKGZ1bmN0aW9uKGhlbGxvKSB7XG5cblx0aGVsbG8uaW5pdCh7XG5cblx0XHRnaXRodWI6IHtcblxuXHRcdFx0bmFtZTogJ0dpdEh1YicsXG5cblx0XHRcdG9hdXRoOiB7XG5cdFx0XHRcdHZlcnNpb246IDIsXG5cdFx0XHRcdGF1dGg6ICdodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYXV0aG9yaXplJyxcblx0XHRcdFx0Z3JhbnQ6ICdodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYWNjZXNzX3Rva2VuJyxcblx0XHRcdFx0cmVzcG9uc2VfdHlwZTogJ2NvZGUnXG5cdFx0XHR9LFxuXG5cdFx0XHRzY29wZToge1xuXHRcdFx0XHRlbWFpbDogJ3VzZXI6ZW1haWwnXG5cdFx0XHR9LFxuXG5cdFx0XHRiYXNlOiAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS8nLFxuXG5cdFx0XHRnZXQ6IHtcblx0XHRcdFx0bWU6ICd1c2VyJyxcblx0XHRcdFx0J21lL2ZyaWVuZHMnOiAndXNlci9mb2xsb3dpbmc/cGVyX3BhZ2U9QHtsaW1pdHwxMDB9Jyxcblx0XHRcdFx0J21lL2ZvbGxvd2luZyc6ICd1c2VyL2ZvbGxvd2luZz9wZXJfcGFnZT1Ae2xpbWl0fDEwMH0nLFxuXHRcdFx0XHQnbWUvZm9sbG93ZXJzJzogJ3VzZXIvZm9sbG93ZXJzP3Blcl9wYWdlPUB7bGltaXR8MTAwfScsXG5cdFx0XHRcdCdtZS9saWtlJzogJ3VzZXIvc3RhcnJlZD9wZXJfcGFnZT1Ae2xpbWl0fDEwMH0nXG5cdFx0XHR9LFxuXG5cdFx0XHR3cmFwOiB7XG5cdFx0XHRcdG1lOiBmdW5jdGlvbihvLCBoZWFkZXJzKSB7XG5cblx0XHRcdFx0XHRmb3JtYXRFcnJvcihvLCBoZWFkZXJzKTtcblx0XHRcdFx0XHRmb3JtYXRVc2VyKG8pO1xuXG5cdFx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0J2RlZmF1bHQnOiBmdW5jdGlvbihvLCBoZWFkZXJzLCByZXEpIHtcblxuXHRcdFx0XHRcdGZvcm1hdEVycm9yKG8sIGhlYWRlcnMpO1xuXG5cdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkobykpIHtcblx0XHRcdFx0XHRcdG8gPSB7ZGF0YTpvfTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoby5kYXRhKSB7XG5cdFx0XHRcdFx0XHRwYWdpbmcobywgaGVhZGVycywgcmVxKTtcblx0XHRcdFx0XHRcdG8uZGF0YS5mb3JFYWNoKGZvcm1hdFVzZXIpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHR4aHI6IGZ1bmN0aW9uKHApIHtcblxuXHRcdFx0XHRpZiAocC5tZXRob2QgIT09ICdnZXQnICYmIHAuZGF0YSkge1xuXG5cdFx0XHRcdFx0Ly8gU2VyaWFsaXplIHBheWxvYWQgYXMgSlNPTlxuXHRcdFx0XHRcdHAuaGVhZGVycyA9IHAuaGVhZGVycyB8fCB7fTtcblx0XHRcdFx0XHRwLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgKHAuZGF0YSkgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdFx0XHRwLmRhdGEgPSBKU09OLnN0cmluZ2lmeShwLmRhdGEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0ZnVuY3Rpb24gZm9ybWF0RXJyb3IobywgaGVhZGVycykge1xuXHRcdHZhciBjb2RlID0gaGVhZGVycyA/IGhlYWRlcnMuc3RhdHVzQ29kZSA6IChvICYmICdtZXRhJyBpbiBvICYmICdzdGF0dXMnIGluIG8ubWV0YSAmJiBvLm1ldGEuc3RhdHVzKTtcblx0XHRpZiAoKGNvZGUgPT09IDQwMSB8fCBjb2RlID09PSA0MDMpKSB7XG5cdFx0XHRvLmVycm9yID0ge1xuXHRcdFx0XHRjb2RlOiAnYWNjZXNzX2RlbmllZCcsXG5cdFx0XHRcdG1lc3NhZ2U6IG8ubWVzc2FnZSB8fCAoby5kYXRhID8gby5kYXRhLm1lc3NhZ2UgOiAnQ291bGQgbm90IGdldCByZXNwb25zZScpXG5cdFx0XHR9O1xuXHRcdFx0ZGVsZXRlIG8ubWVzc2FnZTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRVc2VyKG8pIHtcblx0XHRpZiAoby5pZCkge1xuXHRcdFx0by50aHVtYm5haWwgPSBvLnBpY3R1cmUgPSBvLmF2YXRhcl91cmw7XG5cdFx0XHRvLm5hbWUgPSBvLmxvZ2luO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHBhZ2luZyhyZXMsIGhlYWRlcnMsIHJlcSkge1xuXHRcdGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5sZW5ndGggJiYgaGVhZGVycyAmJiBoZWFkZXJzLkxpbmspIHtcblx0XHRcdHZhciBuZXh0ID0gaGVhZGVycy5MaW5rLm1hdGNoKC88KC4qPyk+O1xccypyZWw9XFxcIm5leHRcXFwiLyk7XG5cdFx0XHRpZiAobmV4dCkge1xuXHRcdFx0XHRyZXMucGFnaW5nID0ge1xuXHRcdFx0XHRcdG5leHQ6IG5leHRbMV1cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxufSkoaGVsbG8pO1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHR2YXIgY29udGFjdHNVcmwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tOC9mZWVkcy9jb250YWN0cy9kZWZhdWx0L2Z1bGw/dj0zLjAmYWx0PWpzb24mbWF4LXJlc3VsdHM9QHtsaW1pdHwxMDAwfSZzdGFydC1pbmRleD1Ae3N0YXJ0fDF9JztcblxuXHRoZWxsby5pbml0KHtcblxuXHRcdGdvb2dsZToge1xuXG5cdFx0XHRuYW1lOiAnR29vZ2xlIFBsdXMnLFxuXG5cdFx0XHQvLyBTZWU6IGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vYXBpcy9hY2NvdW50cy9kb2NzL09BdXRoMlVzZXJBZ2VudC5odG1sXG5cdFx0XHRvYXV0aDoge1xuXHRcdFx0XHR2ZXJzaW9uOiAyLFxuXHRcdFx0XHRhdXRoOiAnaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgnLFxuXHRcdFx0XHRncmFudDogJ2h0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi90b2tlbidcblx0XHRcdH0sXG5cblx0XHRcdC8vIEF1dGhvcml6YXRpb24gc2NvcGVzXG5cdFx0XHRzY29wZToge1xuXHRcdFx0XHRiYXNpYzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvcGx1cy5tZSBwcm9maWxlJyxcblx0XHRcdFx0ZW1haWw6ICdlbWFpbCcsXG5cdFx0XHRcdGJpcnRoZGF5OiAnJyxcblx0XHRcdFx0ZXZlbnRzOiAnJyxcblx0XHRcdFx0cGhvdG9zOiAnaHR0cHM6Ly9waWNhc2F3ZWIuZ29vZ2xlLmNvbS9kYXRhLycsXG5cdFx0XHRcdHZpZGVvczogJ2h0dHA6Ly9nZGF0YS55b3V0dWJlLmNvbScsXG5cdFx0XHRcdGZyaWVuZHM6ICdodHRwczovL3d3dy5nb29nbGUuY29tL204L2ZlZWRzLCBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3BsdXMubG9naW4nLFxuXHRcdFx0XHRmaWxlczogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUucmVhZG9ubHknLFxuXHRcdFx0XHRwdWJsaXNoOiAnJyxcblx0XHRcdFx0cHVibGlzaF9maWxlczogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUnLFxuXHRcdFx0XHRzaGFyZTogJycsXG5cdFx0XHRcdGNyZWF0ZV9ldmVudDogJycsXG5cdFx0XHRcdG9mZmxpbmVfYWNjZXNzOiAnJ1xuXHRcdFx0fSxcblxuXHRcdFx0c2NvcGVfZGVsaW06ICcgJyxcblxuXHRcdFx0bG9naW46IGZ1bmN0aW9uKHApIHtcblxuXHRcdFx0XHRpZiAocC5xcy5yZXNwb25zZV90eXBlID09PSAnY29kZScpIHtcblxuXHRcdFx0XHRcdC8vIExldCdzIHNldCB0aGlzIHRvIGFuIG9mZmxpbmUgYWNjZXNzIHRvIHJldHVybiBhIHJlZnJlc2hfdG9rZW5cblx0XHRcdFx0XHRwLnFzLmFjY2Vzc190eXBlID0gJ29mZmxpbmUnO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVhdXRoZW50aWNhdGVcblx0XHRcdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vaWRlbnRpdHkvcHJvdG9jb2xzL1xuXHRcdFx0XHRpZiAocC5vcHRpb25zLmZvcmNlKSB7XG5cdFx0XHRcdFx0cC5xcy5hcHByb3ZhbF9wcm9tcHQgPSAnZm9yY2UnO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBBUEkgYmFzZSBVUklcblx0XHRcdGJhc2U6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS8nLFxuXG5cdFx0XHQvLyBNYXAgR0VUIHJlcXVlc3RzXG5cdFx0XHRnZXQ6IHtcblx0XHRcdFx0bWU6ICdwbHVzL3YxL3Blb3BsZS9tZScsXG5cblx0XHRcdFx0Ly8gRGVwcmVjYXRlZCBTZXB0IDEsIDIwMTRcblx0XHRcdFx0Ly8nbWUnOiAnb2F1dGgyL3YxL3VzZXJpbmZvP2FsdD1qc29uJyxcblxuXHRcdFx0XHQvLyBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tLysvYXBpL2xhdGVzdC9wZW9wbGUvbGlzdFxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6ICdwbHVzL3YxL3Blb3BsZS9tZS9wZW9wbGUvdmlzaWJsZT9tYXhSZXN1bHRzPUB7bGltaXR8MTAwfScsXG5cdFx0XHRcdCdtZS9mb2xsb3dpbmcnOiBjb250YWN0c1VybCxcblx0XHRcdFx0J21lL2ZvbGxvd2Vycyc6IGNvbnRhY3RzVXJsLFxuXHRcdFx0XHQnbWUvY29udGFjdHMnOiBjb250YWN0c1VybCxcblx0XHRcdFx0J21lL3NoYXJlJzogJ3BsdXMvdjEvcGVvcGxlL21lL2FjdGl2aXRpZXMvcHVibGljP21heFJlc3VsdHM9QHtsaW1pdHwxMDB9Jyxcblx0XHRcdFx0J21lL2ZlZWQnOiAncGx1cy92MS9wZW9wbGUvbWUvYWN0aXZpdGllcy9wdWJsaWM/bWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH0nLFxuXHRcdFx0XHQnbWUvYWxidW1zJzogJ2h0dHBzOi8vcGljYXNhd2ViLmdvb2dsZS5jb20vZGF0YS9mZWVkL2FwaS91c2VyL2RlZmF1bHQ/YWx0PWpzb24mbWF4LXJlc3VsdHM9QHtsaW1pdHwxMDB9JnN0YXJ0LWluZGV4PUB7c3RhcnR8MX0nLFxuXHRcdFx0XHQnbWUvYWxidW0nOiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdHZhciBrZXkgPSBwLnF1ZXJ5LmlkO1xuXHRcdFx0XHRcdGRlbGV0ZSBwLnF1ZXJ5LmlkO1xuXHRcdFx0XHRcdGNhbGxiYWNrKGtleS5yZXBsYWNlKCcvZW50cnkvJywgJy9mZWVkLycpKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnbWUvcGhvdG9zJzogJ2h0dHBzOi8vcGljYXNhd2ViLmdvb2dsZS5jb20vZGF0YS9mZWVkL2FwaS91c2VyL2RlZmF1bHQ/YWx0PWpzb24ma2luZD1waG90byZtYXgtcmVzdWx0cz1Ae2xpbWl0fDEwMH0mc3RhcnQtaW5kZXg9QHtzdGFydHwxfScsXG5cblx0XHRcdFx0Ly8gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS92Mi9yZWZlcmVuY2UvZmlsZXMvbGlzdFxuXHRcdFx0XHQnbWUvZmlsZSc6ICdkcml2ZS92Mi9maWxlcy9Ae2lkfScsXG5cdFx0XHRcdCdtZS9maWxlcyc6ICdkcml2ZS92Mi9maWxlcz9xPSUyMkB7cGFyZW50fHJvb3R9JTIyK2luK3BhcmVudHMrYW5kK3RyYXNoZWQ9ZmFsc2UmbWF4UmVzdWx0cz1Ae2xpbWl0fDEwMH0nLFxuXG5cdFx0XHRcdC8vIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZHJpdmUvdjIvcmVmZXJlbmNlL2ZpbGVzL2xpc3Rcblx0XHRcdFx0J21lL2ZvbGRlcnMnOiAnZHJpdmUvdjIvZmlsZXM/cT0lMjJAe2lkfHJvb3R9JTIyK2luK3BhcmVudHMrYW5kK21pbWVUeXBlKz0rJTIyYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlciUyMithbmQrdHJhc2hlZD1mYWxzZSZtYXhSZXN1bHRzPUB7bGltaXR8MTAwfScsXG5cblx0XHRcdFx0Ly8gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS92Mi9yZWZlcmVuY2UvZmlsZXMvbGlzdFxuXHRcdFx0XHQnbWUvZm9sZGVyJzogJ2RyaXZlL3YyL2ZpbGVzP3E9JTIyQHtpZHxyb290fSUyMitpbitwYXJlbnRzK2FuZCt0cmFzaGVkPWZhbHNlJm1heFJlc3VsdHM9QHtsaW1pdHwxMDB9J1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gTWFwIFBPU1QgcmVxdWVzdHNcblx0XHRcdHBvc3Q6IHtcblxuXHRcdFx0XHQvLyBHb29nbGUgRHJpdmVcblx0XHRcdFx0J21lL2ZpbGVzJzogdXBsb2FkRHJpdmUsXG5cdFx0XHRcdCdtZS9mb2xkZXJzJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHtcblx0XHRcdFx0XHRwLmRhdGEgPSB7XG5cdFx0XHRcdFx0XHR0aXRsZTogcC5kYXRhLm5hbWUsXG5cdFx0XHRcdFx0XHRwYXJlbnRzOiBbe2lkOiBwLmRhdGEucGFyZW50IHx8ICdyb290J31dLFxuXHRcdFx0XHRcdFx0bWltZVR5cGU6ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyJ1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y2FsbGJhY2soJ2RyaXZlL3YyL2ZpbGVzJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8vIE1hcCBQVVQgcmVxdWVzdHNcblx0XHRcdHB1dDoge1xuXHRcdFx0XHQnbWUvZmlsZXMnOiB1cGxvYWREcml2ZVxuXHRcdFx0fSxcblxuXHRcdFx0Ly8gTWFwIERFTEVURSByZXF1ZXN0c1xuXHRcdFx0ZGVsOiB7XG5cdFx0XHRcdCdtZS9maWxlcyc6ICdkcml2ZS92Mi9maWxlcy9Ae2lkfScsXG5cdFx0XHRcdCdtZS9mb2xkZXInOiAnZHJpdmUvdjIvZmlsZXMvQHtpZH0nXG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBNYXAgUEFUQ0ggcmVxdWVzdHNcblx0XHRcdHBhdGNoOiB7XG5cdFx0XHRcdCdtZS9maWxlJzogJ2RyaXZlL3YyL2ZpbGVzL0B7aWR9J1xuXHRcdFx0fSxcblxuXHRcdFx0d3JhcDoge1xuXHRcdFx0XHRtZTogZnVuY3Rpb24obykge1xuXHRcdFx0XHRcdGlmIChvLmlkKSB7XG5cdFx0XHRcdFx0XHRvLmxhc3RfbmFtZSA9IG8uZmFtaWx5X25hbWUgfHwgKG8ubmFtZSA/IG8ubmFtZS5mYW1pbHlOYW1lIDogbnVsbCk7XG5cdFx0XHRcdFx0XHRvLmZpcnN0X25hbWUgPSBvLmdpdmVuX25hbWUgfHwgKG8ubmFtZSA/IG8ubmFtZS5naXZlbk5hbWUgOiBudWxsKTtcblxuXHRcdFx0XHRcdFx0aWYgKG8uZW1haWxzICYmIG8uZW1haWxzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRvLmVtYWlsID0gby5lbWFpbHNbMF0udmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGZvcm1hdFBlcnNvbihvKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6IGZ1bmN0aW9uKG8pIHtcblx0XHRcdFx0XHRpZiAoby5pdGVtcykge1xuXHRcdFx0XHRcdFx0cGFnaW5nKG8pO1xuXHRcdFx0XHRcdFx0by5kYXRhID0gby5pdGVtcztcblx0XHRcdFx0XHRcdG8uZGF0YS5mb3JFYWNoKGZvcm1hdFBlcnNvbik7XG5cdFx0XHRcdFx0XHRkZWxldGUgby5pdGVtcztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnbWUvY29udGFjdHMnOiBmb3JtYXRGcmllbmRzLFxuXHRcdFx0XHQnbWUvZm9sbG93ZXJzJzogZm9ybWF0RnJpZW5kcyxcblx0XHRcdFx0J21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9zaGFyZSc6IGZvcm1hdEZlZWQsXG5cdFx0XHRcdCdtZS9mZWVkJzogZm9ybWF0RmVlZCxcblx0XHRcdFx0J21lL2FsYnVtcyc6IGdFbnRyeSxcblx0XHRcdFx0J21lL3Bob3Rvcyc6IGZvcm1hdFBob3Rvcyxcblx0XHRcdFx0J2RlZmF1bHQnOiBnRW50cnlcblx0XHRcdH0sXG5cblx0XHRcdHhocjogZnVuY3Rpb24ocCkge1xuXG5cdFx0XHRcdGlmIChwLm1ldGhvZCA9PT0gJ3Bvc3QnIHx8IHAubWV0aG9kID09PSAncHV0Jykge1xuXHRcdFx0XHRcdHRvSlNPTihwKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmIChwLm1ldGhvZCA9PT0gJ3BhdGNoJykge1xuXHRcdFx0XHRcdGhlbGxvLnV0aWxzLmV4dGVuZChwLnF1ZXJ5LCBwLmRhdGEpO1xuXHRcdFx0XHRcdHAuZGF0YSA9IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0sXG5cblx0XHRcdC8vIERvbid0IGV2ZW4gdHJ5IHN1Ym1pdHRpbmcgdmlhIGZvcm0uXG5cdFx0XHQvLyBUaGlzIG1lYW5zIG5vIFBPU1Qgb3BlcmF0aW9ucyBpbiA8PUlFOVxuXHRcdFx0Zm9ybTogZmFsc2Vcblx0XHR9XG5cdH0pO1xuXG5cdGZ1bmN0aW9uIHRvSW50KHMpIHtcblx0XHRyZXR1cm4gcGFyc2VJbnQocywgMTApO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0RmVlZChvKSB7XG5cdFx0cGFnaW5nKG8pO1xuXHRcdG8uZGF0YSA9IG8uaXRlbXM7XG5cdFx0ZGVsZXRlIG8uaXRlbXM7XG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHQvLyBGb3JtYXQ6IGVuc3VyZSBlYWNoIHJlY29yZCBjb250YWlucyBhIG5hbWUsIGlkIGV0Yy5cblx0ZnVuY3Rpb24gZm9ybWF0SXRlbShvKSB7XG5cdFx0aWYgKG8uZXJyb3IpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIW8ubmFtZSkge1xuXHRcdFx0by5uYW1lID0gby50aXRsZSB8fCBvLm1lc3NhZ2U7XG5cdFx0fVxuXG5cdFx0aWYgKCFvLnBpY3R1cmUpIHtcblx0XHRcdG8ucGljdHVyZSA9IG8udGh1bWJuYWlsTGluaztcblx0XHR9XG5cblx0XHRpZiAoIW8udGh1bWJuYWlsKSB7XG5cdFx0XHRvLnRodW1ibmFpbCA9IG8udGh1bWJuYWlsTGluaztcblx0XHR9XG5cblx0XHRpZiAoby5taW1lVHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXInKSB7XG5cdFx0XHRvLnR5cGUgPSAnZm9sZGVyJztcblx0XHRcdG8uZmlsZXMgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjIvZmlsZXM/cT0lMjInICsgby5pZCArICclMjIraW4rcGFyZW50cyc7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRJbWFnZShpbWFnZSkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzb3VyY2U6IGltYWdlLnVybCxcblx0XHRcdHdpZHRoOiBpbWFnZS53aWR0aCxcblx0XHRcdGhlaWdodDogaW1hZ2UuaGVpZ2h0XG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdFBob3RvcyhvKSB7XG5cdFx0by5kYXRhID0gby5mZWVkLmVudHJ5Lm1hcChmb3JtYXRFbnRyeSk7XG5cdFx0ZGVsZXRlIG8uZmVlZDtcblx0fVxuXG5cdC8vIEdvb2dsZSBoYXMgYSBob3JyaWJsZSBKU09OIEFQSVxuXHRmdW5jdGlvbiBnRW50cnkobykge1xuXHRcdHBhZ2luZyhvKTtcblxuXHRcdGlmICgnZmVlZCcgaW4gbyAmJiAnZW50cnknIGluIG8uZmVlZCkge1xuXHRcdFx0by5kYXRhID0gby5mZWVkLmVudHJ5Lm1hcChmb3JtYXRFbnRyeSk7XG5cdFx0XHRkZWxldGUgby5mZWVkO1xuXHRcdH1cblxuXHRcdC8vIE9sZCBzdHlsZTogUGljYXNhLCBldGMuXG5cdFx0ZWxzZSBpZiAoJ2VudHJ5JyBpbiBvKSB7XG5cdFx0XHRyZXR1cm4gZm9ybWF0RW50cnkoby5lbnRyeSk7XG5cdFx0fVxuXG5cdFx0Ly8gTmV3IHN0eWxlOiBHb29nbGUgRHJpdmUgJiBQbHVzXG5cdFx0ZWxzZSBpZiAoJ2l0ZW1zJyBpbiBvKSB7XG5cdFx0XHRvLmRhdGEgPSBvLml0ZW1zLm1hcChmb3JtYXRJdGVtKTtcblx0XHRcdGRlbGV0ZSBvLml0ZW1zO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGZvcm1hdEl0ZW0obyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRQZXJzb24obykge1xuXHRcdG8ubmFtZSA9IG8uZGlzcGxheU5hbWUgfHwgby5uYW1lO1xuXHRcdG8ucGljdHVyZSA9IG8ucGljdHVyZSB8fCAoby5pbWFnZSA/IG8uaW1hZ2UudXJsIDogbnVsbCk7XG5cdFx0by50aHVtYm5haWwgPSBvLnBpY3R1cmU7XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRGcmllbmRzKG8sIGhlYWRlcnMsIHJlcSkge1xuXHRcdHBhZ2luZyhvKTtcblx0XHR2YXIgciA9IFtdO1xuXHRcdGlmICgnZmVlZCcgaW4gbyAmJiAnZW50cnknIGluIG8uZmVlZCkge1xuXHRcdFx0dmFyIHRva2VuID0gcmVxLnF1ZXJ5LmFjY2Vzc190b2tlbjtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgby5mZWVkLmVudHJ5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBhID0gby5mZWVkLmVudHJ5W2ldO1xuXG5cdFx0XHRcdGEuaWRcdD0gYS5pZC4kdDtcblx0XHRcdFx0YS5uYW1lXHQ9IGEudGl0bGUuJHQ7XG5cdFx0XHRcdGRlbGV0ZSBhLnRpdGxlO1xuXHRcdFx0XHRpZiAoYS5nZCRlbWFpbCkge1xuXHRcdFx0XHRcdGEuZW1haWxcdD0gKGEuZ2QkZW1haWwgJiYgYS5nZCRlbWFpbC5sZW5ndGggPiAwKSA/IGEuZ2QkZW1haWxbMF0uYWRkcmVzcyA6IG51bGw7XG5cdFx0XHRcdFx0YS5lbWFpbHMgPSBhLmdkJGVtYWlsO1xuXHRcdFx0XHRcdGRlbGV0ZSBhLmdkJGVtYWlsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGEudXBkYXRlZCkge1xuXHRcdFx0XHRcdGEudXBkYXRlZCA9IGEudXBkYXRlZC4kdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhLmxpbmspIHtcblxuXHRcdFx0XHRcdHZhciBwaWMgPSAoYS5saW5rLmxlbmd0aCA+IDApID8gYS5saW5rWzBdLmhyZWYgOiBudWxsO1xuXHRcdFx0XHRcdGlmIChwaWMgJiYgYS5saW5rWzBdLmdkJGV0YWcpIHtcblx0XHRcdFx0XHRcdHBpYyArPSAocGljLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnIDogJz8nKSArICdhY2Nlc3NfdG9rZW49JyArIHRva2VuO1xuXHRcdFx0XHRcdFx0YS5waWN0dXJlID0gcGljO1xuXHRcdFx0XHRcdFx0YS50aHVtYm5haWwgPSBwaWM7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZGVsZXRlIGEubGluaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhLmNhdGVnb3J5KSB7XG5cdFx0XHRcdFx0ZGVsZXRlIGEuY2F0ZWdvcnk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0by5kYXRhID0gby5mZWVkLmVudHJ5O1xuXHRcdFx0ZGVsZXRlIG8uZmVlZDtcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGEpIHtcblxuXHRcdHZhciBncm91cCA9IGEubWVkaWEkZ3JvdXA7XG5cdFx0dmFyIHBob3RvID0gZ3JvdXAubWVkaWEkY29udGVudC5sZW5ndGggPyBncm91cC5tZWRpYSRjb250ZW50WzBdIDoge307XG5cdFx0dmFyIG1lZGlhQ29udGVudCA9IGdyb3VwLm1lZGlhJGNvbnRlbnQgfHwgW107XG5cdFx0dmFyIG1lZGlhVGh1bWJuYWlsID0gZ3JvdXAubWVkaWEkdGh1bWJuYWlsIHx8IFtdO1xuXG5cdFx0dmFyIHBpY3R1cmVzID0gbWVkaWFDb250ZW50XG5cdFx0XHQuY29uY2F0KG1lZGlhVGh1bWJuYWlsKVxuXHRcdFx0Lm1hcChmb3JtYXRJbWFnZSlcblx0XHRcdC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdFx0cmV0dXJuIGEud2lkdGggLSBiLndpZHRoO1xuXHRcdFx0fSk7XG5cblx0XHR2YXIgaSA9IDA7XG5cdFx0dmFyIF9hO1xuXHRcdHZhciBwID0ge1xuXHRcdFx0aWQ6IGEuaWQuJHQsXG5cdFx0XHRuYW1lOiBhLnRpdGxlLiR0LFxuXHRcdFx0ZGVzY3JpcHRpb246IGEuc3VtbWFyeS4kdCxcblx0XHRcdHVwZGF0ZWRfdGltZTogYS51cGRhdGVkLiR0LFxuXHRcdFx0Y3JlYXRlZF90aW1lOiBhLnB1Ymxpc2hlZC4kdCxcblx0XHRcdHBpY3R1cmU6IHBob3RvID8gcGhvdG8udXJsIDogbnVsbCxcblx0XHRcdHBpY3R1cmVzOiBwaWN0dXJlcyxcblx0XHRcdGltYWdlczogW10sXG5cdFx0XHR0aHVtYm5haWw6IHBob3RvID8gcGhvdG8udXJsIDogbnVsbCxcblx0XHRcdHdpZHRoOiBwaG90by53aWR0aCxcblx0XHRcdGhlaWdodDogcGhvdG8uaGVpZ2h0XG5cdFx0fTtcblxuXHRcdC8vIEdldCBmZWVkL2NoaWxkcmVuXG5cdFx0aWYgKCdsaW5rJyBpbiBhKSB7XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgYS5saW5rLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBkID0gYS5saW5rW2ldO1xuXHRcdFx0XHRpZiAoZC5yZWwubWF0Y2goL1xcI2ZlZWQkLykpIHtcblx0XHRcdFx0XHRwLnVwbG9hZF9sb2NhdGlvbiA9IHAuZmlsZXMgPSBwLnBob3RvcyA9IGQuaHJlZjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEdldCBpbWFnZXMgb2YgZGlmZmVyZW50IHNjYWxlc1xuXHRcdGlmICgnY2F0ZWdvcnknIGluIGEgJiYgYS5jYXRlZ29yeS5sZW5ndGgpIHtcblx0XHRcdF9hID0gYS5jYXRlZ29yeTtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBfYS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoX2FbaV0uc2NoZW1lICYmIF9hW2ldLnNjaGVtZS5tYXRjaCgvXFwja2luZCQvKSkge1xuXHRcdFx0XHRcdHAudHlwZSA9IF9hW2ldLnRlcm0ucmVwbGFjZSgvXi4qP1xcIy8sICcnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEdldCBpbWFnZXMgb2YgZGlmZmVyZW50IHNjYWxlc1xuXHRcdGlmICgnbWVkaWEkdGh1bWJuYWlsJyBpbiBncm91cCAmJiBncm91cC5tZWRpYSR0aHVtYm5haWwubGVuZ3RoKSB7XG5cdFx0XHRfYSA9IGdyb3VwLm1lZGlhJHRodW1ibmFpbDtcblx0XHRcdHAudGh1bWJuYWlsID0gX2FbMF0udXJsO1xuXHRcdFx0cC5pbWFnZXMgPSBfYS5tYXAoZm9ybWF0SW1hZ2UpO1xuXHRcdH1cblxuXHRcdF9hID0gZ3JvdXAubWVkaWEkY29udGVudDtcblxuXHRcdGlmIChfYSAmJiBfYS5sZW5ndGgpIHtcblx0XHRcdHAuaW1hZ2VzLnB1c2goZm9ybWF0SW1hZ2UoX2FbMF0pKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcDtcblx0fVxuXG5cdGZ1bmN0aW9uIHBhZ2luZyhyZXMpIHtcblxuXHRcdC8vIENvbnRhY3RzIFYyXG5cdFx0aWYgKCdmZWVkJyBpbiByZXMgJiYgcmVzLmZlZWQub3BlblNlYXJjaCRpdGVtc1BlclBhZ2UpIHtcblx0XHRcdHZhciBsaW1pdCA9IHRvSW50KHJlcy5mZWVkLm9wZW5TZWFyY2gkaXRlbXNQZXJQYWdlLiR0KTtcblx0XHRcdHZhciBzdGFydCA9IHRvSW50KHJlcy5mZWVkLm9wZW5TZWFyY2gkc3RhcnRJbmRleC4kdCk7XG5cdFx0XHR2YXIgdG90YWwgPSB0b0ludChyZXMuZmVlZC5vcGVuU2VhcmNoJHRvdGFsUmVzdWx0cy4kdCk7XG5cblx0XHRcdGlmICgoc3RhcnQgKyBsaW1pdCkgPCB0b3RhbCkge1xuXHRcdFx0XHRyZXMucGFnaW5nID0ge1xuXHRcdFx0XHRcdG5leHQ6ICc/c3RhcnQ9JyArIChzdGFydCArIGxpbWl0KVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRlbHNlIGlmICgnbmV4dFBhZ2VUb2tlbicgaW4gcmVzKSB7XG5cdFx0XHRyZXMucGFnaW5nID0ge1xuXHRcdFx0XHRuZXh0OiAnP3BhZ2VUb2tlbj0nICsgcmVzLm5leHRQYWdlVG9rZW5cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ29uc3RydWN0IGEgbXVsdGlwYXJ0IG1lc3NhZ2Vcblx0ZnVuY3Rpb24gTXVsdGlwYXJ0KCkge1xuXG5cdFx0Ly8gSW50ZXJuYWwgYm9keVxuXHRcdHZhciBib2R5ID0gW107XG5cdFx0dmFyIGJvdW5kYXJ5ID0gKE1hdGgucmFuZG9tKCkgKiAxZTEwKS50b1N0cmluZygzMik7XG5cdFx0dmFyIGNvdW50ZXIgPSAwO1xuXHRcdHZhciBsaW5lQnJlYWsgPSAnXFxyXFxuJztcblx0XHR2YXIgZGVsaW0gPSBsaW5lQnJlYWsgKyAnLS0nICsgYm91bmRhcnk7XG5cdFx0dmFyIHJlYWR5ID0gZnVuY3Rpb24oKSB7fTtcblxuXHRcdHZhciBkYXRhVXJpID0gL15kYXRhXFw6KFteOyxdKyhcXDtjaGFyc2V0PVteOyxdKyk/KShcXDtiYXNlNjQpPywvaTtcblxuXHRcdC8vIEFkZCBmaWxlXG5cdFx0ZnVuY3Rpb24gYWRkRmlsZShpdGVtKSB7XG5cdFx0XHR2YXIgZnIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0ZnIub25sb2FkID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRhZGRDb250ZW50KGJ0b2EoZS50YXJnZXQucmVzdWx0KSwgaXRlbS50eXBlICsgbGluZUJyZWFrICsgJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6IGJhc2U2NCcpO1xuXHRcdFx0fTtcblxuXHRcdFx0ZnIucmVhZEFzQmluYXJ5U3RyaW5nKGl0ZW0pO1xuXHRcdH1cblxuXHRcdC8vIEFkZCBjb250ZW50XG5cdFx0ZnVuY3Rpb24gYWRkQ29udGVudChjb250ZW50LCB0eXBlKSB7XG5cdFx0XHRib2R5LnB1c2gobGluZUJyZWFrICsgJ0NvbnRlbnQtVHlwZTogJyArIHR5cGUgKyBsaW5lQnJlYWsgKyBsaW5lQnJlYWsgKyBjb250ZW50KTtcblx0XHRcdGNvdW50ZXItLTtcblx0XHRcdHJlYWR5KCk7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIG5ldyB0aGluZ3MgdG8gdGhlIG9iamVjdFxuXHRcdHRoaXMuYXBwZW5kID0gZnVuY3Rpb24oY29udGVudCwgdHlwZSkge1xuXG5cdFx0XHQvLyBEb2VzIHRoZSBjb250ZW50IGhhdmUgYW4gYXJyYXlcblx0XHRcdGlmICh0eXBlb2YgKGNvbnRlbnQpID09PSAnc3RyaW5nJyB8fCAhKCdsZW5ndGgnIGluIE9iamVjdChjb250ZW50KSkpIHtcblx0XHRcdFx0Ly8gQ29udmVydGkgdG8gbXVsdGlwbGVzXG5cdFx0XHRcdGNvbnRlbnQgPSBbY29udGVudF07XG5cdFx0XHR9XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKykge1xuXG5cdFx0XHRcdGNvdW50ZXIrKztcblxuXHRcdFx0XHR2YXIgaXRlbSA9IGNvbnRlbnRbaV07XG5cblx0XHRcdFx0Ly8gSXMgdGhpcyBhIGZpbGU/XG5cdFx0XHRcdC8vIEZpbGVzIGNhbiBiZSBlaXRoZXIgQmxvYnMgb3IgRmlsZSB0eXBlc1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0KHR5cGVvZiAoRmlsZSkgIT09ICd1bmRlZmluZWQnICYmIGl0ZW0gaW5zdGFuY2VvZiBGaWxlKSB8fFxuXHRcdFx0XHRcdCh0eXBlb2YgKEJsb2IpICE9PSAndW5kZWZpbmVkJyAmJiBpdGVtIGluc3RhbmNlb2YgQmxvYilcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Ly8gUmVhZCB0aGUgZmlsZSBpblxuXHRcdFx0XHRcdGFkZEZpbGUoaXRlbSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBEYXRhLVVSST9cblx0XHRcdFx0Ly8gRGF0YTpbPG1pbWUgdHlwZT5dWztjaGFyc2V0PTxjaGFyc2V0Pl1bO2Jhc2U2NF0sPGVuY29kZWQgZGF0YT5cblx0XHRcdFx0Ly8gL15kYXRhXFw6KFteOyxdKyhcXDtjaGFyc2V0PVteOyxdKyk/KShcXDtiYXNlNjQpPywvaVxuXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgKGl0ZW0pID09PSAnc3RyaW5nJyAmJiBpdGVtLm1hdGNoKGRhdGFVcmkpKSB7XG5cdFx0XHRcdFx0dmFyIG0gPSBpdGVtLm1hdGNoKGRhdGFVcmkpO1xuXHRcdFx0XHRcdGFkZENvbnRlbnQoaXRlbS5yZXBsYWNlKGRhdGFVcmksICcnKSwgbVsxXSArIGxpbmVCcmVhayArICdDb250ZW50LVRyYW5zZmVyLUVuY29kaW5nOiBiYXNlNjQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlZ3VsYXIgc3RyaW5nXG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGFkZENvbnRlbnQoaXRlbSwgdHlwZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dGhpcy5vbnJlYWR5ID0gZnVuY3Rpb24oZm4pIHtcblx0XHRcdHJlYWR5ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmIChjb3VudGVyID09PSAwKSB7XG5cdFx0XHRcdFx0Ly8gVHJpZ2dlciByZWFkeVxuXHRcdFx0XHRcdGJvZHkudW5zaGlmdCgnJyk7XG5cdFx0XHRcdFx0Ym9keS5wdXNoKCctLScpO1xuXHRcdFx0XHRcdGZuKGJvZHkuam9pbihkZWxpbSksIGJvdW5kYXJ5KTtcblx0XHRcdFx0XHRib2R5ID0gW107XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdHJlYWR5KCk7XG5cdFx0fTtcblx0fVxuXG5cdC8vIFVwbG9hZCB0byBEcml2ZVxuXHQvLyBJZiB0aGlzIGlzIFBVVCB0aGVuIG9ubHkgYXVnbWVudCB0aGUgZmlsZSB1cGxvYWRlZFxuXHQvLyBQVVQgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZHJpdmUvdjIvcmVmZXJlbmNlL2ZpbGVzL3VwZGF0ZVxuXHQvLyBQT1NUIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2RyaXZlL21hbmFnZS11cGxvYWRzXG5cdGZ1bmN0aW9uIHVwbG9hZERyaXZlKHAsIGNhbGxiYWNrKSB7XG5cblx0XHR2YXIgZGF0YSA9IHt9O1xuXG5cdFx0Ly8gVGVzdCBmb3IgRE9NIGVsZW1lbnRcblx0XHRpZiAocC5kYXRhICYmXG5cdFx0XHQodHlwZW9mIChIVE1MSW5wdXRFbGVtZW50KSAhPT0gJ3VuZGVmaW5lZCcgJiYgcC5kYXRhIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudClcblx0XHQpIHtcblx0XHRcdHAuZGF0YSA9IHtmaWxlOiBwLmRhdGF9O1xuXHRcdH1cblxuXHRcdGlmICghcC5kYXRhLm5hbWUgJiYgT2JqZWN0KE9iamVjdChwLmRhdGEuZmlsZSkuZmlsZXMpLmxlbmd0aCAmJiBwLm1ldGhvZCA9PT0gJ3Bvc3QnKSB7XG5cdFx0XHRwLmRhdGEubmFtZSA9IHAuZGF0YS5maWxlLmZpbGVzWzBdLm5hbWU7XG5cdFx0fVxuXG5cdFx0aWYgKHAubWV0aG9kID09PSAncG9zdCcpIHtcblx0XHRcdHAuZGF0YSA9IHtcblx0XHRcdFx0dGl0bGU6IHAuZGF0YS5uYW1lLFxuXHRcdFx0XHRwYXJlbnRzOiBbe2lkOiBwLmRhdGEucGFyZW50IHx8ICdyb290J31dLFxuXHRcdFx0XHRmaWxlOiBwLmRhdGEuZmlsZVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cblx0XHRcdC8vIE1ha2UgYSByZWZlcmVuY2Vcblx0XHRcdGRhdGEgPSBwLmRhdGE7XG5cdFx0XHRwLmRhdGEgPSB7fTtcblxuXHRcdFx0Ly8gQWRkIHRoZSBwYXJ0cyB0byBjaGFuZ2UgYXMgcmVxdWlyZWRcblx0XHRcdGlmIChkYXRhLnBhcmVudCkge1xuXHRcdFx0XHRwLmRhdGEucGFyZW50cyA9IFt7aWQ6IHAuZGF0YS5wYXJlbnQgfHwgJ3Jvb3QnfV07XG5cdFx0XHR9XG5cblx0XHRcdGlmIChkYXRhLmZpbGUpIHtcblx0XHRcdFx0cC5kYXRhLmZpbGUgPSBkYXRhLmZpbGU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChkYXRhLm5hbWUpIHtcblx0XHRcdFx0cC5kYXRhLnRpdGxlID0gZGF0YS5uYW1lO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEV4dHJhY3QgdGhlIGZpbGUsIGlmIGl0IGV4aXN0cyBmcm9tIHRoZSBkYXRhIG9iamVjdFxuXHRcdC8vIElmIHRoZSBGaWxlIGlzIGFuIElOUFVUIGVsZW1lbnQgbGV0cyBqdXN0IGNvbmNlcm4gb3Vyc2VsdmVzIHdpdGggdGhlIE5vZGVMaXN0XG5cdFx0dmFyIGZpbGU7XG5cdFx0aWYgKCdmaWxlJyBpbiBwLmRhdGEpIHtcblx0XHRcdGZpbGUgPSBwLmRhdGEuZmlsZTtcblx0XHRcdGRlbGV0ZSBwLmRhdGEuZmlsZTtcblxuXHRcdFx0aWYgKHR5cGVvZiAoZmlsZSkgPT09ICdvYmplY3QnICYmICdmaWxlcycgaW4gZmlsZSkge1xuXHRcdFx0XHQvLyBBc3NpZ24gdGhlIE5vZGVMaXN0XG5cdFx0XHRcdGZpbGUgPSBmaWxlLmZpbGVzO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWZpbGUgfHwgIWZpbGUubGVuZ3RoKSB7XG5cdFx0XHRcdGNhbGxiYWNrKHtcblx0XHRcdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRcdFx0Y29kZTogJ3JlcXVlc3RfaW52YWxpZCcsXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiAnVGhlcmUgd2VyZSBubyBmaWxlcyBhdHRhY2hlZCB3aXRoIHRoaXMgcmVxdWVzdCB0byB1cGxvYWQnXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0eXBlIHAuZGF0YS5taW1lVHlwZSA9IE9iamVjdChmaWxlWzBdKS50eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xuXG5cdFx0Ly8gQ29uc3RydWN0IGEgbXVsdGlwYXJ0IG1lc3NhZ2Vcblx0XHR2YXIgcGFydHMgPSBuZXcgTXVsdGlwYXJ0KCk7XG5cdFx0cGFydHMuYXBwZW5kKEpTT04uc3RyaW5naWZ5KHAuZGF0YSksICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cblx0XHQvLyBSZWFkIHRoZSBmaWxlIGludG8gYSAgYmFzZTY0IHN0cmluZy4uLiB5ZXAgYSBoYXNzbGUsIGkga25vd1xuXHRcdC8vIEZvcm1EYXRhIGRvZXNuJ3QgbGV0IHVzIGFzc2lnbiBvdXIgb3duIE11bHRpcGFydCBoZWFkZXJzIGFuZCBIVFRQIENvbnRlbnQtVHlwZVxuXHRcdC8vIEFsYXMgR29vZ2xlQXBpIG5lZWQgdGhlc2UgaW4gYSBwYXJ0aWN1bGFyIGZvcm1hdFxuXHRcdGlmIChmaWxlKSB7XG5cdFx0XHRwYXJ0cy5hcHBlbmQoZmlsZSk7XG5cdFx0fVxuXG5cdFx0cGFydHMub25yZWFkeShmdW5jdGlvbihib2R5LCBib3VuZGFyeSkge1xuXG5cdFx0XHRwLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gJ211bHRpcGFydC9yZWxhdGVkOyBib3VuZGFyeT1cIicgKyBib3VuZGFyeSArICdcIic7XG5cdFx0XHRwLmRhdGEgPSBib2R5O1xuXG5cdFx0XHRjYWxsYmFjaygndXBsb2FkL2RyaXZlL3YyL2ZpbGVzJyArIChkYXRhLmlkID8gJy8nICsgZGF0YS5pZCA6ICcnKSArICc/dXBsb2FkVHlwZT1tdWx0aXBhcnQnKTtcblx0XHR9KTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gdG9KU09OKHApIHtcblx0XHRpZiAodHlwZW9mIChwLmRhdGEpID09PSAnb2JqZWN0Jykge1xuXHRcdFx0Ly8gQ29udmVydCB0aGUgUE9TVCBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3Rcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHAuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHAuZGF0YSk7XG5cdFx0XHRcdHAuaGVhZGVyc1snY29udGVudC10eXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG5cdFx0XHR9XG5cdFx0XHRjYXRjaCAoZSkge31cblx0XHR9XG5cdH1cblxufSkoaGVsbG8pO1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHRoZWxsby5pbml0KHtcblxuXHRcdGluc3RhZ3JhbToge1xuXG5cdFx0XHRuYW1lOiAnSW5zdGFncmFtJyxcblxuXHRcdFx0b2F1dGg6IHtcblx0XHRcdFx0Ly8gU2VlOiBodHRwOi8vaW5zdGFncmFtLmNvbS9kZXZlbG9wZXIvYXV0aGVudGljYXRpb24vXG5cdFx0XHRcdHZlcnNpb246IDIsXG5cdFx0XHRcdGF1dGg6ICdodHRwczovL2luc3RhZ3JhbS5jb20vb2F1dGgvYXV0aG9yaXplLycsXG5cdFx0XHRcdGdyYW50OiAnaHR0cHM6Ly9hcGkuaW5zdGFncmFtLmNvbS9vYXV0aC9hY2Nlc3NfdG9rZW4nXG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZWZyZXNoIHRoZSBhY2Nlc3NfdG9rZW4gb25jZSBleHBpcmVkXG5cdFx0XHRyZWZyZXNoOiB0cnVlLFxuXG5cdFx0XHRzY29wZToge1xuXHRcdFx0XHRiYXNpYzogJ2Jhc2ljJyxcblx0XHRcdFx0cGhvdG9zOiAnJyxcblx0XHRcdFx0ZnJpZW5kczogJ3JlbGF0aW9uc2hpcHMnLFxuXHRcdFx0XHRwdWJsaXNoOiAnbGlrZXMgY29tbWVudHMnLFxuXHRcdFx0XHRlbWFpbDogJycsXG5cdFx0XHRcdHNoYXJlOiAnJyxcblx0XHRcdFx0cHVibGlzaF9maWxlczogJycsXG5cdFx0XHRcdGZpbGVzOiAnJyxcblx0XHRcdFx0dmlkZW9zOiAnJyxcblx0XHRcdFx0b2ZmbGluZV9hY2Nlc3M6ICcnXG5cdFx0XHR9LFxuXG5cdFx0XHRzY29wZV9kZWxpbTogJyAnLFxuXG5cdFx0XHRiYXNlOiAnaHR0cHM6Ly9hcGkuaW5zdGFncmFtLmNvbS92MS8nLFxuXG5cdFx0XHRnZXQ6IHtcblx0XHRcdFx0bWU6ICd1c2Vycy9zZWxmJyxcblx0XHRcdFx0J21lL2ZlZWQnOiAndXNlcnMvc2VsZi9mZWVkP2NvdW50PUB7bGltaXR8MTAwfScsXG5cdFx0XHRcdCdtZS9waG90b3MnOiAndXNlcnMvc2VsZi9tZWRpYS9yZWNlbnQ/bWluX2lkPTAmY291bnQ9QHtsaW1pdHwxMDB9Jyxcblx0XHRcdFx0J21lL2ZyaWVuZHMnOiAndXNlcnMvc2VsZi9mb2xsb3dzP2NvdW50PUB7bGltaXR8MTAwfScsXG5cdFx0XHRcdCdtZS9mb2xsb3dpbmcnOiAndXNlcnMvc2VsZi9mb2xsb3dzP2NvdW50PUB7bGltaXR8MTAwfScsXG5cdFx0XHRcdCdtZS9mb2xsb3dlcnMnOiAndXNlcnMvc2VsZi9mb2xsb3dlZC1ieT9jb3VudD1Ae2xpbWl0fDEwMH0nLFxuXHRcdFx0XHQnZnJpZW5kL3Bob3Rvcyc6ICd1c2Vycy9Ae2lkfS9tZWRpYS9yZWNlbnQ/bWluX2lkPTAmY291bnQ9QHtsaW1pdHwxMDB9J1xuXHRcdFx0fSxcblxuXHRcdFx0cG9zdDoge1xuXHRcdFx0XHQnbWUvbGlrZSc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0dmFyIGlkID0gcC5kYXRhLmlkO1xuXHRcdFx0XHRcdHAuZGF0YSA9IHt9O1xuXHRcdFx0XHRcdGNhbGxiYWNrKCdtZWRpYS8nICsgaWQgKyAnL2xpa2VzJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGRlbDoge1xuXHRcdFx0XHQnbWUvbGlrZSc6ICdtZWRpYS9Ae2lkfS9saWtlcydcblx0XHRcdH0sXG5cblx0XHRcdHdyYXA6IHtcblx0XHRcdFx0bWU6IGZ1bmN0aW9uKG8pIHtcblxuXHRcdFx0XHRcdGZvcm1hdEVycm9yKG8pO1xuXG5cdFx0XHRcdFx0aWYgKCdkYXRhJyBpbiBvKSB7XG5cdFx0XHRcdFx0XHRvLmlkID0gby5kYXRhLmlkO1xuXHRcdFx0XHRcdFx0by50aHVtYm5haWwgPSBvLmRhdGEucHJvZmlsZV9waWN0dXJlO1xuXHRcdFx0XHRcdFx0by5uYW1lID0gby5kYXRhLmZ1bGxfbmFtZSB8fCBvLmRhdGEudXNlcm5hbWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0J21lL2ZyaWVuZHMnOiBmb3JtYXRGcmllbmRzLFxuXHRcdFx0XHQnbWUvZm9sbG93aW5nJzogZm9ybWF0RnJpZW5kcyxcblx0XHRcdFx0J21lL2ZvbGxvd2Vycyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9waG90b3MnOiBmdW5jdGlvbihvKSB7XG5cblx0XHRcdFx0XHRmb3JtYXRFcnJvcihvKTtcblx0XHRcdFx0XHRwYWdpbmcobyk7XG5cblx0XHRcdFx0XHRpZiAoJ2RhdGEnIGluIG8pIHtcblx0XHRcdFx0XHRcdG8uZGF0YSA9IG8uZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC50eXBlID09PSAnaW1hZ2UnO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdG8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdFx0ZC5uYW1lID0gZC5jYXB0aW9uID8gZC5jYXB0aW9uLnRleHQgOiBudWxsO1xuXHRcdFx0XHRcdFx0XHRkLnRodW1ibmFpbCA9IGQuaW1hZ2VzLnRodW1ibmFpbC51cmw7XG5cdFx0XHRcdFx0XHRcdGQucGljdHVyZSA9IGQuaW1hZ2VzLnN0YW5kYXJkX3Jlc29sdXRpb24udXJsO1xuXHRcdFx0XHRcdFx0XHRkLnBpY3R1cmVzID0gT2JqZWN0LmtleXMoZC5pbWFnZXMpXG5cdFx0XHRcdFx0XHRcdFx0Lm1hcChmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBpbWFnZSA9IGQuaW1hZ2VzW2tleV07XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZm9ybWF0SW1hZ2UoaW1hZ2UpO1xuXHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0LnNvcnQoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGEud2lkdGggLSBiLndpZHRoO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0J2RlZmF1bHQnOiBmdW5jdGlvbihvKSB7XG5cdFx0XHRcdFx0byA9IGZvcm1hdEVycm9yKG8pO1xuXHRcdFx0XHRcdHBhZ2luZyhvKTtcblx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0Ly8gSW5zdGFncmFtIGRvZXMgbm90IHJldHVybiBhbnkgQ09SUyBIZWFkZXJzXG5cdFx0XHQvLyBTbyBiZXNpZGVzIEpTT05QIHdlJ3JlIHN0dWNrIHdpdGggcHJveHlcblx0XHRcdHhocjogZnVuY3Rpb24ocCwgcXMpIHtcblxuXHRcdFx0XHR2YXIgbWV0aG9kID0gcC5tZXRob2Q7XG5cdFx0XHRcdHZhciBwcm94eSA9IG1ldGhvZCAhPT0gJ2dldCc7XG5cblx0XHRcdFx0aWYgKHByb3h5KSB7XG5cblx0XHRcdFx0XHRpZiAoKG1ldGhvZCA9PT0gJ3Bvc3QnIHx8IG1ldGhvZCA9PT0gJ3B1dCcpICYmIHAucXVlcnkuYWNjZXNzX3Rva2VuKSB7XG5cdFx0XHRcdFx0XHRwLmRhdGEuYWNjZXNzX3Rva2VuID0gcC5xdWVyeS5hY2Nlc3NfdG9rZW47XG5cdFx0XHRcdFx0XHRkZWxldGUgcC5xdWVyeS5hY2Nlc3NfdG9rZW47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTm8gYWNjZXNzIGNvbnRyb2wgaGVhZGVyc1xuXHRcdFx0XHRcdC8vIFVzZSB0aGUgcHJveHkgaW5zdGVhZFxuXHRcdFx0XHRcdHAucHJveHkgPSBwcm94eTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBwcm94eTtcblx0XHRcdH0sXG5cblx0XHRcdC8vIE5vIGZvcm1cblx0XHRcdGZvcm06IGZhbHNlXG5cdFx0fVxuXHR9KTtcblxuXHRmdW5jdGlvbiBmb3JtYXRJbWFnZShpbWFnZSkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzb3VyY2U6IGltYWdlLnVybCxcblx0XHRcdHdpZHRoOiBpbWFnZS53aWR0aCxcblx0XHRcdGhlaWdodDogaW1hZ2UuaGVpZ2h0XG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdEVycm9yKG8pIHtcblx0XHRpZiAodHlwZW9mIG8gPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRcdGNvZGU6ICdpbnZhbGlkX3JlcXVlc3QnLFxuXHRcdFx0XHRcdG1lc3NhZ2U6IG9cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAobyAmJiAnbWV0YScgaW4gbyAmJiAnZXJyb3JfdHlwZScgaW4gby5tZXRhKSB7XG5cdFx0XHRvLmVycm9yID0ge1xuXHRcdFx0XHRjb2RlOiBvLm1ldGEuZXJyb3JfdHlwZSxcblx0XHRcdFx0bWVzc2FnZTogby5tZXRhLmVycm9yX21lc3NhZ2Vcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRGcmllbmRzKG8pIHtcblx0XHRwYWdpbmcobyk7XG5cdFx0aWYgKG8gJiYgJ2RhdGEnIGluIG8pIHtcblx0XHRcdG8uZGF0YS5mb3JFYWNoKGZvcm1hdEZyaWVuZCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRGcmllbmQobykge1xuXHRcdGlmIChvLmlkKSB7XG5cdFx0XHRvLnRodW1ibmFpbCA9IG8ucHJvZmlsZV9waWN0dXJlO1xuXHRcdFx0by5uYW1lID0gby5mdWxsX25hbWUgfHwgby51c2VybmFtZTtcblx0XHR9XG5cdH1cblxuXHQvLyBTZWU6IGh0dHA6Ly9pbnN0YWdyYW0uY29tL2RldmVsb3Blci9lbmRwb2ludHMvXG5cdGZ1bmN0aW9uIHBhZ2luZyhyZXMpIHtcblx0XHRpZiAoJ3BhZ2luYXRpb24nIGluIHJlcykge1xuXHRcdFx0cmVzLnBhZ2luZyA9IHtcblx0XHRcdFx0bmV4dDogcmVzLnBhZ2luYXRpb24ubmV4dF91cmxcblx0XHRcdH07XG5cdFx0XHRkZWxldGUgcmVzLnBhZ2luYXRpb247XG5cdFx0fVxuXHR9XG5cbn0pKGhlbGxvKTtcblxuKGZ1bmN0aW9uKGhlbGxvKSB7XG5cblx0aGVsbG8uaW5pdCh7XG5cblx0XHRqb2lubWU6IHtcblxuXHRcdFx0bmFtZTogJ2pvaW4ubWUnLFxuXG5cdFx0XHRvYXV0aDoge1xuXHRcdFx0XHR2ZXJzaW9uOiAyLFxuXHRcdFx0XHRhdXRoOiAnaHR0cHM6Ly9zZWN1cmUuam9pbi5tZS9hcGkvcHVibGljL3YxL2F1dGgvb2F1dGgyJyxcblx0XHRcdFx0Z3JhbnQ6ICdodHRwczovL3NlY3VyZS5qb2luLm1lL2FwaS9wdWJsaWMvdjEvYXV0aC9vYXV0aDInXG5cdFx0XHR9LFxuXG5cdFx0XHRyZWZyZXNoOiBmYWxzZSxcblxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0YmFzaWM6ICd1c2VyX2luZm8nLFxuXHRcdFx0XHR1c2VyOiAndXNlcl9pbmZvJyxcblx0XHRcdFx0c2NoZWR1bGVyOiAnc2NoZWR1bGVyJyxcblx0XHRcdFx0c3RhcnQ6ICdzdGFydF9tZWV0aW5nJyxcblx0XHRcdFx0ZW1haWw6ICcnLFxuXHRcdFx0XHRmcmllbmRzOiAnJyxcblx0XHRcdFx0c2hhcmU6ICcnLFxuXHRcdFx0XHRwdWJsaXNoOiAnJyxcblx0XHRcdFx0cGhvdG9zOiAnJyxcblx0XHRcdFx0cHVibGlzaF9maWxlczogJycsXG5cdFx0XHRcdGZpbGVzOiAnJyxcblx0XHRcdFx0dmlkZW9zOiAnJyxcblx0XHRcdFx0b2ZmbGluZV9hY2Nlc3M6ICcnXG5cdFx0XHR9LFxuXG5cdFx0XHRzY29wZV9kZWxpbTogJyAnLFxuXG5cdFx0XHRsb2dpbjogZnVuY3Rpb24ocCkge1xuXHRcdFx0XHRwLm9wdGlvbnMucG9wdXAud2lkdGggPSA0MDA7XG5cdFx0XHRcdHAub3B0aW9ucy5wb3B1cC5oZWlnaHQgPSA3MDA7XG5cdFx0XHR9LFxuXG5cdFx0XHRiYXNlOiAnaHR0cHM6Ly9hcGkuam9pbi5tZS92MS8nLFxuXG5cdFx0XHRnZXQ6IHtcblx0XHRcdFx0bWU6ICd1c2VyJyxcblx0XHRcdFx0bWVldGluZ3M6ICdtZWV0aW5ncycsXG5cdFx0XHRcdCdtZWV0aW5ncy9pbmZvJzogJ21lZXRpbmdzL0B7aWR9J1xuXHRcdFx0fSxcblxuXHRcdFx0cG9zdDoge1xuXHRcdFx0XHQnbWVldGluZ3Mvc3RhcnQvYWRob2MnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCdtZWV0aW5ncy9zdGFydCcpO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdCdtZWV0aW5ncy9zdGFydC9zY2hlZHVsZWQnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdHZhciBtZWV0aW5nSWQgPSBwLmRhdGEubWVldGluZ0lkO1xuXHRcdFx0XHRcdHAuZGF0YSA9IHt9O1xuXHRcdFx0XHRcdGNhbGxiYWNrKCdtZWV0aW5ncy8nICsgbWVldGluZ0lkICsgJy9zdGFydCcpO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdCdtZWV0aW5ncy9zY2hlZHVsZSc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soJ21lZXRpbmdzJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdHBhdGNoOiB7XG5cdFx0XHRcdCdtZWV0aW5ncy91cGRhdGUnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCdtZWV0aW5ncy8nICsgcC5kYXRhLm1lZXRpbmdJZCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGRlbDoge1xuXHRcdFx0XHQnbWVldGluZ3MvZGVsZXRlJzogJ21lZXRpbmdzL0B7aWR9J1xuXHRcdFx0fSxcblxuXHRcdFx0d3JhcDoge1xuXHRcdFx0XHRtZTogZnVuY3Rpb24obywgaGVhZGVycykge1xuXHRcdFx0XHRcdGZvcm1hdEVycm9yKG8sIGhlYWRlcnMpO1xuXG5cdFx0XHRcdFx0aWYgKCFvLmVtYWlsKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvLm5hbWUgPSBvLmZ1bGxOYW1lO1xuXHRcdFx0XHRcdG8uZmlyc3RfbmFtZSA9IG8ubmFtZS5zcGxpdCgnICcpWzBdO1xuXHRcdFx0XHRcdG8ubGFzdF9uYW1lID0gby5uYW1lLnNwbGl0KCcgJylbMV07XG5cdFx0XHRcdFx0by5pZCA9IG8uZW1haWw7XG5cblx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnZGVmYXVsdCc6IGZ1bmN0aW9uKG8sIGhlYWRlcnMpIHtcblx0XHRcdFx0XHRmb3JtYXRFcnJvcihvLCBoZWFkZXJzKTtcblxuXHRcdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHR4aHI6IGZvcm1hdFJlcXVlc3RcblxuXHRcdH1cblx0fSk7XG5cblx0ZnVuY3Rpb24gZm9ybWF0RXJyb3IobywgaGVhZGVycykge1xuXHRcdHZhciBlcnJvckNvZGU7XG5cdFx0dmFyIG1lc3NhZ2U7XG5cdFx0dmFyIGRldGFpbHM7XG5cblx0XHRpZiAobyAmJiAoJ01lc3NhZ2UnIGluIG8pKSB7XG5cdFx0XHRtZXNzYWdlID0gby5NZXNzYWdlO1xuXHRcdFx0ZGVsZXRlIG8uTWVzc2FnZTtcblxuXHRcdFx0aWYgKCdFcnJvckNvZGUnIGluIG8pIHtcblx0XHRcdFx0ZXJyb3JDb2RlID0gby5FcnJvckNvZGU7XG5cdFx0XHRcdGRlbGV0ZSBvLkVycm9yQ29kZTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRlcnJvckNvZGUgPSBnZXRFcnJvckNvZGUoaGVhZGVycyk7XG5cdFx0XHR9XG5cblx0XHRcdG8uZXJyb3IgPSB7XG5cdFx0XHRcdGNvZGU6IGVycm9yQ29kZSxcblx0XHRcdFx0bWVzc2FnZTogbWVzc2FnZSxcblx0XHRcdFx0ZGV0YWlsczogb1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdFJlcXVlc3QocCwgcXMpIHtcblx0XHQvLyBNb3ZlIHRoZSBhY2Nlc3MgdG9rZW4gZnJvbSB0aGUgcmVxdWVzdCBib2R5IHRvIHRoZSByZXF1ZXN0IGhlYWRlclxuXHRcdHZhciB0b2tlbiA9IHFzLmFjY2Vzc190b2tlbjtcblx0XHRkZWxldGUgcXMuYWNjZXNzX3Rva2VuO1xuXHRcdHAuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgdG9rZW47XG5cblx0XHQvLyBGb3JtYXQgbm9uLWdldCByZXF1ZXN0cyB0byBpbmRpY2F0ZSBqc29uIGJvZHlcblx0XHRpZiAocC5tZXRob2QgIT09ICdnZXQnICYmIHAuZGF0YSkge1xuXHRcdFx0cC5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblx0XHRcdGlmICh0eXBlb2YgKHAuZGF0YSkgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdHAuZGF0YSA9IEpTT04uc3RyaW5naWZ5KHAuZGF0YSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHAubWV0aG9kID09PSAncHV0Jykge1xuXHRcdFx0cC5tZXRob2QgPSAncGF0Y2gnO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RXJyb3JDb2RlKGhlYWRlcnMpIHtcblx0XHRzd2l0Y2ggKGhlYWRlcnMuc3RhdHVzQ29kZSkge1xuXHRcdFx0Y2FzZSA0MDA6XG5cdFx0XHRcdHJldHVybiAnaW52YWxpZF9yZXF1ZXN0Jztcblx0XHRcdGNhc2UgNDAzOlxuXHRcdFx0XHRyZXR1cm4gJ3N0YWxlX3Rva2VuJztcblx0XHRcdGNhc2UgNDAxOlxuXHRcdFx0XHRyZXR1cm4gJ2ludmFsaWRfdG9rZW4nO1xuXHRcdFx0Y2FzZSA1MDA6XG5cdFx0XHRcdHJldHVybiAnc2VydmVyX2Vycm9yJztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiAnc2VydmVyX2Vycm9yJztcblx0XHR9XG5cdH1cblxufShoZWxsbykpO1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHRoZWxsby5pbml0KHtcblxuXHRcdGxpbmtlZGluOiB7XG5cblx0XHRcdG9hdXRoOiB7XG5cdFx0XHRcdHZlcnNpb246IDIsXG5cdFx0XHRcdHJlc3BvbnNlX3R5cGU6ICdjb2RlJyxcblx0XHRcdFx0YXV0aDogJ2h0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS91YXMvb2F1dGgyL2F1dGhvcml6YXRpb24nLFxuXHRcdFx0XHRncmFudDogJ2h0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS91YXMvb2F1dGgyL2FjY2Vzc1Rva2VuJ1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVmcmVzaCB0aGUgYWNjZXNzX3Rva2VuIG9uY2UgZXhwaXJlZFxuXHRcdFx0cmVmcmVzaDogdHJ1ZSxcblxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0YmFzaWM6ICdyX2Jhc2ljcHJvZmlsZScsXG5cdFx0XHRcdGVtYWlsOiAncl9lbWFpbGFkZHJlc3MnLFxuXHRcdFx0XHRmaWxlczogJycsXG5cdFx0XHRcdGZyaWVuZHM6ICcnLFxuXHRcdFx0XHRwaG90b3M6ICcnLFxuXHRcdFx0XHRwdWJsaXNoOiAnd19zaGFyZScsXG5cdFx0XHRcdHB1Ymxpc2hfZmlsZXM6ICd3X3NoYXJlJyxcblx0XHRcdFx0c2hhcmU6ICcnLFxuXHRcdFx0XHR2aWRlb3M6ICcnLFxuXHRcdFx0XHRvZmZsaW5lX2FjY2VzczogJydcblx0XHRcdH0sXG5cdFx0XHRzY29wZV9kZWxpbTogJyAnLFxuXG5cdFx0XHRiYXNlOiAnaHR0cHM6Ly9hcGkubGlua2VkaW4uY29tL3YxLycsXG5cblx0XHRcdGdldDoge1xuXHRcdFx0XHRtZTogJ3Blb3BsZS9+OihwaWN0dXJlLXVybCxmaXJzdC1uYW1lLGxhc3QtbmFtZSxpZCxmb3JtYXR0ZWQtbmFtZSxlbWFpbC1hZGRyZXNzKScsXG5cblx0XHRcdFx0Ly8gU2VlOiBodHRwOi8vZGV2ZWxvcGVyLmxpbmtlZGluLmNvbS9kb2N1bWVudHMvZ2V0LW5ldHdvcmstdXBkYXRlcy1hbmQtc3RhdGlzdGljcy1hcGlcblx0XHRcdFx0J21lL3NoYXJlJzogJ3Blb3BsZS9+L25ldHdvcmsvdXBkYXRlcz9jb3VudD1Ae2xpbWl0fDI1MH0nXG5cdFx0XHR9LFxuXG5cdFx0XHRwb3N0OiB7XG5cblx0XHRcdFx0Ly8gU2VlOiBodHRwczovL2RldmVsb3Blci5saW5rZWRpbi5jb20vZG9jdW1lbnRzL2FwaS1yZXF1ZXN0cy1qc29uXG5cdFx0XHRcdCdtZS9zaGFyZSc6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHRcdFx0XHR2aXNpYmlsaXR5OiB7XG5cdFx0XHRcdFx0XHRcdGNvZGU6ICdhbnlvbmUnXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdGlmIChwLmRhdGEuaWQpIHtcblxuXHRcdFx0XHRcdFx0ZGF0YS5hdHRyaWJ1dGlvbiA9IHtcblx0XHRcdFx0XHRcdFx0c2hhcmU6IHtcblx0XHRcdFx0XHRcdFx0XHRpZDogcC5kYXRhLmlkXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRkYXRhLmNvbW1lbnQgPSBwLmRhdGEubWVzc2FnZTtcblx0XHRcdFx0XHRcdGlmIChwLmRhdGEucGljdHVyZSAmJiBwLmRhdGEubGluaykge1xuXHRcdFx0XHRcdFx0XHRkYXRhLmNvbnRlbnQgPSB7XG5cdFx0XHRcdFx0XHRcdFx0J3N1Ym1pdHRlZC11cmwnOiBwLmRhdGEubGluayxcblx0XHRcdFx0XHRcdFx0XHQnc3VibWl0dGVkLWltYWdlLXVybCc6IHAuZGF0YS5waWN0dXJlXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cC5kYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cblx0XHRcdFx0XHRjYWxsYmFjaygncGVvcGxlL34vc2hhcmVzP2Zvcm1hdD1qc29uJyk7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0J21lL2xpa2UnOiBsaWtlXG5cdFx0XHR9LFxuXG5cdFx0XHRkZWw6e1xuXHRcdFx0XHQnbWUvbGlrZSc6IGxpa2Vcblx0XHRcdH0sXG5cblx0XHRcdHdyYXA6IHtcblx0XHRcdFx0bWU6IGZ1bmN0aW9uKG8pIHtcblx0XHRcdFx0XHRmb3JtYXRFcnJvcihvKTtcblx0XHRcdFx0XHRmb3JtYXRVc2VyKG8pO1xuXHRcdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdCdtZS9mcmllbmRzJzogZm9ybWF0RnJpZW5kcyxcblx0XHRcdFx0J21lL2ZvbGxvd2luZyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLFxuXHRcdFx0XHQnbWUvc2hhcmUnOiBmdW5jdGlvbihvKSB7XG5cdFx0XHRcdFx0Zm9ybWF0RXJyb3Iobyk7XG5cdFx0XHRcdFx0cGFnaW5nKG8pO1xuXHRcdFx0XHRcdGlmIChvLnZhbHVlcykge1xuXHRcdFx0XHRcdFx0by5kYXRhID0gby52YWx1ZXMubWFwKGZvcm1hdFVzZXIpO1xuXHRcdFx0XHRcdFx0by5kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRcdFx0XHRpdGVtLm1lc3NhZ2UgPSBpdGVtLmhlYWRsaW5lO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGRlbGV0ZSBvLnZhbHVlcztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnZGVmYXVsdCc6IGZ1bmN0aW9uKG8sIGhlYWRlcnMpIHtcblx0XHRcdFx0XHRmb3JtYXRFcnJvcihvKTtcblx0XHRcdFx0XHRlbXB0eShvLCBoZWFkZXJzKTtcblx0XHRcdFx0XHRwYWdpbmcobyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGpzb25wOiBmdW5jdGlvbihwLCBxcykge1xuXHRcdFx0XHRmb3JtYXRRdWVyeShxcyk7XG5cdFx0XHRcdGlmIChwLm1ldGhvZCA9PT0gJ2dldCcpIHtcblx0XHRcdFx0XHRxcy5mb3JtYXQgPSAnanNvbnAnO1xuXHRcdFx0XHRcdHFzWydlcnJvci1jYWxsYmFjayddID0gcC5jYWxsYmFja0lEO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHR4aHI6IGZ1bmN0aW9uKHAsIHFzKSB7XG5cdFx0XHRcdGlmIChwLm1ldGhvZCAhPT0gJ2dldCcpIHtcblx0XHRcdFx0XHRmb3JtYXRRdWVyeShxcyk7XG5cdFx0XHRcdFx0cC5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblxuXHRcdFx0XHRcdC8vIE5vdGU6IHgtbGktZm9ybWF0IGVuc3VyZXMgZXJyb3IgcmVzcG9uc2VzIGFyZSBub3QgcmV0dXJuZWQgaW4gWE1MXG5cdFx0XHRcdFx0cC5oZWFkZXJzWyd4LWxpLWZvcm1hdCddID0gJ2pzb24nO1xuXHRcdFx0XHRcdHAucHJveHkgPSB0cnVlO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0ZnVuY3Rpb24gZm9ybWF0RXJyb3Iobykge1xuXHRcdGlmIChvICYmICdlcnJvckNvZGUnIGluIG8pIHtcblx0XHRcdG8uZXJyb3IgPSB7XG5cdFx0XHRcdGNvZGU6IG8uc3RhdHVzLFxuXHRcdFx0XHRtZXNzYWdlOiBvLm1lc3NhZ2Vcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7XG5cdFx0aWYgKG8uZXJyb3IpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRvLmZpcnN0X25hbWUgPSBvLmZpcnN0TmFtZTtcblx0XHRvLmxhc3RfbmFtZSA9IG8ubGFzdE5hbWU7XG5cdFx0by5uYW1lID0gby5mb3JtYXR0ZWROYW1lIHx8IChvLmZpcnN0X25hbWUgKyAnICcgKyBvLmxhc3RfbmFtZSk7XG5cdFx0by50aHVtYm5haWwgPSBvLnBpY3R1cmVVcmw7XG5cdFx0by5lbWFpbCA9IG8uZW1haWxBZGRyZXNzO1xuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvKSB7XG5cdFx0Zm9ybWF0RXJyb3Iobyk7XG5cdFx0cGFnaW5nKG8pO1xuXHRcdGlmIChvLnZhbHVlcykge1xuXHRcdFx0by5kYXRhID0gby52YWx1ZXMubWFwKGZvcm1hdFVzZXIpO1xuXHRcdFx0ZGVsZXRlIG8udmFsdWVzO1xuXHRcdH1cblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gcGFnaW5nKHJlcykge1xuXHRcdGlmICgnX2NvdW50JyBpbiByZXMgJiYgJ19zdGFydCcgaW4gcmVzICYmIChyZXMuX2NvdW50ICsgcmVzLl9zdGFydCkgPCByZXMuX3RvdGFsKSB7XG5cdFx0XHRyZXMucGFnaW5nID0ge1xuXHRcdFx0XHRuZXh0OiAnP3N0YXJ0PScgKyAocmVzLl9zdGFydCArIHJlcy5fY291bnQpICsgJyZjb3VudD0nICsgcmVzLl9jb3VudFxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBlbXB0eShvLCBoZWFkZXJzKSB7XG5cdFx0aWYgKEpTT04uc3RyaW5naWZ5KG8pID09PSAne30nICYmIGhlYWRlcnMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7XG5cdFx0XHRvLnN1Y2Nlc3MgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdFF1ZXJ5KHFzKSB7XG5cdFx0Ly8gTGlua2VkSW4gc2lnbnMgcmVxdWVzdHMgd2l0aCB0aGUgcGFyYW1ldGVyICdvYXV0aDJfYWNjZXNzX3Rva2VuJ1xuXHRcdC8vIC4uLiB5ZWFoIGFub3RoZXIgb25lIHdobyB0aGlua3MgdGhleSBzaG91bGQgYmUgZGlmZmVyZW50IVxuXHRcdGlmIChxcy5hY2Nlc3NfdG9rZW4pIHtcblx0XHRcdHFzLm9hdXRoMl9hY2Nlc3NfdG9rZW4gPSBxcy5hY2Nlc3NfdG9rZW47XG5cdFx0XHRkZWxldGUgcXMuYWNjZXNzX3Rva2VuO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGxpa2UocCwgY2FsbGJhY2spIHtcblx0XHRwLmhlYWRlcnNbJ3gtbGktZm9ybWF0J10gPSAnanNvbic7XG5cdFx0dmFyIGlkID0gcC5kYXRhLmlkO1xuXHRcdHAuZGF0YSA9IChwLm1ldGhvZCAhPT0gJ2RlbGV0ZScpLnRvU3RyaW5nKCk7XG5cdFx0cC5tZXRob2QgPSAncHV0Jztcblx0XHRjYWxsYmFjaygncGVvcGxlL34vbmV0d29yay91cGRhdGVzL2tleT0nICsgaWQgKyAnL2lzLWxpa2VkJyk7XG5cdH1cblxufSkoaGVsbG8pO1xuXG4vLyBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVycy5zb3VuZGNsb3VkLmNvbS9kb2NzL2FwaS9yZWZlcmVuY2VcbihmdW5jdGlvbihoZWxsbykge1xuXG5cdGhlbGxvLmluaXQoe1xuXG5cdFx0c291bmRjbG91ZDoge1xuXHRcdFx0bmFtZTogJ1NvdW5kQ2xvdWQnLFxuXG5cdFx0XHRvYXV0aDoge1xuXHRcdFx0XHR2ZXJzaW9uOiAyLFxuXHRcdFx0XHRhdXRoOiAnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9jb25uZWN0Jyxcblx0XHRcdFx0Z3JhbnQ6ICdodHRwczovL3NvdW5kY2xvdWQuY29tL29hdXRoMi90b2tlbidcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlcXVlc3QgcGF0aCB0cmFuc2xhdGVkXG5cdFx0XHRiYXNlOiAnaHR0cHM6Ly9hcGkuc291bmRjbG91ZC5jb20vJyxcblx0XHRcdGdldDoge1xuXHRcdFx0XHRtZTogJ21lLmpzb24nLFxuXG5cdFx0XHRcdC8vIEh0dHA6Ly9kZXZlbG9wZXJzLnNvdW5kY2xvdWQuY29tL2RvY3MvYXBpL3JlZmVyZW5jZSNtZVxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6ICdtZS9mb2xsb3dpbmdzLmpzb24nLFxuXHRcdFx0XHQnbWUvZm9sbG93ZXJzJzogJ21lL2ZvbGxvd2Vycy5qc29uJyxcblx0XHRcdFx0J21lL2ZvbGxvd2luZyc6ICdtZS9mb2xsb3dpbmdzLmpzb24nLFxuXG5cdFx0XHRcdC8vIFNlZTogaHR0cDovL2RldmVsb3BlcnMuc291bmRjbG91ZC5jb20vZG9jcy9hcGkvcmVmZXJlbmNlI2FjdGl2aXRpZXNcblx0XHRcdFx0J2RlZmF1bHQnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXG5cdFx0XHRcdFx0Ly8gSW5jbHVkZSAnLmpzb24gYXQgdGhlIGVuZCBvZiBlYWNoIHJlcXVlc3QnXG5cdFx0XHRcdFx0Y2FsbGJhY2socC5wYXRoICsgJy5qc29uJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlc3BvbnNlIGhhbmRsZXJzXG5cdFx0XHR3cmFwOiB7XG5cdFx0XHRcdG1lOiBmdW5jdGlvbihvKSB7XG5cdFx0XHRcdFx0Zm9ybWF0VXNlcihvKTtcblx0XHRcdFx0XHRyZXR1cm4gbztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnZGVmYXVsdCc6IGZ1bmN0aW9uKG8pIHtcblx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShvKSkge1xuXHRcdFx0XHRcdFx0byA9IHtcblx0XHRcdFx0XHRcdFx0ZGF0YTogby5tYXAoZm9ybWF0VXNlcilcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cGFnaW5nKG8pO1xuXHRcdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHR4aHI6IGZvcm1hdFJlcXVlc3QsXG5cdFx0XHRqc29ucDogZm9ybWF0UmVxdWVzdFxuXHRcdH1cblx0fSk7XG5cblx0ZnVuY3Rpb24gZm9ybWF0UmVxdWVzdChwLCBxcykge1xuXHRcdC8vIEFsdGVyIHRoZSBxdWVyeXN0cmluZ1xuXHRcdHZhciB0b2tlbiA9IHFzLmFjY2Vzc190b2tlbjtcblx0XHRkZWxldGUgcXMuYWNjZXNzX3Rva2VuO1xuXHRcdHFzLm9hdXRoX3Rva2VuID0gdG9rZW47XG5cdFx0cXNbJ19zdGF0dXNfY29kZV9tYXBbMzAyXSddID0gMjAwO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0VXNlcihvKSB7XG5cdFx0aWYgKG8uaWQpIHtcblx0XHRcdG8ucGljdHVyZSA9IG8uYXZhdGFyX3VybDtcblx0XHRcdG8udGh1bWJuYWlsID0gby5hdmF0YXJfdXJsO1xuXHRcdFx0by5uYW1lID0gby51c2VybmFtZSB8fCBvLmZ1bGxfbmFtZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdC8vIFNlZTogaHR0cDovL2RldmVsb3BlcnMuc291bmRjbG91ZC5jb20vZG9jcy9hcGkvcmVmZXJlbmNlI2FjdGl2aXRpZXNcblx0ZnVuY3Rpb24gcGFnaW5nKHJlcykge1xuXHRcdGlmICgnbmV4dF9ocmVmJyBpbiByZXMpIHtcblx0XHRcdHJlcy5wYWdpbmcgPSB7XG5cdFx0XHRcdG5leHQ6IHJlcy5uZXh0X2hyZWZcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cbn0pKGhlbGxvKTtcblxuLy8gU2VlOiBodHRwczovL2RldmVsb3Blci5zcG90aWZ5LmNvbS93ZWItYXBpL1xuKGZ1bmN0aW9uKGhlbGxvKSB7XG5cblx0aGVsbG8uaW5pdCh7XG5cblx0XHRzcG90aWZ5OiB7XG5cdFx0XHRuYW1lOiAnU3BvdGlmeScsXG5cblx0XHRcdG9hdXRoOiB7XG5cdFx0XHRcdHZlcnNpb246IDIsXG5cdFx0XHRcdGF1dGg6ICdodHRwczovL2FjY291bnRzLnNwb3RpZnkuY29tL2F1dGhvcml6ZScsXG5cdFx0XHRcdGdyYW50OiAnaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW4nXG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBTZWU6IGh0dHBzOi8vZGV2ZWxvcGVyLnNwb3RpZnkuY29tL3dlYi1hcGkvdXNpbmctc2NvcGVzL1xuXHRcdFx0c2NvcGVfZGVsaW06ICcgJyxcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdGJhc2ljOiAnJyxcblx0XHRcdFx0cGhvdG9zOiAnJyxcblx0XHRcdFx0ZnJpZW5kczogJ3VzZXItZm9sbG93LXJlYWQnLFxuXHRcdFx0XHRwdWJsaXNoOiAndXNlci1saWJyYXJ5LXJlYWQnLFxuXHRcdFx0XHRlbWFpbDogJ3VzZXItcmVhZC1lbWFpbCcsXG5cdFx0XHRcdHNoYXJlOiAnJyxcblx0XHRcdFx0cHVibGlzaF9maWxlczogJycsXG5cdFx0XHRcdGZpbGVzOiAnJyxcblx0XHRcdFx0dmlkZW9zOiAnJyxcblx0XHRcdFx0b2ZmbGluZV9hY2Nlc3M6ICcnXG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZXF1ZXN0IHBhdGggdHJhbnNsYXRlZFxuXHRcdFx0YmFzZTogJ2h0dHBzOi8vYXBpLnNwb3RpZnkuY29tJyxcblxuXHRcdFx0Ly8gU2VlOiBodHRwczovL2RldmVsb3Blci5zcG90aWZ5LmNvbS93ZWItYXBpL2VuZHBvaW50LXJlZmVyZW5jZS9cblx0XHRcdGdldDoge1xuXHRcdFx0XHRtZTogJy92MS9tZScsXG5cdFx0XHRcdCdtZS9mb2xsb3dpbmcnOiAnL3YxL21lL2ZvbGxvd2luZz90eXBlPWFydGlzdCcsIC8vIE9ubHkgJ2FydGlzdCcgaXMgc3VwcG9ydGVkXG5cblx0XHRcdFx0Ly8gQmVjYXVzZSB0cmFja3MsIGFsYnVtcyBhbmQgcGxheWxpc3QgZXhpc3Qgb24gc3BvdGlmeSwgdGhlIHRyYWNrcyBhcmUgY29uc2lkZXJlZFxuXHRcdFx0XHQvLyB0aGUgcmVzb3VyY2UgZm9yIHRoZSAnbWUvbGlrZXMnIGVuZHBvaW50XG5cdFx0XHRcdCdtZS9saWtlJzogJy92MS9tZS90cmFja3MnXG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZXNwb25zZSBoYW5kbGVyc1xuXHRcdFx0d3JhcDoge1xuXHRcdFx0XHRtZTogZm9ybWF0VXNlcixcblx0XHRcdFx0J21lL2ZvbGxvd2luZyc6IGZvcm1hdEZvbGxvd2Vlcyxcblx0XHRcdFx0J21lL2xpa2UnOiBmb3JtYXRUcmFja3Ncblx0XHRcdH0sXG5cblx0XHRcdHhocjogZm9ybWF0UmVxdWVzdCxcblx0XHRcdGpzb25wOiBmYWxzZVxuXHRcdH1cblx0fSk7XG5cblx0Ly8gTW92ZSB0aGUgYWNjZXNzIHRva2VuIGZyb20gdGhlIHJlcXVlc3QgYm9keSB0byB0aGUgcmVxdWVzdCBoZWFkZXJcblx0ZnVuY3Rpb24gZm9ybWF0UmVxdWVzdChwLCBxcykge1xuXHRcdHZhciB0b2tlbiA9IHFzLmFjY2Vzc190b2tlbjtcblx0XHRkZWxldGUgcXMuYWNjZXNzX3Rva2VuO1xuXHRcdHAuaGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0JlYXJlciAnICsgdG9rZW47XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdFVzZXIobykge1xuXHRcdGlmIChvLmlkKSB7XG5cdFx0XHRvLm5hbWUgPSBvLmRpc3BsYXlfbmFtZTtcblx0XHRcdG8udGh1bWJuYWlsID0gby5pbWFnZXMubGVuZ3RoID8gby5pbWFnZXNbMF0udXJsIDogbnVsbDtcblx0XHRcdG8ucGljdHVyZSA9IG8udGh1bWJuYWlsO1xuXHRcdH1cblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0Rm9sbG93ZWVzKG8pIHtcblx0XHRwYWdpbmcobyk7XG5cdFx0aWYgKG8gJiYgJ2FydGlzdHMnIGluIG8pIHtcblx0XHRcdG8uZGF0YSA9IG8uYXJ0aXN0cy5pdGVtcy5mb3JFYWNoKGZvcm1hdFVzZXIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0VHJhY2tzKG8pIHtcblx0XHRwYWdpbmcobyk7XG5cdFx0by5kYXRhID0gby5pdGVtcztcblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gcGFnaW5nKHJlcykge1xuXHRcdGlmIChyZXMgJiYgJ25leHQnIGluIHJlcykge1xuXHRcdFx0cmVzLnBhZ2luZyA9IHtcblx0XHRcdFx0bmV4dDogcmVzLm5leHRcblx0XHRcdH07XG5cdFx0XHRkZWxldGUgcmVzLm5leHQ7XG5cdFx0fVxuXHR9XG5cbn0pKGhlbGxvKTtcblxuKGZ1bmN0aW9uKGhlbGxvKSB7XG5cblx0dmFyIGJhc2UgPSAnaHR0cHM6Ly9hcGkudHdpdHRlci5jb20vJztcblxuXHRoZWxsby5pbml0KHtcblxuXHRcdHR3aXR0ZXI6IHtcblxuXHRcdFx0Ly8gRW5zdXJlIHRoYXQgeW91IGRlZmluZSBhbiBvYXV0aF9wcm94eVxuXHRcdFx0b2F1dGg6IHtcblx0XHRcdFx0dmVyc2lvbjogJzEuMGEnLFxuXHRcdFx0XHRhdXRoOiBiYXNlICsgJ29hdXRoL2F1dGhlbnRpY2F0ZScsXG5cdFx0XHRcdHJlcXVlc3Q6IGJhc2UgKyAnb2F1dGgvcmVxdWVzdF90b2tlbicsXG5cdFx0XHRcdHRva2VuOiBiYXNlICsgJ29hdXRoL2FjY2Vzc190b2tlbidcblx0XHRcdH0sXG5cblx0XHRcdGxvZ2luOiBmdW5jdGlvbihwKSB7XG5cdFx0XHRcdC8vIFJlYXV0aGVudGljYXRlXG5cdFx0XHRcdC8vIGh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL29hdXRoL3JlZmVyZW5jZS9nZXQvb2F1dGgvYXV0aGVudGljYXRlXG5cdFx0XHRcdHZhciBwcmVmaXggPSAnP2ZvcmNlX2xvZ2luPXRydWUnO1xuXHRcdFx0XHR0aGlzLm9hdXRoLmF1dGggPSB0aGlzLm9hdXRoLmF1dGgucmVwbGFjZShwcmVmaXgsICcnKSArIChwLm9wdGlvbnMuZm9yY2UgPyBwcmVmaXggOiAnJyk7XG5cdFx0XHR9LFxuXG5cdFx0XHRiYXNlOiBiYXNlICsgJzEuMS8nLFxuXG5cdFx0XHRnZXQ6IHtcblx0XHRcdFx0bWU6ICdhY2NvdW50L3ZlcmlmeV9jcmVkZW50aWFscy5qc29uJyxcblx0XHRcdFx0J21lL2ZyaWVuZHMnOiAnZnJpZW5kcy9saXN0Lmpzb24/Y291bnQ9QHtsaW1pdHwyMDB9Jyxcblx0XHRcdFx0J21lL2ZvbGxvd2luZyc6ICdmcmllbmRzL2xpc3QuanNvbj9jb3VudD1Ae2xpbWl0fDIwMH0nLFxuXHRcdFx0XHQnbWUvZm9sbG93ZXJzJzogJ2ZvbGxvd2Vycy9saXN0Lmpzb24/Y291bnQ9QHtsaW1pdHwyMDB9JyxcblxuXHRcdFx0XHQvLyBIdHRwczovL2Rldi50d2l0dGVyLmNvbS9kb2NzL2FwaS8xLjEvZ2V0L3N0YXR1c2VzL3VzZXJfdGltZWxpbmVcblx0XHRcdFx0J21lL3NoYXJlJzogJ3N0YXR1c2VzL3VzZXJfdGltZWxpbmUuanNvbj9jb3VudD1Ae2xpbWl0fDIwMH0nLFxuXG5cdFx0XHRcdC8vIEh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL3Jlc3QvcmVmZXJlbmNlL2dldC9mYXZvcml0ZXMvbGlzdFxuXHRcdFx0XHQnbWUvbGlrZSc6ICdmYXZvcml0ZXMvbGlzdC5qc29uP2NvdW50PUB7bGltaXR8MjAwfSdcblx0XHRcdH0sXG5cblx0XHRcdHBvc3Q6IHtcblx0XHRcdFx0J21lL3NoYXJlJzogZnVuY3Rpb24ocCwgY2FsbGJhY2spIHtcblxuXHRcdFx0XHRcdHZhciBkYXRhID0gcC5kYXRhO1xuXHRcdFx0XHRcdHAuZGF0YSA9IG51bGw7XG5cblx0XHRcdFx0XHR2YXIgc3RhdHVzID0gW107XG5cblx0XHRcdFx0XHQvLyBDaGFuZ2UgbWVzc2FnZSB0byBzdGF0dXNcblx0XHRcdFx0XHRpZiAoZGF0YS5tZXNzYWdlKSB7XG5cdFx0XHRcdFx0XHRzdGF0dXMucHVzaChkYXRhLm1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIGRhdGEubWVzc2FnZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBJZiBsaW5rIGlzIGdpdmVuXG5cdFx0XHRcdFx0aWYgKGRhdGEubGluaykge1xuXHRcdFx0XHRcdFx0c3RhdHVzLnB1c2goZGF0YS5saW5rKTtcblx0XHRcdFx0XHRcdGRlbGV0ZSBkYXRhLmxpbms7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGRhdGEucGljdHVyZSkge1xuXHRcdFx0XHRcdFx0c3RhdHVzLnB1c2goZGF0YS5waWN0dXJlKTtcblx0XHRcdFx0XHRcdGRlbGV0ZSBkYXRhLnBpY3R1cmU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gQ29tcG91bmQgYWxsIHRoZSBjb21wb25lbnRzXG5cdFx0XHRcdFx0aWYgKHN0YXR1cy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGRhdGEuc3RhdHVzID0gc3RhdHVzLmpvaW4oJyAnKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBUd2VldCBtZWRpYVxuXHRcdFx0XHRcdGlmIChkYXRhLmZpbGUpIHtcblx0XHRcdFx0XHRcdGRhdGFbJ21lZGlhW10nXSA9IGRhdGEuZmlsZTtcblx0XHRcdFx0XHRcdGRlbGV0ZSBkYXRhLmZpbGU7XG5cdFx0XHRcdFx0XHRwLmRhdGEgPSBkYXRhO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soJ3N0YXR1c2VzL3VwZGF0ZV93aXRoX21lZGlhLmpzb24nKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBSZXR3ZWV0P1xuXHRcdFx0XHRcdGVsc2UgaWYgKCdpZCcgaW4gZGF0YSkge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2soJ3N0YXR1c2VzL3JldHdlZXQvJyArIGRhdGEuaWQgKyAnLmpzb24nKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBUd2VldFxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gQXNzaWduIHRoZSBwb3N0IGJvZHkgdG8gdGhlIHF1ZXJ5IHBhcmFtZXRlcnNcblx0XHRcdFx0XHRcdGhlbGxvLnV0aWxzLmV4dGVuZChwLnF1ZXJ5LCBkYXRhKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCdzdGF0dXNlcy91cGRhdGUuanNvbj9pbmNsdWRlX2VudGl0aWVzPTEnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gU2VlOiBodHRwczovL2Rldi50d2l0dGVyLmNvbS9yZXN0L3JlZmVyZW5jZS9wb3N0L2Zhdm9yaXRlcy9jcmVhdGVcblx0XHRcdFx0J21lL2xpa2UnOiBmdW5jdGlvbihwLCBjYWxsYmFjaykge1xuXHRcdFx0XHRcdHZhciBpZCA9IHAuZGF0YS5pZDtcblx0XHRcdFx0XHRwLmRhdGEgPSBudWxsO1xuXHRcdFx0XHRcdGNhbGxiYWNrKCdmYXZvcml0ZXMvY3JlYXRlLmpzb24/aWQ9JyArIGlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0ZGVsOiB7XG5cblx0XHRcdFx0Ly8gU2VlOiBodHRwczovL2Rldi50d2l0dGVyLmNvbS9yZXN0L3JlZmVyZW5jZS9wb3N0L2Zhdm9yaXRlcy9kZXN0cm95XG5cdFx0XHRcdCdtZS9saWtlJzogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cC5tZXRob2QgPSAncG9zdCc7XG5cdFx0XHRcdFx0dmFyIGlkID0gcC5kYXRhLmlkO1xuXHRcdFx0XHRcdHAuZGF0YSA9IG51bGw7XG5cdFx0XHRcdFx0Y2FsbGJhY2soJ2Zhdm9yaXRlcy9kZXN0cm95Lmpzb24/aWQ9JyArIGlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0d3JhcDoge1xuXHRcdFx0XHRtZTogZnVuY3Rpb24ocmVzKSB7XG5cdFx0XHRcdFx0Zm9ybWF0RXJyb3IocmVzKTtcblx0XHRcdFx0XHRmb3JtYXRVc2VyKHJlcyk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLFxuXHRcdFx0XHQnbWUvZm9sbG93aW5nJzogZm9ybWF0RnJpZW5kcyxcblxuXHRcdFx0XHQnbWUvc2hhcmUnOiBmdW5jdGlvbihyZXMpIHtcblx0XHRcdFx0XHRmb3JtYXRFcnJvcihyZXMpO1xuXHRcdFx0XHRcdHBhZ2luZyhyZXMpO1xuXHRcdFx0XHRcdGlmICghcmVzLmVycm9yICYmICdsZW5ndGgnIGluIHJlcykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtkYXRhOiByZXN9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0J2RlZmF1bHQnOiBmdW5jdGlvbihyZXMpIHtcblx0XHRcdFx0XHRyZXMgPSBhcnJheVRvRGF0YVJlc3BvbnNlKHJlcyk7XG5cdFx0XHRcdFx0cGFnaW5nKHJlcyk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHhocjogZnVuY3Rpb24ocCkge1xuXG5cdFx0XHRcdC8vIFJlbHkgb24gdGhlIHByb3h5IGZvciBub24tR0VUIHJlcXVlc3RzLlxuXHRcdFx0XHRyZXR1cm4gKHAubWV0aG9kICE9PSAnZ2V0Jyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHRmdW5jdGlvbiBmb3JtYXRVc2VyKG8pIHtcblx0XHRpZiAoby5pZCkge1xuXHRcdFx0aWYgKG8ubmFtZSkge1xuXHRcdFx0XHR2YXIgbSA9IG8ubmFtZS5zcGxpdCgnICcpO1xuXHRcdFx0XHRvLmZpcnN0X25hbWUgPSBtLnNoaWZ0KCk7XG5cdFx0XHRcdG8ubGFzdF9uYW1lID0gbS5qb2luKCcgJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNlZTogaHR0cHM6Ly9kZXYudHdpdHRlci5jb20vb3ZlcnZpZXcvZ2VuZXJhbC91c2VyLXByb2ZpbGUtaW1hZ2VzLWFuZC1iYW5uZXJzXG5cdFx0XHRvLnRodW1ibmFpbCA9IG8ucHJvZmlsZV9pbWFnZV91cmxfaHR0cHMgfHwgby5wcm9maWxlX2ltYWdlX3VybDtcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdEZyaWVuZHMobykge1xuXHRcdGZvcm1hdEVycm9yKG8pO1xuXHRcdHBhZ2luZyhvKTtcblx0XHRpZiAoby51c2Vycykge1xuXHRcdFx0by5kYXRhID0gby51c2Vycy5tYXAoZm9ybWF0VXNlcik7XG5cdFx0XHRkZWxldGUgby51c2Vycztcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdEVycm9yKG8pIHtcblx0XHRpZiAoby5lcnJvcnMpIHtcblx0XHRcdHZhciBlID0gby5lcnJvcnNbMF07XG5cdFx0XHRvLmVycm9yID0ge1xuXHRcdFx0XHRjb2RlOiAncmVxdWVzdF9mYWlsZWQnLFxuXHRcdFx0XHRtZXNzYWdlOiBlLm1lc3NhZ2Vcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0Ly8gVGFrZSBhIGN1cnNvciBhbmQgYWRkIGl0IHRvIHRoZSBwYXRoXG5cdGZ1bmN0aW9uIHBhZ2luZyhyZXMpIHtcblx0XHQvLyBEb2VzIHRoZSByZXNwb25zZSBpbmNsdWRlIGEgJ25leHRfY3Vyc29yX3N0cmluZydcblx0XHRpZiAoJ25leHRfY3Vyc29yX3N0cicgaW4gcmVzKSB7XG5cdFx0XHQvLyBTZWU6IGh0dHBzOi8vZGV2LnR3aXR0ZXIuY29tL2RvY3MvbWlzYy9jdXJzb3Jpbmdcblx0XHRcdHJlcy5wYWdpbmcgPSB7XG5cdFx0XHRcdG5leHQ6ICc/Y3Vyc29yPScgKyByZXMubmV4dF9jdXJzb3Jfc3RyXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGFycmF5VG9EYXRhUmVzcG9uc2UocmVzKSB7XG5cdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkocmVzKSA/IHtkYXRhOiByZXN9IDogcmVzO1xuXHR9XG5cblx0LyoqXG5cdC8vIFRoZSBkb2N1bWVudGF0aW9uIHNheXMgdG8gZGVmaW5lIHVzZXIgaW4gdGhlIHJlcXVlc3Rcblx0Ly8gQWx0aG91Z2ggaXRzIG5vdCBhY3R1YWxseSByZXF1aXJlZC5cblxuXHR2YXIgdXNlcl9pZDtcblxuXHRmdW5jdGlvbiB3aXRoVXNlcklkKGNhbGxiYWNrKXtcblx0XHRpZih1c2VyX2lkKXtcblx0XHRcdGNhbGxiYWNrKHVzZXJfaWQpO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdFx0aGVsbG8uYXBpKCd0d2l0dGVyOi9tZScsIGZ1bmN0aW9uKG8pe1xuXHRcdFx0XHR1c2VyX2lkID0gby5pZDtcblx0XHRcdFx0Y2FsbGJhY2soby5pZCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBzaWduKHVybCl7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHAsIGNhbGxiYWNrKXtcblx0XHRcdHdpdGhVc2VySWQoZnVuY3Rpb24odXNlcl9pZCl7XG5cdFx0XHRcdGNhbGxiYWNrKHVybCsnP3VzZXJfaWQ9Jyt1c2VyX2lkKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdH1cblx0Ki9cblxufSkoaGVsbG8pO1xuXG4vLyBWa29udGFrdGUgKHZrLmNvbSlcbihmdW5jdGlvbihoZWxsbykge1xuXG5cdGhlbGxvLmluaXQoe1xuXG5cdFx0dms6IHtcblx0XHRcdG5hbWU6ICdWaycsXG5cblx0XHRcdC8vIFNlZSBodHRwczovL3ZrLmNvbS9kZXYvb2F1dGhfZGlhbG9nXG5cdFx0XHRvYXV0aDoge1xuXHRcdFx0XHR2ZXJzaW9uOiAyLFxuXHRcdFx0XHRhdXRoOiAnaHR0cHM6Ly9vYXV0aC52ay5jb20vYXV0aG9yaXplJyxcblx0XHRcdFx0Z3JhbnQ6ICdodHRwczovL29hdXRoLnZrLmNvbS9hY2Nlc3NfdG9rZW4nXG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBBdXRob3JpemF0aW9uIHNjb3Blc1xuXHRcdFx0Ly8gU2VlIGh0dHBzOi8vdmsuY29tL2Rldi9wZXJtaXNzaW9uc1xuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0ZW1haWw6ICdlbWFpbCcsXG5cdFx0XHRcdGZyaWVuZHM6ICdmcmllbmRzJyxcblx0XHRcdFx0cGhvdG9zOiAncGhvdG9zJyxcblx0XHRcdFx0dmlkZW9zOiAndmlkZW8nLFxuXHRcdFx0XHRzaGFyZTogJ3NoYXJlJyxcblx0XHRcdFx0b2ZmbGluZV9hY2Nlc3M6ICdvZmZsaW5lJ1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVmcmVzaCB0aGUgYWNjZXNzX3Rva2VuXG5cdFx0XHRyZWZyZXNoOiB0cnVlLFxuXG5cdFx0XHRsb2dpbjogZnVuY3Rpb24ocCkge1xuXHRcdFx0XHRwLnFzLmRpc3BsYXkgPSB3aW5kb3cubmF2aWdhdG9yICYmXG5cdFx0XHRcdFx0d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQgJiZcblx0XHRcdFx0XHQvaXBhZHxwaG9uZXxwaG9uZXxhbmRyb2lkLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpID8gJ21vYmlsZScgOiAncG9wdXAnO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQVBJIEJhc2UgVVJMXG5cdFx0XHRiYXNlOiAnaHR0cHM6Ly9hcGkudmsuY29tL21ldGhvZC8nLFxuXG5cdFx0XHQvLyBNYXAgR0VUIHJlcXVlc3RzXG5cdFx0XHRnZXQ6IHtcblx0XHRcdFx0bWU6IGZ1bmN0aW9uKHAsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0cC5xdWVyeS5maWVsZHMgPSAnaWQsZmlyc3RfbmFtZSxsYXN0X25hbWUscGhvdG9fbWF4Jztcblx0XHRcdFx0XHRjYWxsYmFjaygndXNlcnMuZ2V0Jyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdHdyYXA6IHtcblx0XHRcdFx0bWU6IGZ1bmN0aW9uKHJlcywgaGVhZGVycywgcmVxKSB7XG5cdFx0XHRcdFx0Zm9ybWF0RXJyb3IocmVzKTtcblx0XHRcdFx0XHRyZXR1cm4gZm9ybWF0VXNlcihyZXMsIHJlcSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdC8vIE5vIFhIUlxuXHRcdFx0eGhyOiBmYWxzZSxcblxuXHRcdFx0Ly8gQWxsIHJlcXVlc3RzIHNob3VsZCBiZSBKU09OUCBhcyBvZiBtaXNzaW5nIENPUlMgaGVhZGVycyBpbiBodHRwczovL2FwaS52ay5jb20vbWV0aG9kLypcblx0XHRcdGpzb25wOiB0cnVlLFxuXG5cdFx0XHQvLyBObyBmb3JtXG5cdFx0XHRmb3JtOiBmYWxzZVxuXHRcdH1cblx0fSk7XG5cblx0ZnVuY3Rpb24gZm9ybWF0VXNlcihvLCByZXEpIHtcblxuXHRcdGlmIChvICE9PSBudWxsICYmICdyZXNwb25zZScgaW4gbyAmJiBvLnJlc3BvbnNlICE9PSBudWxsICYmIG8ucmVzcG9uc2UubGVuZ3RoKSB7XG5cdFx0XHRvID0gby5yZXNwb25zZVswXTtcblx0XHRcdG8uaWQgPSBvLnVpZDtcblx0XHRcdG8udGh1bWJuYWlsID0gby5waWN0dXJlID0gby5waG90b19tYXg7XG5cdFx0XHRvLm5hbWUgPSBvLmZpcnN0X25hbWUgKyAnICcgKyBvLmxhc3RfbmFtZTtcblxuXHRcdFx0aWYgKHJlcS5hdXRoUmVzcG9uc2UgJiYgcmVxLmF1dGhSZXNwb25zZS5lbWFpbCAhPT0gbnVsbClcblx0XHRcdFx0by5lbWFpbCA9IHJlcS5hdXRoUmVzcG9uc2UuZW1haWw7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRFcnJvcihvKSB7XG5cblx0XHRpZiAoby5lcnJvcikge1xuXHRcdFx0dmFyIGUgPSBvLmVycm9yO1xuXHRcdFx0by5lcnJvciA9IHtcblx0XHRcdFx0Y29kZTogZS5lcnJvcl9jb2RlLFxuXHRcdFx0XHRtZXNzYWdlOiBlLmVycm9yX21zZ1xuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxufSkoaGVsbG8pO1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHRoZWxsby5pbml0KHtcblx0XHR3aW5kb3dzOiB7XG5cdFx0XHRuYW1lOiAnV2luZG93cyBsaXZlJyxcblxuXHRcdFx0Ly8gUkVGOiBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaGgyNDM2NDEuYXNweFxuXHRcdFx0b2F1dGg6IHtcblx0XHRcdFx0dmVyc2lvbjogMixcblx0XHRcdFx0YXV0aDogJ2h0dHBzOi8vbG9naW4ubGl2ZS5jb20vb2F1dGgyMF9hdXRob3JpemUuc3JmJyxcblx0XHRcdFx0Z3JhbnQ6ICdodHRwczovL2xvZ2luLmxpdmUuY29tL29hdXRoMjBfdG9rZW4uc3JmJ1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVmcmVzaCB0aGUgYWNjZXNzX3Rva2VuIG9uY2UgZXhwaXJlZFxuXHRcdFx0cmVmcmVzaDogdHJ1ZSxcblxuXHRcdFx0bG9nb3V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICdodHRwOi8vbG9naW4ubGl2ZS5jb20vb2F1dGgyMF9sb2dvdXQuc3JmP3RzPScgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQXV0aG9yaXphdGlvbiBzY29wZXNcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdGJhc2ljOiAnd2wuc2lnbmluLHdsLmJhc2ljJyxcblx0XHRcdFx0ZW1haWw6ICd3bC5lbWFpbHMnLFxuXHRcdFx0XHRiaXJ0aGRheTogJ3dsLmJpcnRoZGF5Jyxcblx0XHRcdFx0ZXZlbnRzOiAnd2wuY2FsZW5kYXJzJyxcblx0XHRcdFx0cGhvdG9zOiAnd2wucGhvdG9zJyxcblx0XHRcdFx0dmlkZW9zOiAnd2wucGhvdG9zJyxcblx0XHRcdFx0ZnJpZW5kczogJ3dsLmNvbnRhY3RzX2VtYWlscycsXG5cdFx0XHRcdGZpbGVzOiAnd2wuc2t5ZHJpdmUnLFxuXHRcdFx0XHRwdWJsaXNoOiAnd2wuc2hhcmUnLFxuXHRcdFx0XHRwdWJsaXNoX2ZpbGVzOiAnd2wuc2t5ZHJpdmVfdXBkYXRlJyxcblx0XHRcdFx0c2hhcmU6ICd3bC5zaGFyZScsXG5cdFx0XHRcdGNyZWF0ZV9ldmVudDogJ3dsLmNhbGVuZGFyc191cGRhdGUsd2wuZXZlbnRzX2NyZWF0ZScsXG5cdFx0XHRcdG9mZmxpbmVfYWNjZXNzOiAnd2wub2ZmbGluZV9hY2Nlc3MnXG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBBUEkgYmFzZSBVUkxcblx0XHRcdGJhc2U6ICdodHRwczovL2FwaXMubGl2ZS5uZXQvdjUuMC8nLFxuXG5cdFx0XHQvLyBNYXAgR0VUIHJlcXVlc3RzXG5cdFx0XHRnZXQ6IHtcblxuXHRcdFx0XHQvLyBGcmllbmRzXG5cdFx0XHRcdG1lOiAnbWUnLFxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6ICdtZS9mcmllbmRzJyxcblx0XHRcdFx0J21lL2ZvbGxvd2luZyc6ICdtZS9jb250YWN0cycsXG5cdFx0XHRcdCdtZS9mb2xsb3dlcnMnOiAnbWUvZnJpZW5kcycsXG5cdFx0XHRcdCdtZS9jb250YWN0cyc6ICdtZS9jb250YWN0cycsXG5cblx0XHRcdFx0J21lL2FsYnVtcyc6ICdtZS9hbGJ1bXMnLFxuXG5cdFx0XHRcdC8vIEluY2x1ZGUgdGhlIGRhdGFbaWRdIGluIHRoZSBwYXRoXG5cdFx0XHRcdCdtZS9hbGJ1bSc6ICdAe2lkfS9maWxlcycsXG5cdFx0XHRcdCdtZS9waG90byc6ICdAe2lkfScsXG5cblx0XHRcdFx0Ly8gRmlsZXNcblx0XHRcdFx0J21lL2ZpbGVzJzogJ0B7cGFyZW50fG1lL3NreWRyaXZlfS9maWxlcycsXG5cdFx0XHRcdCdtZS9mb2xkZXJzJzogJ0B7aWR8bWUvc2t5ZHJpdmV9L2ZpbGVzJyxcblx0XHRcdFx0J21lL2ZvbGRlcic6ICdAe2lkfG1lL3NreWRyaXZlfS9maWxlcydcblx0XHRcdH0sXG5cblx0XHRcdC8vIE1hcCBQT1NUIHJlcXVlc3RzXG5cdFx0XHRwb3N0OiB7XG5cdFx0XHRcdCdtZS9hbGJ1bXMnOiAnbWUvYWxidW1zJyxcblx0XHRcdFx0J21lL2FsYnVtJzogJ0B7aWR9L2ZpbGVzLycsXG5cblx0XHRcdFx0J21lL2ZvbGRlcnMnOiAnQHtpZHxtZS9za3lkcml2ZS99Jyxcblx0XHRcdFx0J21lL2ZpbGVzJzogJ0B7cGFyZW50fG1lL3NreWRyaXZlfS9maWxlcydcblx0XHRcdH0sXG5cblx0XHRcdC8vIE1hcCBERUxFVEUgcmVxdWVzdHNcblx0XHRcdGRlbDoge1xuXHRcdFx0XHQvLyBJbmNsdWRlIHRoZSBkYXRhW2lkXSBpbiB0aGUgcGF0aFxuXHRcdFx0XHQnbWUvYWxidW0nOiAnQHtpZH0nLFxuXHRcdFx0XHQnbWUvcGhvdG8nOiAnQHtpZH0nLFxuXHRcdFx0XHQnbWUvZm9sZGVyJzogJ0B7aWR9Jyxcblx0XHRcdFx0J21lL2ZpbGVzJzogJ0B7aWR9J1xuXHRcdFx0fSxcblxuXHRcdFx0d3JhcDoge1xuXHRcdFx0XHRtZTogZm9ybWF0VXNlcixcblxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9jb250YWN0cyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9mb2xsb3dlcnMnOiBmb3JtYXRGcmllbmRzLFxuXHRcdFx0XHQnbWUvZm9sbG93aW5nJzogZm9ybWF0RnJpZW5kcyxcblx0XHRcdFx0J21lL2FsYnVtcyc6IGZvcm1hdEFsYnVtcyxcblx0XHRcdFx0J21lL3Bob3Rvcyc6IGZvcm1hdERlZmF1bHQsXG5cdFx0XHRcdCdkZWZhdWx0JzogZm9ybWF0RGVmYXVsdFxuXHRcdFx0fSxcblxuXHRcdFx0eGhyOiBmdW5jdGlvbihwKSB7XG5cdFx0XHRcdGlmIChwLm1ldGhvZCAhPT0gJ2dldCcgJiYgcC5tZXRob2QgIT09ICdkZWxldGUnICYmICFoZWxsby51dGlscy5oYXNCaW5hcnkocC5kYXRhKSkge1xuXG5cdFx0XHRcdFx0Ly8gRG9lcyB0aGlzIGhhdmUgYSBkYXRhLXVyaSB0byB1cGxvYWQgYXMgYSBmaWxlP1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgKHAuZGF0YS5maWxlKSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHRcdHAuZGF0YS5maWxlID0gaGVsbG8udXRpbHMudG9CbG9iKHAuZGF0YS5maWxlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRwLmRhdGEgPSBKU09OLnN0cmluZ2lmeShwLmRhdGEpO1xuXHRcdFx0XHRcdFx0cC5oZWFkZXJzID0ge1xuXHRcdFx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSxcblxuXHRcdFx0anNvbnA6IGZ1bmN0aW9uKHApIHtcblx0XHRcdFx0aWYgKHAubWV0aG9kICE9PSAnZ2V0JyAmJiAhaGVsbG8udXRpbHMuaGFzQmluYXJ5KHAuZGF0YSkpIHtcblx0XHRcdFx0XHRwLmRhdGEubWV0aG9kID0gcC5tZXRob2Q7XG5cdFx0XHRcdFx0cC5tZXRob2QgPSAnZ2V0Jztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0ZnVuY3Rpb24gZm9ybWF0RGVmYXVsdChvKSB7XG5cdFx0aWYgKCdkYXRhJyBpbiBvKSB7XG5cdFx0XHRvLmRhdGEuZm9yRWFjaChmdW5jdGlvbihkKSB7XG5cdFx0XHRcdGlmIChkLnBpY3R1cmUpIHtcblx0XHRcdFx0XHRkLnRodW1ibmFpbCA9IGQucGljdHVyZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChkLmltYWdlcykge1xuXHRcdFx0XHRcdGQucGljdHVyZXMgPSBkLmltYWdlc1xuXHRcdFx0XHRcdFx0Lm1hcChmb3JtYXRJbWFnZSlcblx0XHRcdFx0XHRcdC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGEud2lkdGggLSBiLndpZHRoO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0SW1hZ2UoaW1hZ2UpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0d2lkdGg6IGltYWdlLndpZHRoLFxuXHRcdFx0aGVpZ2h0OiBpbWFnZS5oZWlnaHQsXG5cdFx0XHRzb3VyY2U6IGltYWdlLnNvdXJjZVxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRBbGJ1bXMobykge1xuXHRcdGlmICgnZGF0YScgaW4gbykge1xuXHRcdFx0by5kYXRhLmZvckVhY2goZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRkLnBob3RvcyA9IGQuZmlsZXMgPSAnaHR0cHM6Ly9hcGlzLmxpdmUubmV0L3Y1LjAvJyArIGQuaWQgKyAnL3Bob3Rvcyc7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdFVzZXIobywgaGVhZGVycywgcmVxKSB7XG5cdFx0aWYgKG8uaWQpIHtcblx0XHRcdHZhciB0b2tlbiA9IHJlcS5xdWVyeS5hY2Nlc3NfdG9rZW47XG5cdFx0XHRpZiAoby5lbWFpbHMpIHtcblx0XHRcdFx0by5lbWFpbCA9IG8uZW1haWxzLnByZWZlcnJlZDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBub3QgYW4gbm9uLW5ldHdvcmsgZnJpZW5kXG5cdFx0XHRpZiAoby5pc19mcmllbmQgIT09IGZhbHNlKSB7XG5cdFx0XHRcdC8vIFVzZSB0aGUgaWQgb2YgdGhlIHVzZXJfaWQgaWYgYXZhaWxhYmxlXG5cdFx0XHRcdHZhciBpZCA9IChvLnVzZXJfaWQgfHwgby5pZCk7XG5cdFx0XHRcdG8udGh1bWJuYWlsID0gby5waWN0dXJlID0gJ2h0dHBzOi8vYXBpcy5saXZlLm5ldC92NS4wLycgKyBpZCArICcvcGljdHVyZT9hY2Nlc3NfdG9rZW49JyArIHRva2VuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gZm9ybWF0RnJpZW5kcyhvLCBoZWFkZXJzLCByZXEpIHtcblx0XHRpZiAoJ2RhdGEnIGluIG8pIHtcblx0XHRcdG8uZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0Zm9ybWF0VXNlcihkLCBoZWFkZXJzLCByZXEpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG87XG5cdH1cblxufSkoaGVsbG8pO1xuXG4oZnVuY3Rpb24oaGVsbG8pIHtcblxuXHRoZWxsby5pbml0KHtcblxuXHRcdHlhaG9vOiB7XG5cblx0XHRcdC8vIEVuc3VyZSB0aGF0IHlvdSBkZWZpbmUgYW4gb2F1dGhfcHJveHlcblx0XHRcdG9hdXRoOiB7XG5cdFx0XHRcdHZlcnNpb246ICcxLjBhJyxcblx0XHRcdFx0YXV0aDogJ2h0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbS9vYXV0aC92Mi9yZXF1ZXN0X2F1dGgnLFxuXHRcdFx0XHRyZXF1ZXN0OiAnaHR0cHM6Ly9hcGkubG9naW4ueWFob28uY29tL29hdXRoL3YyL2dldF9yZXF1ZXN0X3Rva2VuJyxcblx0XHRcdFx0dG9rZW46ICdodHRwczovL2FwaS5sb2dpbi55YWhvby5jb20vb2F1dGgvdjIvZ2V0X3Rva2VuJ1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gTG9naW4gaGFuZGxlclxuXHRcdFx0bG9naW46IGZ1bmN0aW9uKHApIHtcblx0XHRcdFx0Ly8gQ2hhbmdlIHRoZSBkZWZhdWx0IHBvcHVwIHdpbmRvdyB0byBiZSBhdCBsZWFzdCA1NjBcblx0XHRcdFx0Ly8gWWFob28gZG9lcyBkeW5hbWljYWxseSBjaGFuZ2UgaXQgb24gdGhlIGZseSBmb3IgdGhlIHNpZ25pbiBzY3JlZW4gKG9ubHksIHdoYXQgaWYgeW91ciBhbHJlYWR5IHNpZ25lZCBpbilcblx0XHRcdFx0cC5vcHRpb25zLnBvcHVwLndpZHRoID0gNTYwO1xuXG5cdFx0XHRcdC8vIFlhaG9vIHRocm93cyBhbiBwYXJhbWV0ZXIgZXJyb3IgaWYgZm9yIHdoYXRldmVyIHJlYXNvbiB0aGUgc3RhdGUuc2NvcGUgY29udGFpbnMgYSBjb21tYSwgc28gbGV0cyByZW1vdmUgc2NvcGVcblx0XHRcdFx0dHJ5IHtkZWxldGUgcC5xcy5zdGF0ZS5zY29wZTt9XG5cdFx0XHRcdGNhdGNoIChlKSB7fVxuXHRcdFx0fSxcblxuXHRcdFx0YmFzZTogJ2h0dHBzOi8vc29jaWFsLnlhaG9vYXBpcy5jb20vdjEvJyxcblxuXHRcdFx0Z2V0OiB7XG5cdFx0XHRcdG1lOiB5cWwoJ3NlbGVjdCAqIGZyb20gc29jaWFsLnByb2ZpbGUoMCkgd2hlcmUgZ3VpZD1tZScpLFxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6IHlxbCgnc2VsZWN0ICogZnJvbSBzb2NpYWwuY29udGFjdHMoMCkgd2hlcmUgZ3VpZD1tZScpLFxuXHRcdFx0XHQnbWUvZm9sbG93aW5nJzogeXFsKCdzZWxlY3QgKiBmcm9tIHNvY2lhbC5jb250YWN0cygwKSB3aGVyZSBndWlkPW1lJylcblx0XHRcdH0sXG5cdFx0XHR3cmFwOiB7XG5cdFx0XHRcdG1lOiBmb3JtYXRVc2VyLFxuXG5cdFx0XHRcdC8vIENhbid0IGdldCBJRHNcblx0XHRcdFx0Ly8gSXQgbWlnaHQgYmUgYmV0dGVyIHRvIGxvb3AgdGhyb3VnaCB0aGUgc29jaWFsLnJlbGF0aW9uc2hpcCB0YWJsZSB3aXRoIGhhcyB1bmlxdWUgSURzIG9mIHVzZXJzLlxuXHRcdFx0XHQnbWUvZnJpZW5kcyc6IGZvcm1hdEZyaWVuZHMsXG5cdFx0XHRcdCdtZS9mb2xsb3dpbmcnOiBmb3JtYXRGcmllbmRzLFxuXHRcdFx0XHQnZGVmYXVsdCc6IHBhZ2luZ1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0Lypcblx0XHQvLyBBdXRvLXJlZnJlc2ggZml4OiBidWcgaW4gWWFob28gY2FuJ3QgZ2V0IHRoaXMgdG8gd29yayB3aXRoIG5vZGUtb2F1dGgtc2hpbVxuXHRcdGxvZ2luIDogZnVuY3Rpb24obyl7XG5cdFx0XHQvLyBJcyB0aGUgdXNlciBhbHJlYWR5IGxvZ2dlZCBpblxuXHRcdFx0dmFyIGF1dGggPSBoZWxsbygneWFob28nKS5nZXRBdXRoUmVzcG9uc2UoKTtcblxuXHRcdFx0Ly8gSXMgdGhpcyBhIHJlZnJlc2ggdG9rZW4/XG5cdFx0XHRpZihvLm9wdGlvbnMuZGlzcGxheT09PSdub25lJyYmYXV0aCYmYXV0aC5hY2Nlc3NfdG9rZW4mJmF1dGgucmVmcmVzaF90b2tlbil7XG5cdFx0XHRcdC8vIEFkZCB0aGUgb2xkIHRva2VuIGFuZCB0aGUgcmVmcmVzaCB0b2tlbiwgaW5jbHVkaW5nIHBhdGggdG8gdGhlIHF1ZXJ5XG5cdFx0XHRcdC8vIFNlZSBodHRwOi8vZGV2ZWxvcGVyLnlhaG9vLmNvbS9vYXV0aC9ndWlkZS9vYXV0aC1yZWZyZXNoYWNjZXNzdG9rZW4uaHRtbFxuXHRcdFx0XHRvLnFzLmFjY2Vzc190b2tlbiA9IGF1dGguYWNjZXNzX3Rva2VuO1xuXHRcdFx0XHRvLnFzLnJlZnJlc2hfdG9rZW4gPSBhdXRoLnJlZnJlc2hfdG9rZW47XG5cdFx0XHRcdG8ucXMudG9rZW5fdXJsID0gJ2h0dHBzOi8vYXBpLmxvZ2luLnlhaG9vLmNvbS9vYXV0aC92Mi9nZXRfdG9rZW4nO1xuXHRcdFx0fVxuXHRcdH0sXG5cdCovXG5cblx0ZnVuY3Rpb24gZm9ybWF0RXJyb3Iobykge1xuXHRcdGlmIChvICYmICdtZXRhJyBpbiBvICYmICdlcnJvcl90eXBlJyBpbiBvLm1ldGEpIHtcblx0XHRcdG8uZXJyb3IgPSB7XG5cdFx0XHRcdGNvZGU6IG8ubWV0YS5lcnJvcl90eXBlLFxuXHRcdFx0XHRtZXNzYWdlOiBvLm1ldGEuZXJyb3JfbWVzc2FnZVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBmb3JtYXRVc2VyKG8pIHtcblxuXHRcdGZvcm1hdEVycm9yKG8pO1xuXHRcdGlmIChvLnF1ZXJ5ICYmIG8ucXVlcnkucmVzdWx0cyAmJiBvLnF1ZXJ5LnJlc3VsdHMucHJvZmlsZSkge1xuXHRcdFx0byA9IG8ucXVlcnkucmVzdWx0cy5wcm9maWxlO1xuXHRcdFx0by5pZCA9IG8uZ3VpZDtcblx0XHRcdG8ubGFzdF9uYW1lID0gby5mYW1pbHlOYW1lO1xuXHRcdFx0by5maXJzdF9uYW1lID0gby5naXZlbk5hbWUgfHwgby5uaWNrbmFtZTtcblx0XHRcdHZhciBhID0gW107XG5cdFx0XHRpZiAoby5maXJzdF9uYW1lKSB7XG5cdFx0XHRcdGEucHVzaChvLmZpcnN0X25hbWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoby5sYXN0X25hbWUpIHtcblx0XHRcdFx0YS5wdXNoKG8ubGFzdF9uYW1lKTtcblx0XHRcdH1cblxuXHRcdFx0by5uYW1lID0gYS5qb2luKCcgJyk7XG5cdFx0XHRvLmVtYWlsID0gKG8uZW1haWxzICYmIG8uZW1haWxzWzBdKSA/IG8uZW1haWxzWzBdLmhhbmRsZSA6IG51bGw7XG5cdFx0XHRvLnRodW1ibmFpbCA9IG8uaW1hZ2UgPyBvLmltYWdlLmltYWdlVXJsIDogbnVsbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdEZyaWVuZHMobywgaGVhZGVycywgcmVxdWVzdCkge1xuXHRcdGZvcm1hdEVycm9yKG8pO1xuXHRcdHBhZ2luZyhvLCBoZWFkZXJzLCByZXF1ZXN0KTtcblx0XHR2YXIgY29udGFjdDtcblx0XHR2YXIgZmllbGQ7XG5cdFx0aWYgKG8ucXVlcnkgJiYgby5xdWVyeS5yZXN1bHRzICYmIG8ucXVlcnkucmVzdWx0cy5jb250YWN0KSB7XG5cdFx0XHRvLmRhdGEgPSBvLnF1ZXJ5LnJlc3VsdHMuY29udGFjdDtcblx0XHRcdGRlbGV0ZSBvLnF1ZXJ5O1xuXG5cdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkoby5kYXRhKSkge1xuXHRcdFx0XHRvLmRhdGEgPSBbby5kYXRhXTtcblx0XHRcdH1cblxuXHRcdFx0by5kYXRhLmZvckVhY2goZm9ybWF0RnJpZW5kKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIGZvcm1hdEZyaWVuZChjb250YWN0KSB7XG5cdFx0Y29udGFjdC5pZCA9IG51bGw7XG5cblx0XHQvLyAjMzYyOiBSZXBvcnRzIG9mIHJlc3BvbnNlcyByZXR1cm5pbmcgYSBzaW5nbGUgaXRlbSwgcmF0aGVyIHRoYW4gYW4gQXJyYXkgb2YgaXRlbXMuXG5cdFx0Ly8gRm9ybWF0IHRoZSBjb250YWN0LmZpZWxkcyB0byBiZSBhbiBhcnJheS5cblx0XHRpZiAoY29udGFjdC5maWVsZHMgJiYgIShjb250YWN0LmZpZWxkcyBpbnN0YW5jZW9mIEFycmF5KSkge1xuXHRcdFx0Y29udGFjdC5maWVsZHMgPSBbY29udGFjdC5maWVsZHNdO1xuXHRcdH1cblxuXHRcdChjb250YWN0LmZpZWxkcyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihmaWVsZCkge1xuXHRcdFx0aWYgKGZpZWxkLnR5cGUgPT09ICdlbWFpbCcpIHtcblx0XHRcdFx0Y29udGFjdC5lbWFpbCA9IGZpZWxkLnZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZmllbGQudHlwZSA9PT0gJ25hbWUnKSB7XG5cdFx0XHRcdGNvbnRhY3QuZmlyc3RfbmFtZSA9IGZpZWxkLnZhbHVlLmdpdmVuTmFtZTtcblx0XHRcdFx0Y29udGFjdC5sYXN0X25hbWUgPSBmaWVsZC52YWx1ZS5mYW1pbHlOYW1lO1xuXHRcdFx0XHRjb250YWN0Lm5hbWUgPSBmaWVsZC52YWx1ZS5naXZlbk5hbWUgKyAnICcgKyBmaWVsZC52YWx1ZS5mYW1pbHlOYW1lO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZmllbGQudHlwZSA9PT0gJ3lhaG9vaWQnKSB7XG5cdFx0XHRcdGNvbnRhY3QuaWQgPSBmaWVsZC52YWx1ZTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHBhZ2luZyhyZXMsIGhlYWRlcnMsIHJlcXVlc3QpIHtcblxuXHRcdC8vIFNlZTogaHR0cDovL2RldmVsb3Blci55YWhvby5jb20veXFsL2d1aWRlL3BhZ2luZy5odG1sI2xvY2FsX2xpbWl0c1xuXHRcdGlmIChyZXMucXVlcnkgJiYgcmVzLnF1ZXJ5LmNvdW50ICYmIHJlcXVlc3Qub3B0aW9ucykge1xuXHRcdFx0cmVzLnBhZ2luZyA9IHtcblx0XHRcdFx0bmV4dDogJz9zdGFydD0nICsgKHJlcy5xdWVyeS5jb3VudCArICgrcmVxdWVzdC5vcHRpb25zLnN0YXJ0IHx8IDEpKVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzO1xuXHR9XG5cblx0ZnVuY3Rpb24geXFsKHEpIHtcblx0XHRyZXR1cm4gJ2h0dHBzOi8vcXVlcnkueWFob29hcGlzLmNvbS92MS95cWw/cT0nICsgKHEgKyAnIGxpbWl0IEB7bGltaXR8MTAwfSBvZmZzZXQgQHtzdGFydHwwfScpLnJlcGxhY2UoL1xccy9nLCAnJTIwJykgKyAnJmZvcm1hdD1qc29uJztcblx0fVxuXG59KShoZWxsbyk7XG5cbi8vIFJlZ2lzdGVyIGFzIGFub255bW91cyBBTUQgbW9kdWxlXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG5cdGRlZmluZShmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gaGVsbG87XG5cdH0pO1xufVxuXG4vLyBDb21tb25KUyBtb2R1bGUgZm9yIGJyb3dzZXJpZnlcbmlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRtb2R1bGUuZXhwb3J0cyA9IGhlbGxvO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvaGVsbG9qcy9kaXN0L2hlbGxvLmFsbC5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n");

/***/ })

/******/ });